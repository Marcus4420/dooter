var ZR=Object.defineProperty,JR=Object.defineProperties;var XR=Object.getOwnPropertyDescriptors;var vw=Object.getOwnPropertySymbols,eN=Object.getPrototypeOf,tN=Object.prototype.hasOwnProperty,nN=Object.prototype.propertyIsEnumerable,rN=Reflect.get;var ww=(t,e,n)=>e in t?ZR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||={})tN.call(e,n)&&ww(t,n,e[n]);if(vw)for(var n of vw(e))nN.call(e,n)&&ww(t,n,e[n]);return t},ge=(t,e)=>JR(t,XR(e));var Hn=(t,e,n)=>rN(eN(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Iw=null;var ch=1;function lt(t){let e=Iw;return Iw=t,e}var Ew={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function iN(t){if(!(dh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ch)){if(!t.producerMustRecompute(t)&&!uh(t)){t.dirty=!1,t.lastCleanEpoch=ch;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ch}}function Tw(t){return t&&(t.nextProducerIndex=0),lt(t)}function Cw(t,e){if(lt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(dh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function uh(t){Cc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(iN(n),r!==n.version))return!0}return!1}function Dw(t){if(Cc(t),dh(t))for(let e=0;e<t.producerNode.length;e++)lh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lh(t,e){if(sN(t),Cc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)lh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cc(i),i.producerIndexOfThis[r]=e}}function dh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function sN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function oN(){throw new Error}var aN=oN;function bw(t){aN=t}function P(t){return typeof t=="function"}function Ti(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Dc=Ti(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(P(r))try{r()}catch(s){e=s instanceof Dc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Sw(s)}catch(o){e=e??[],o instanceof Dc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Dc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Sw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tr(n,e)}remove(e){let{_finalizers:n}=this;n&&Tr(n,e),e instanceof t&&e._removeParent(this)}};ve.EMPTY=(()=>{let t=new ve;return t.closed=!0,t})();var hh=ve.EMPTY;function bc(t){return t instanceof ve||t&&"closed"in t&&P(t.remove)&&P(t.add)&&P(t.unsubscribe)}function Sw(t){P(t)?t():t.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ci={setTimeout(t,e,...n){let{delegate:r}=Ci;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ci;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Sc(t){Ci.setTimeout(()=>{let{onUnhandledError:e}=kt;if(e)e(t);else throw t})}function Ys(){}var Aw=(()=>fh("C",void 0,void 0))();function Rw(t){return fh("E",void 0,t)}function Nw(t){return fh("N",t,void 0)}function fh(t,e,n){return{kind:t,value:e,error:n}}var Cr=null;function Di(t){if(kt.useDeprecatedSynchronousErrorHandling){let e=!Cr;if(e&&(Cr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Cr;if(Cr=null,n)throw r}}else t()}function xw(t){kt.useDeprecatedSynchronousErrorHandling&&Cr&&(Cr.errorThrown=!0,Cr.error=t)}var Dr=class extends ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bc(e)&&e.add(this)):this.destination=lN}static create(e,n,r){return new bi(e,n,r)}next(e){this.isStopped?gh(Nw(e),this):this._next(e)}error(e){this.isStopped?gh(Rw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gh(Aw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cN=Function.prototype.bind;function ph(t,e){return cN.call(t,e)}var mh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ac(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ac(r)}else Ac(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ac(n)}}},bi=class extends Dr{constructor(e,n,r){super();let i;if(P(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&kt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ph(e.next,s),error:e.error&&ph(e.error,s),complete:e.complete&&ph(e.complete,s)}):i=e}this.destination=new mh(i)}};function Ac(t){kt.useDeprecatedSynchronousErrorHandling?xw(t):Sc(t)}function uN(t){throw t}function gh(t,e){let{onStoppedNotification:n}=kt;n&&Ci.setTimeout(()=>n(t,e))}var lN={closed:!0,next:Ys,error:uN,complete:Ys};var Si=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function dt(t){return t}function yh(...t){return _h(t)}function _h(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=hN(n)?n:new bi(n,r,i);return Di(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Pw(r),new r((i,s)=>{let o=new bi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Si](){return this}pipe(...n){return _h(n)(this)}toPromise(n){return n=Pw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Pw(t){var e;return(e=t??kt.Promise)!==null&&e!==void 0?e:Promise}function dN(t){return t&&P(t.next)&&P(t.error)&&P(t.complete)}function hN(t){return t&&t instanceof Dr||dN(t)&&bc(t)}function vh(t){return P(t?.lift)}function q(t){return e=>{if(vh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(t,e,n,r,i){return new wh(t,e,n,r,i)}var wh=class extends Dr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ai(){return q((t,e)=>{let n=null;t._refCount++;let r=z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ri=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ve;let n=this.getSubject();e.add(this.source.subscribe(z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ve.EMPTY)}return e}refCount(){return Ai()(this)}};var Mw=Ti(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Rc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Mw}next(n){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?hh:(this.currentObservers=null,s.push(n),new ve(()=>{this.currentObservers=null,Tr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Rc(e,n),t})(),Rc=class extends rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:hh}};var je=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ih={now(){return(Ih.delegate||Date).now()},delegate:void 0};var Nc=class extends ve{constructor(e,n){super()}schedule(e,n=0){return this}};var Zs={setInterval(t,e,...n){let{delegate:r}=Zs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Zs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ni=class extends Nc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Zs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Zs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xi.now=Ih.now;var Pi=class extends xi{constructor(e,n=xi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Eh=new Pi(Ni);var xc=class extends Ni{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Pc=class extends Pi{};var Th=new Pc(xc);var _t=new J(t=>t.complete());function kw(t){return t&&P(t.schedule)}function Ow(t){return t[t.length-1]}function Fw(t){return P(Ow(t))?t.pop():void 0}function qn(t){return kw(Ow(t))?t.pop():void 0}function Ch(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Lw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function br(t){return this instanceof br?(this.v=t,this):new br(t)}function Uw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,_){s.push([h,f,g,_])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof br?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function jw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lw=="function"?Lw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Mc=t=>t&&typeof t.length=="number"&&typeof t!="function";function kc(t){return P(t?.then)}function Oc(t){return P(t[Si])}function Fc(t){return Symbol.asyncIterator&&P(t?.[Symbol.asyncIterator])}function Lc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vc=fN();function Uc(t){return P(t?.[Vc])}function jc(t){return Uw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield br(n.read());if(i)return yield br(void 0);yield yield br(r)}}finally{n.releaseLock()}})}function Bc(t){return P(t?.getReader)}function Me(t){if(t instanceof J)return t;if(t!=null){if(Oc(t))return pN(t);if(Mc(t))return gN(t);if(kc(t))return mN(t);if(Fc(t))return Bw(t);if(Uc(t))return yN(t);if(Bc(t))return _N(t)}throw Lc(t)}function pN(t){return new J(e=>{let n=t[Si]();if(P(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gN(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function mN(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Sc)})}function yN(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bw(t){return new J(e=>{vN(t,e).catch(n=>e.error(n))})}function _N(t){return Bw(jc(t))}function vN(t,e){var n,r,i,s;return Vw(this,void 0,void 0,function*(){try{for(n=jw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function it(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function zn(t,e=0){return q((n,r)=>{n.subscribe(z(r,i=>it(r,t,()=>r.next(i),e),()=>it(r,t,()=>r.complete(),e),i=>it(r,t,()=>r.error(i),e)))})}function Wn(t,e=0){return q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function $w(t,e){return Me(t).pipe(Wn(e),zn(e))}function Hw(t,e){return Me(t).pipe(Wn(e),zn(e))}function qw(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zw(t,e){return new J(n=>{let r;return it(n,e,()=>{r=t[Vc](),it(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>P(r?.return)&&r.return()})}function $c(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{it(n,e,()=>{let r=t[Symbol.asyncIterator]();it(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ww(t,e){return $c(jc(t),e)}function Gw(t,e){if(t!=null){if(Oc(t))return $w(t,e);if(Mc(t))return qw(t,e);if(kc(t))return Hw(t,e);if(Fc(t))return $c(t,e);if(Uc(t))return zw(t,e);if(Bc(t))return Ww(t,e)}throw Lc(t)}function Ne(t,e){return e?Gw(t,e):Me(t)}function O(...t){let e=qn(t);return Ne(t,e)}function Mi(t,e){let n=P(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Dh(t){return!!t&&(t instanceof J||P(t.lift)&&P(t.subscribe))}var Tn=Ti(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function W(t,e){return q((n,r)=>{let i=0;n.subscribe(z(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:wN}=Array;function IN(t,e){return wN(e)?t(...e):t(e)}function Kw(t){return W(e=>IN(t,e))}var{isArray:EN}=Array,{getPrototypeOf:TN,prototype:CN,keys:DN}=Object;function Qw(t){if(t.length===1){let e=t[0];if(EN(e))return{args:e,keys:null};if(bN(e)){let n=DN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function bN(t){return t&&typeof t=="object"&&TN(t)===CN}function Yw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Hc(...t){let e=qn(t),n=Fw(t),{args:r,keys:i}=Qw(t);if(r.length===0)return Ne([],e);let s=new J(SN(r,e,i?o=>Yw(i,o):dt));return n?s.pipe(Kw(n)):s}function SN(t,e,n=dt){return r=>{Zw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Zw(e,()=>{let u=Ne(t[c],e),l=!1;u.subscribe(z(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Zw(t,e,n){t?it(n,t,e):e()}function Jw(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?g(_):c.push(_),g=_=>{s&&e.next(_),u++;let I=!1;Me(n(_,l++)).subscribe(z(e,b=>{i?.(b),s?f(b):e.next(b)},()=>{I=!0},void 0,()=>{if(I)try{for(u--;c.length&&u<r;){let b=c.shift();o?it(e,o,()=>g(b)):g(b)}h()}catch(b){e.error(b)}}))};return t.subscribe(z(e,f,()=>{d=!0,h()})),()=>{a?.()}}function xe(t,e,n=1/0){return P(e)?xe((r,i)=>W((s,o)=>e(r,s,i,o))(Me(t(r,i))),n):(typeof e=="number"&&(n=e),q((r,i)=>Jw(r,i,t,n)))}function bh(t=1/0){return xe(dt,t)}function Xw(){return bh(1)}function ki(...t){return Xw()(Ne(t,qn(t)))}function qc(t){return new J(e=>{Me(t()).subscribe(e)})}function Ot(t,e){return q((n,r)=>{let i=0;n.subscribe(z(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gn(t){return q((e,n)=>{let r=null,i=!1,s;r=e.subscribe(z(n,void 0,void 0,o=>{s=Me(t(o,Gn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function eI(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(z(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Oi(t,e){return P(e)?xe(t,e,1):xe(t,1)}function Kn(t){return q((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Cn(t){return t<=0?()=>_t:q((e,n)=>{let r=0;e.subscribe(z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Sh(t){return W(()=>t)}function zc(t=AN){return q((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function AN(){return new Tn}function Js(t){return q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):dt,Cn(1),n?Kn(e):zc(()=>new Tn))}function Fi(t){return t<=0?()=>_t:q((e,n)=>{let r=[];e.subscribe(z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ah(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):dt,Fi(1),n?Kn(e):zc(()=>new Tn))}function Rh(t,e){return q(eI(t,e,arguments.length>=2,!0))}function Nh(...t){let e=qn(t);return q((n,r)=>{(e?ki(t,n,e):ki(t,n)).subscribe(r)})}function Ft(t,e){return q((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(z(r,c=>{i?.unsubscribe();let u=0,l=s++;Me(t(c,l)).subscribe(i=z(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xh(t){return q((e,n)=>{Me(t).subscribe(z(n,()=>n.complete(),Ys)),!n.closed&&e.subscribe(n)})}function Te(t,e,n){let r=P(t)||e||n?{next:t,error:e,complete:n}:t;return r?q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(z(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):dt}function ue(t){for(let e in t)if(t[e]===ue)return e;throw Error("Could not find renamed property on target object.")}function st(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(st).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function tI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var RN=ue({__forward_ref__:ue});function LI(t){return t.__forward_ref__=LI,t.toString=function(){return st(this())},t}function wt(t){return VI(t)?t():t}function VI(t){return typeof t=="function"&&t.hasOwnProperty(RN)&&t.__forward_ref__===LI}function UI(t){return t&&!!t.\u0275providers}var jI="https://g.co/ng/security#xss",A=class extends Error{constructor(e,n){super(Tf(e,n)),this.code=e}};function Tf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var NN=ue({\u0275cmp:ue}),xN=ue({\u0275dir:ue}),PN=ue({\u0275pipe:ue}),MN=ue({\u0275mod:ue}),Xc=ue({\u0275fac:ue}),Xs=ue({__NG_ELEMENT_ID__:ue}),nI=ue({__NG_ENV_ID__:ue});function no(t){return typeof t=="string"?t:t==null?"":String(t)}function kN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():no(t)}function ON(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new A(-200,`Circular dependency in DI detected for ${t}${n}`)}function Cf(t,e){throw new A(-201,!1)}function FN(t,e){t==null&&LN(e,t,null,"!=")}function LN(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function x(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function _u(t){return rI(t,$I)||rI(t,HI)}function BI(t){return _u(t)!==null}function rI(t,e){return t.hasOwnProperty(e)?t[e]:null}function VN(t){let e=t&&(t[$I]||t[HI]);return e||null}function iI(t){return t&&(t.hasOwnProperty(sI)||t.hasOwnProperty(UN))?t[sI]:null}var $I=ue({\u0275prov:ue}),sI=ue({\u0275inj:ue}),HI=ue({ngInjectableDef:ue}),UN=ue({ngInjectorDef:ue}),j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(j||{}),$h;function jN(){return $h}function vt(t){let e=$h;return $h=t,e}function qI(t,e,n){let r=_u(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&j.Optional)return null;if(e!==void 0)return e;Cf(t,"Injector")}var Sr=globalThis;var F=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=x({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var BN={},ro=BN,Hh="__NG_DI_FLAG__",eu="ngTempTokenPath",$N="ngTokenPath",HN=/\n/gm,qN="\u0275",oI="__source",eo;function Qn(t){let e=eo;return eo=t,e}function zN(t,e=j.Default){if(eo===void 0)throw new A(-203,!1);return eo===null?qI(t,void 0,e):eo.get(t,e&j.Optional?null:void 0,e)}function U(t,e=j.Default){return(jN()||zN)(wt(t),e)}function E(t,e=j.Default){return U(t,vu(e))}function vu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qh(t){let e=[];for(let n=0;n<t.length;n++){let r=wt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,s=j.Default;for(let o=0;o<r.length;o++){let a=r[o],c=WN(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(U(i,s))}else e.push(U(r))}return e}function zI(t,e){return t[Hh]=e,t.prototype[Hh]=e,t}function WN(t){return t[Hh]}function GN(t,e,n,r){let i=t[eu];throw e[oI]&&i.unshift(e[oI]),t.message=KN(`
`+t.message,i,n,r),t[$N]=i,t[eu]=null,t}function KN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==qN?t.slice(2):t;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):st(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(HN,`
  `)}`}function yo(t){return{toString:t}.toString()}var WI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(WI||{}),en=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(en||{}),io={},Zt=[];function GI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function zh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];QN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function KI(t){return t===3||t===4||t===6}function QN(t){return t.charCodeAt(0)===64}function Df(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?aI(t,n,i,null,e[++r]):aI(t,n,i,null,null))}}return t}function aI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var QI="ng-template";function YN(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&GI(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function YI(t){return t.type===4&&t.value!==QI}function ZN(t,e,n){let r=t.type===4&&!n?QI:t.value;return e===r}function JN(t,e,n){let r=4,i=t.attrs||[],s=tx(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Lt(r)&&!Lt(c))return!1;if(o&&Lt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!ZN(t,c,n)||c===""&&e.length===1){if(Lt(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!YN(t.attrs,u,n)){if(Lt(r))return!1;o=!0}continue}let l=r&8?"class":c,d=XN(l,i,YI(t),n);if(d===-1){if(Lt(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&GI(f,u,0)!==-1||r&2&&u!==h){if(Lt(r))return!1;o=!0}}}}return Lt(r)||o}function Lt(t){return(t&1)===0}function XN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nx(e,t)}function ex(t,e,n=!1){for(let r=0;r<e.length;r++)if(JN(t,e[r],n))return!0;return!1}function tx(t){for(let e=0;e<t.length;e++){let n=t[e];if(KI(n))return e}return t.length}function nx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function cI(t,e){return t?":not("+e.trim()+")":e}function rx(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Lt(o)&&(e+=cI(s,i),i=""),r=o,s=s||!Lt(r);n++}return i!==""&&(e+=cI(s,i)),e}function ix(t){return t.map(rx).join(",")}function sx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Lt(i))break;i=s}r++}return{attrs:e,classes:n}}function sn(t){return yo(()=>{let e=tE(t),n=ge(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===WI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||en.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});nE(n);let r=t.dependencies;return n.directiveDefs=lI(r,!1),n.pipeDefs=lI(r,!0),n.id=cx(n),n})}function ox(t){return Nr(t)||ZI(t)}function ax(t){return t!==null}function Ct(t){return yo(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uI(t,e){if(t==null)return io;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function qi(t){return yo(()=>{let e=tE(t);return nE(e),e})}function Nr(t){return t[NN]||null}function ZI(t){return t[xN]||null}function JI(t){return t[PN]||null}function XI(t){let e=Nr(t)||ZI(t)||JI(t);return e!==null?e.standalone:!1}function eE(t,e){let n=t[MN]||null;if(!n&&e===!0)throw new Error(`Type ${st(t)} does not have '\u0275mod' property.`);return n}function tE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||io,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uI(t.inputs,e),outputs:uI(t.outputs),debugInfo:null}}function nE(t){t.features?.forEach(e=>e(t))}function lI(t,e){if(!t)return null;let n=e?JI:ox;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ax)}function cx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Sn=0,G=1,N=2,He=3,Ut=4,jt=5,tu=6,so=7,Dn=8,Bi=9,tn=10,qe=11,oo=12,dI=13,_o=14,nn=15,wu=16,Li=17,ao=18,Iu=19,rE=20,to=21,Ph=22,xr=23,Yn=25,iE=1;var Pr=7,nu=8,ru=9,It=10,bf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(bf||{});function Ar(t){return Array.isArray(t)&&typeof t[iE]=="object"}function An(t){return Array.isArray(t)&&t[iE]===!0}function sE(t){return(t.flags&4)!==0}function Eu(t){return t.componentOffset>-1}function Sf(t){return(t.flags&1)===1}function vo(t){return!!t.template}function ux(t){return(t[N]&512)!==0}function $i(t,e){let n=t.hasOwnProperty(Xc);return n?t[Xc]:null}var Wh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function wo(){return oE}function oE(t){return t.type.prototype.ngOnChanges&&(t.setInput=dx),lx}wo.ngInherit=!0;function lx(){let t=cE(this),e=t?.current;if(e){let n=t.previous;if(n===io)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dx(t,e,n,r){let i=this.declaredInputs[n],s=cE(t)||hx(t,{previous:io,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Wh(c&&c.currentValue,e,a===io),t[r]=e}var aE="__ngSimpleChanges__";function cE(t){return t[aE]||null}function hx(t,e){return t[aE]=e}var hI=null;var Jt=function(t,e,n){hI?.(t,e,n)},fx="svg",px="math",gx=!1;function mx(){return gx}function rn(t){for(;Array.isArray(t);)t=t[Sn];return t}function yx(t,e){return rn(e[t])}function Dt(t,e){return rn(e[t.index])}function uE(t,e){return t.data[e]}function Xn(t,e){let n=e[t];return Ar(n)?n:n[Sn]}function Af(t){return(t[N]&128)===128}function _x(t){return An(t[He])}function iu(t,e){return e==null?null:t[e]}function lE(t){t[Li]=0}function vx(t){t[N]&1024||(t[N]|=1024,Af(t)&&co(t))}function dE(t){return t[N]&9216||t[xr]?.dirty}function Gh(t){dE(t)?co(t):t[N]&64&&(mx()?(t[N]|=1024,co(t)):t[tn].changeDetectionScheduler?.notify())}function co(t){t[tn].changeDetectionScheduler?.notify();let e=uo(t);for(;e!==null&&!(e[N]&8192||(e[N]|=8192,!Af(e)));)e=uo(e)}function wx(t,e){if((t[N]&256)===256)throw new A(911,!1);t[to]===null&&(t[to]=[]),t[to].push(e)}function uo(t){let e=t[He];return An(e)?e[He]:e}var X={lFrame:vE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ix(){return X.lFrame.elementDepthCount}function Ex(){X.lFrame.elementDepthCount++}function Tx(){X.lFrame.elementDepthCount--}function hE(){return X.bindingsEnabled}function Cx(){return X.skipHydrationRootTNode!==null}function Dx(t){return X.skipHydrationRootTNode===t}function bx(){X.skipHydrationRootTNode=null}function Pe(){return X.lFrame.lView}function er(){return X.lFrame.tView}function bt(){let t=fE();for(;t!==null&&t.type===64;)t=t.parent;return t}function fE(){return X.lFrame.currentTNode}function Sx(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Io(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function pE(){return X.lFrame.isParent}function Ax(){X.lFrame.isParent=!1}function Rx(){return X.lFrame.bindingIndex}function Nx(t){return X.lFrame.bindingIndex=t}function gE(){return X.lFrame.bindingIndex++}function xx(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Px(){return X.lFrame.inI18n}function Mx(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kh(e)}function kx(){return X.lFrame.currentDirectiveIndex}function Kh(t){X.lFrame.currentDirectiveIndex=t}function mE(t){X.lFrame.currentQueryIndex=t}function Ox(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[jt]:null}function yE(t,e,n){if(n&j.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&j.Host);)if(i=Ox(s),i===null||(s=s[_o],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=X.lFrame=_E();return r.currentTNode=e,r.lView=t,!0}function Rf(t){let e=_E(),n=t[G];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _E(){let t=X.lFrame,e=t===null?null:t.child;return e===null?vE(t):e}function vE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function wE(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var IE=wE;function Nf(){let t=wE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xf(){return X.lFrame.selectedIndex}function Mr(t){X.lFrame.selectedIndex=t}function EE(){let t=X.lFrame;return uE(t.tView,t.selectedIndex)}function Fx(){return X.lFrame.currentNamespace}var TE=!0;function Pf(){return TE}function Mf(t){TE=t}function Lx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=oE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function kf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Kc(t,e,n){CE(t,e,3,n)}function Qc(t,e,n,r){(t[N]&3)===n&&CE(t,e,n,r)}function Mh(t,e){let n=t[N];(n&3)===e&&(n&=16383,n+=1,t[N]=n)}function CE(t,e,n,r){let i=r!==void 0?t[Li]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Li]+=65536),(a<s||s==-1)&&(Vx(t,n,e,c),t[Li]=(t[Li]&4294901760)+c+2),c++}function fI(t,e){Jt(4,t,e);let n=lt(null);try{e.call(t)}finally{lt(n),Jt(5,t,e)}}function Vx(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[N]>>14<t[Li]>>16&&(t[N]&3)===e&&(t[N]+=16384,fI(a,s)):fI(a,s)}var ji=-1,lo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Ux(t){return t instanceof lo}function jx(t){return(t.flags&8)!==0}function Bx(t){return(t.flags&16)!==0}function DE(t){return t!==ji}function su(t){return t&32767}function $x(t){return t>>16}function ou(t,e){let n=$x(t),r=e;for(;n>0;)r=r[_o],n--;return r}var Qh=!0;function pI(t){let e=Qh;return Qh=t,e}var Hx=256,bE=Hx-1,SE=5,qx=0,Xt={};function zx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xs)&&(r=n[Xs]),r==null&&(r=n[Xs]=qx++);let i=r&bE,s=1<<i;e.data[t+(i>>SE)]|=s}function AE(t,e){let n=RE(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,kh(r.data,t),kh(e,null),kh(r.blueprint,null));let i=Of(t,e),s=t.injectorIndex;if(DE(i)){let o=su(i),a=ou(i,e),c=a[G].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function kh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Of(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kE(i),r===null)return ji;if(n++,i=i[_o],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ji}function Wx(t,e,n){zx(t,e,n)}function Gx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(KI(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function NE(t,e,n){if(n&j.Optional||t!==void 0)return t;Cf(e,"NodeInjector")}function xE(t,e,n,r){if(n&j.Optional&&r===void 0&&(r=null),!(n&(j.Self|j.Host))){let i=t[Bi],s=vt(void 0);try{return i?i.get(e,r,n&j.Optional):qI(e,r,n&j.Optional)}finally{vt(s)}}return NE(r,e,n)}function PE(t,e,n,r=j.Default,i){if(t!==null){if(e[N]&2048&&!(r&j.Self)){let o=Jx(t,e,n,r,Xt);if(o!==Xt)return o}let s=ME(t,e,n,r,Xt);if(s!==Xt)return s}return xE(e,n,r,i)}function ME(t,e,n,r,i){let s=Yx(n);if(typeof s=="function"){if(!yE(e,t,r))return r&j.Host?NE(i,n,r):xE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&j.Optional))Cf(n);else return o}finally{IE()}}else if(typeof s=="number"){let o=null,a=RE(t,e),c=ji,u=r&j.Host?e[nn][jt]:null;for((a===-1||r&j.SkipSelf)&&(c=a===-1?Of(t,e):e[a+8],c===ji||!mI(r,!1)?a=-1:(o=e[G],a=su(c),e=ou(c,e)));a!==-1;){let l=e[G];if(gI(s,a,l.data)){let d=Kx(a,e,n,o,r,u);if(d!==Xt)return d}c=e[a+8],c!==ji&&mI(r,e[G].data[a+8]===u)&&gI(s,a,e)?(o=l,a=su(c),e=ou(c,e)):a=-1}}return i}function Kx(t,e,n,r,i,s){let o=e[G],a=o.data[t+8],c=r==null?Eu(a)&&Qh:r!=o&&(a.type&3)!==0,u=i&j.Host&&s===a,l=Qx(a,o,n,c,u);return l!==null?ho(e,o,l,a):Xt}function Qx(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&vo(f)&&f.type===n)return c}return null}function ho(t,e,n,r){let i=t[n],s=e.data;if(Ux(i)){let o=i;o.resolving&&ON(kN(s[n]));let a=pI(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?vt(o.injectImpl):null,l=yE(t,r,j.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Lx(n,s[n],e)}finally{u!==null&&vt(u),pI(a),o.resolving=!1,IE()}}return i}function Yx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xs)?t[Xs]:void 0;return typeof e=="number"?e>=0?e&bE:Zx:e}function gI(t,e,n){let r=1<<t;return!!(n[e+(t>>SE)]&r)}function mI(t,e){return!(t&j.Self)&&!(t&j.Host&&e)}var Rr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PE(this._tNode,this._lView,e,vu(r),n)}};function Zx(){return new Rr(bt(),Pe())}function Ff(t){return yo(()=>{let e=t.prototype.constructor,n=e[Xc]||Yh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Xc]||Yh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yh(t){return VI(t)?()=>{let e=Yh(wt(t));return e&&e()}:$i(t)}function Jx(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[N]&2048&&!(o[N]&512);){let a=ME(s,o,n,r|j.Self,Xt);if(a!==Xt)return a;let c=s.parent;if(!c){let u=o[rE];if(u){let l=u.get(n,Xt,r);if(l!==Xt)return l}c=kE(o),o=o[_o]}s=c}return i}function kE(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[jt]:null}function Lf(t){return Gx(bt(),t)}var Wc="__parameters__";function Xx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function OE(t,e,n){return yo(()=>{let r=Xx(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Wc)?c[Wc]:Object.defineProperty(c,Wc,{value:[]})[Wc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function eP(t){return typeof t=="function"}function Vf(t,e){t.forEach(n=>Array.isArray(n)?Vf(n,e):e(n))}function FE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function au(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Ce=zI(OE("Optional"),8);var LE=zI(OE("SkipSelf"),4);var Hi=new F("ENVIRONMENT_INITIALIZER"),VE=new F("INJECTOR",-1),UE=new F("INJECTOR_DEF_TYPES"),cu=class{get(e,n=ro){if(n===ro){let r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return n}};function Tu(t){return{\u0275providers:t}}function zi(...t){return{\u0275providers:jE(!0,t),\u0275fromNgModule:!0}}function jE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Vf(e,o=>{let a=o;Zh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BE(i,s),n}function BE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Uf(i,s=>{e(s,r)})}}function Zh(t,e,n,r){if(t=wt(t),!t)return!1;let i=null,s=iI(t),o=!s&&Nr(t);if(!s&&!o){let c=t.ngModule;if(s=iI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Zh(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Vf(s.imports,l=>{Zh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&BE(u,e)}if(!a){let u=$i(i)||(()=>new i);e({provide:i,useFactory:u,deps:Zt},i),e({provide:UE,useValue:i,multi:!0},i),e({provide:Hi,useValue:()=>U(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Uf(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Uf(t,e){for(let n of t)UI(n)&&(n=n.\u0275providers),Array.isArray(n)?Uf(n,e):e(n)}var tP=ue({provide:String,useValue:ue});function $E(t){return t!==null&&typeof t=="object"&&tP in t}function nP(t){return!!(t&&t.useExisting)}function rP(t){return!!(t&&t.useFactory)}function Jh(t){return typeof t=="function"}var Cu=new F("Set Injector scope."),Yc={},iP={},Oh;function jf(){return Oh===void 0&&(Oh=new cu),Oh}var Et=class{},fo=class extends Et{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ef(e,o=>this.processProvider(o)),this.records.set(VE,Vi(void 0,this)),i.has("environment")&&this.records.set(Et,Vi(void 0,this));let s=this.records.get(Cu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(UE,Zt,j.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Qn(this),r=vt(void 0),i;try{return e()}finally{Qn(n),vt(r)}}get(e,n=ro,r=j.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nI))return e[nI](this);r=vu(r);let i,s=Qn(this),o=vt(void 0);try{if(!(r&j.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=lP(e)&&_u(e);u&&this.injectableDefInScope(u)?c=Vi(Xh(e),Yc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&j.Self?jf():this.parent;return n=r&j.Optional&&n===ro?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[eu]=a[eu]||[]).unshift(st(e)),s)throw a;return GN(a,e,"R3InjectorError",this.source)}else throw a}finally{vt(o),Qn(s)}}resolveInjectorInitializers(){let e=Qn(this),n=vt(void 0),r;try{let i=this.get(Hi,Zt,j.Self);for(let s of i)s()}finally{Qn(e),vt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(e){e=wt(e);let n=Jh(e)?e:wt(e&&e.provide),r=oP(e);if(!Jh(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Vi(void 0,Yc,!0),i.factory=()=>qh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Yc&&(n.value=iP,n.value=n.factory()),typeof n.value=="object"&&n.value&&uP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=wt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Xh(t){let e=_u(t),n=e!==null?e.factory:$i(t);if(n!==null)return n;if(t instanceof F)throw new A(204,!1);if(t instanceof Function)return sP(t);throw new A(204,!1)}function sP(t){if(t.length>0)throw new A(204,!1);let n=VN(t);return n!==null?()=>n.factory(t):()=>new t}function oP(t){if($E(t))return Vi(void 0,t.useValue);{let e=aP(t);return Vi(e,Yc)}}function aP(t,e,n){let r;if(Jh(t)){let i=wt(t);return $i(i)||Xh(i)}else if($E(t))r=()=>wt(t.useValue);else if(rP(t))r=()=>t.useFactory(...qh(t.deps||[]));else if(nP(t))r=()=>U(wt(t.useExisting));else{let i=wt(t&&(t.useClass||t.provide));if(cP(t))r=()=>new i(...qh(t.deps));else return $i(i)||Xh(i)}return r}function Vi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cP(t){return!!t.deps}function uP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lP(t){return typeof t=="function"||typeof t=="object"&&t instanceof F}function ef(t,e){for(let n of t)Array.isArray(n)?ef(n,e):n&&UI(n)?ef(n.\u0275providers,e):e(n)}function Fr(t,e){t instanceof fo&&t.assertNotDestroyed();let n,r=Qn(t),i=vt(void 0);try{return e()}finally{Qn(r),vt(i)}}function yI(t,e=null,n=null,r){let i=HE(t,e,n,r);return i.resolveInjectorInitializers(),i}function HE(t,e=null,n=null,r,i=new Set){let s=[n||Zt,zi(t)];return r=r||(typeof t=="object"?void 0:st(t)),new fo(s,e||jf(),r||null,i)}var ot=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return yI({name:""},i,r,"");{let s=r.name??"";return yI({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ro,e.NULL=new cu,e.\u0275prov=x({token:e,providedIn:"any",factory:()=>U(VE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var tf;function qE(t){tf=t}function dP(){if(tf!==void 0)return tf;if(typeof document<"u")return document;throw new A(210,!1)}var Bf=new F("AppId",{providedIn:"root",factory:()=>hP}),hP="ng",$f=new F("Platform Initializer"),tr=new F("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Hf=new F("CSP nonce",{providedIn:"root",factory:()=>dP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function zE(t){return t instanceof Function?t():t}function WE(t){return(t.flags&128)===128}var Lr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Lr||{});var GE=new Map,fP=0;function pP(){return fP++}function gP(t){GE.set(t[Iu],t)}function mP(t){GE.delete(t[Iu])}var _I="__ngContext__";function kr(t,e){Ar(e)?(t[_I]=e[Iu],gP(e)):t[_I]=e}var yP;function qf(t,e){return yP(t,e)}function Ui(t,e,n,r,i){if(r!=null){let s,o=!1;An(r)?s=r:Ar(r)&&(o=!0,r=r[Sn]);let a=rn(r);t===0&&n!==null?i==null?JE(e,n,a):uu(e,n,a,i||null,!0):t===1&&n!==null?uu(e,n,a,i||null,!0):t===2?kP(e,a,o):t===3&&e.destroyNode(a),s!=null&&FP(e,t,s,n,i)}}function _P(t,e){return t.createText(e)}function vP(t,e,n){t.setValue(e,n)}function KE(t,e,n){return t.createElement(e,n)}function wP(t,e){QE(t,e),e[Sn]=null,e[jt]=null}function IP(t,e,n,r,i,s){r[Sn]=i,r[jt]=e,Du(t,r,n,1,i,s)}function QE(t,e){e[tn].changeDetectionScheduler?.notify(),Du(t,e,e[qe],2,null,null)}function EP(t){let e=t[oo];if(!e)return Fh(t[G],t);for(;e;){let n=null;if(Ar(e))n=e[oo];else{let r=e[It];r&&(n=r)}if(!n){for(;e&&!e[Ut]&&e!==t;)Ar(e)&&Fh(e[G],e),e=e[He];e===null&&(e=t),Ar(e)&&Fh(e[G],e),n=e&&e[Ut]}e=n}}function TP(t,e,n,r){let i=It+r,s=n.length;r>0&&(n[i-1][Ut]=e),r<s-It?(e[Ut]=n[i],FE(n,It+r,e)):(n.push(e),e[Ut]=null),e[He]=n;let o=e[wu];o!==null&&n!==o&&CP(o,e);let a=e[ao];a!==null&&a.insertView(t),Gh(e),e[N]|=128}function CP(t,e){let n=t[ru],i=e[He][He][nn];e[nn]!==i&&(t[N]|=bf.HasTransplantedViews),n===null?t[ru]=[e]:n.push(e)}function YE(t,e){let n=t[ru],r=n.indexOf(e);n.splice(r,1)}function nf(t,e){if(t.length<=It)return;let n=It+e,r=t[n];if(r){let i=r[wu];i!==null&&i!==t&&YE(i,r),e>0&&(t[n-1][Ut]=r[Ut]);let s=au(t,It+e);wP(r[G],r);let o=s[ao];o!==null&&o.detachView(s[G]),r[He]=null,r[Ut]=null,r[N]&=-129}return r}function ZE(t,e){if(!(e[N]&256)){let n=e[qe];n.destroyNode&&Du(t,e,n,3,null,null),EP(e)}}function Fh(t,e){if(!(e[N]&256)){e[N]&=-129,e[N]|=256,e[xr]&&Dw(e[xr]),bP(t,e),DP(t,e),e[G].type===1&&e[qe].destroy();let n=e[wu];if(n!==null&&An(e[He])){n!==e[He]&&YE(n,e);let r=e[ao];r!==null&&r.detachView(t)}mP(e)}}function DP(t,e){let n=t.cleanup,r=e[so];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[so]=null);let i=e[to];if(i!==null){e[to]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function bP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof lo)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Jt(4,a,c);try{c.call(a)}finally{Jt(5,a,c)}}else{Jt(4,i,s);try{s.call(i)}finally{Jt(5,i,s)}}}}}function SP(t,e,n){return AP(t,e.parent,n)}function AP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Sn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===en.None||s===en.Emulated)return null}return Dt(r,n)}}function uu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function JE(t,e,n){t.appendChild(e,n)}function vI(t,e,n,r,i){r!==null?uu(t,e,n,r,i):JE(t,e,n)}function RP(t,e,n,r){t.removeChild(e,n,r)}function zf(t,e){return t.parentNode(e)}function NP(t,e){return t.nextSibling(e)}function xP(t,e,n){return MP(t,e,n)}function PP(t,e,n){return t.type&40?Dt(t,n):null}var MP=PP,wI;function Wf(t,e,n,r){let i=SP(t,r,e),s=e[qe],o=r.parent||e[jt],a=xP(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)vI(s,i,n[c],a,!1);else vI(s,i,n,a,!1);wI!==void 0&&wI(s,r,e,n,i)}function Zc(t,e){if(e!==null){let n=e.type;if(n&3)return Dt(e,t);if(n&4)return rf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Zc(t,r);{let i=t[e.index];return An(i)?rf(-1,i):rn(i)}}else{if(n&32)return qf(e,t)()||rn(t[e.index]);{let r=XE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=uo(t[nn]);return Zc(i,r)}else return Zc(t,e.next)}}}return null}function XE(t,e){if(e!==null){let r=t[nn][jt],i=e.projection;return r.projection[i]}return null}function rf(t,e){let n=It+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return Zc(r,i)}return e[Pr]}function kP(t,e,n){let r=zf(t,e);r&&RP(t,r,e,n)}function Gf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&kr(rn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Gf(t,e,n.child,r,i,s,!1),Ui(e,t,i,a,s);else if(c&32){let u=qf(n,r),l;for(;l=u();)Ui(e,t,i,l,s);Ui(e,t,i,a,s)}else c&16?OP(t,e,r,n,i,s):Ui(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Du(t,e,n,r,i,s){Gf(n,r,t.firstChild,e,i,s,!1)}function OP(t,e,n,r,i,s){let o=n[nn],c=o[jt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Ui(e,t,i,l,s)}else{let u=c,l=o[He];WE(r)&&(u.flags|=128),Gf(t,e,u,l,i,s,!0)}}function FP(t,e,n,r,i){let s=n[Pr],o=rn(n);s!==o&&Ui(e,t,r,s,i);for(let a=It;a<n.length;a++){let c=n[a];Du(c[G],c,t,e,r,s)}}function LP(t,e,n){t.setAttribute(e,"style",n)}function eT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function tT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&zh(t,e,r),i!==null&&eT(t,e,i),s!==null&&LP(t,e,s)}var Gc;function VP(){if(Gc===void 0&&(Gc=null,Sr.trustedTypes))try{Gc=Sr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Gc}function II(t){return VP()?.createScriptURL(t)||t}var lu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jI})`}};function bu(t){return t instanceof lu?t.changingThisBreaksApplicationSecurity:t}function Kf(t,e){let n=UP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${jI})`)}return n===e}function UP(t){return t instanceof lu&&t.getTypeName()||null}var jP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nT(t){return t=String(t),t.match(jP)?t:"unsafe:"+t}var Su=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Su||{});function BP(t){let e=iT();return e?e.sanitize(Su.URL,t)||"":Kf(t,"URL")?bu(t):nT(no(t))}function $P(t){let e=iT();if(e)return II(e.sanitize(Su.RESOURCE_URL,t)||"");if(Kf(t,"ResourceURL"))return II(bu(t));throw new A(904,!1)}function HP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?$P:BP}function rT(t,e,n){return HP(e,n)(t)}function iT(){let t=Pe();return t&&t[tn].sanitizer}var sf=class{};var qP="h",zP="b";var WP=()=>null;function Qf(t,e,n=!1){return WP(t,e,n)}var of=class{},du=class{};function GP(t){let e=Error(`No component factory found for ${st(t)}.`);return e[KP]=t,e}var KP="ngComponent";var af=class{resolveComponentFactory(e){throw GP(e)}},Au=(()=>{let e=class e{};e.NULL=new af;let t=e;return t})();function QP(){return Ru(bt(),Pe())}function Ru(t,e){return new Eo(Dt(t,e))}var Eo=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=QP;let t=e;return t})();var po=class{},Nu=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>YP();let t=e;return t})();function YP(){let t=Pe(),e=bt(),n=Xn(e.index,t);return(Ar(n)?n:t)[qe]}var ZP=(()=>{let e=class e{};e.\u0275prov=x({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Lh={};function sT(t){return XP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function JP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function XP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var cf=class{constructor(){}supports(e){return sT(e)}create(e){return new uf(e)}},eM=(t,e)=>e,uf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eM}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<EI(r,i,s)?n:r,a=EI(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!sT(e))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,JP(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new lf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new hu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},df=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},hu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new df,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function EI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function TI(){return new Yf([new cf])}var Yf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||TI()),deps:[[e,new LE,new Ce]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new A(901,!1)}};e.\u0275prov=x({token:e,providedIn:"root",factory:TI});let t=e;return t})();function fu(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(rn(s)),An(s)&&tM(s,r);let o=n.type;if(o&8)fu(t,e,n.child,r);else if(o&32){let a=qf(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=XE(e,n);if(Array.isArray(a))r.push(...a);else{let c=uo(e[nn]);fu(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function tM(t,e){for(let n=It;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&fu(r[G],r,i,e)}t[Pr]!==t[Sn]&&e.push(t[Pr])}var oT=[];function nM(t){return t[xr]??rM(t)}function rM(t){let e=oT.pop()??Object.create(sM);return e.lView=t,e}function iM(t){t.lView[xr]!==t&&(t.lView=null,oT.push(t))}var sM=ge(D({},Ew),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{co(t.lView)},consumerOnSignalRead(){this.lView[xr]=this}});function aT(t){return uT(t[oo])}function cT(t){return uT(t[Ut])}function uT(t){for(;t!==null&&!An(t);)t=t[Ut];return t}var oM="ngOriginalError";function Vh(t){return t[oM]}var bn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Vh(e);for(;n&&Vh(n);)n=Vh(n);return n||null}},lT=new F("",{providedIn:"root",factory:()=>E(bn).handleError.bind(void 0)});var dT=!1,aM=new F("",{providedIn:"root",factory:()=>dT});var xu={};function Pu(t=1){hT(er(),Pe(),xf()+t,!1)}function hT(t,e,n,r){if(!r)if((e[N]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Kc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Qc(e,s,0,n)}Mr(n)}function ht(t,e=j.Default){let n=Pe();if(n===null)return U(t,e);let r=bt();return PE(r,n,wt(t),e)}function cM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Mr(~i);else{let s=i,o=n[++r],a=n[++r];Mx(o,s);let c=e[s];a(2,c)}}}finally{Mr(-1)}}function Mu(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Sn]=i,d[N]=r|4|128|8|64,(u!==null||t&&t[N]&2048)&&(d[N]|=2048),lE(d),d[He]=d[_o]=t,d[Dn]=n,d[tn]=o||t&&t[tn],d[qe]=a||t&&t[qe],d[Bi]=c||t&&t[Bi]||null,d[jt]=s,d[Iu]=pP(),d[tu]=l,d[rE]=u,d[nn]=e.type==2?t[nn]:d,d}function ku(t,e,n,r,i){let s=t.data[e];if(s===null)s=uM(t,e,n,r,i),Px()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Sx();s.injectorIndex=o===null?-1:o.injectorIndex}return Io(s,!0),s}function uM(t,e,n,r,i){let s=fE(),o=pE(),a=o?s:s&&s.parent,c=t.data[e]=pM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function fT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function pT(t,e,n,r,i){let s=xf(),o=r&2;try{Mr(-1),o&&e.length>Yn&&hT(t,e,Yn,!1),Jt(o?2:0,i),n(r,i)}finally{Mr(s),Jt(o?3:1,i)}}function gT(t,e,n){if(sE(e)){let r=lt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{lt(r)}}}function mT(t,e,n){hE()&&(IM(t,e,n,Dt(n,e)),(n.flags&64)===64&&IT(t,e,n))}function yT(t,e,n=Dt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function _T(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Zf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Zf(t,e,n,r,i,s,o,a,c,u,l){let d=Yn+r,h=d+i,f=lM(d,h),g=typeof u=="function"?u():u;return f[G]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function lM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:xu);return n}function dM(t,e,n,r){let s=r.get(aM,dT)||n===en.ShadowDom,o=t.selectRootElement(e,s);return hM(o),o}function hM(t){fM(t)}var fM=()=>null;function pM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function CI(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let s=t[i];r===null?DI(n,e,i,s):r.hasOwnProperty(i)&&DI(n,e,r[i],s)}return n}function DI(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function gM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=CI(d.inputs,l,c,f),u=CI(d.outputs,l,u,g);let _=c!==null&&o!==null&&!YI(e)?PM(c,l,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function mM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yM(t,e,n,r,i,s,o,a){let c=Dt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Jf(t,n,l,r,i),Eu(e)&&_M(n,e.index)):e.type&3?(r=mM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function _M(t,e){let n=Xn(e,t);n[N]&16||(n[N]|=64)}function vT(t,e,n,r){if(hE()){let i=r===null?null:{"":-1},s=TM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&wT(t,e,n,o,i,a),i&&CM(n,r,i)}n.mergedAttrs=Df(n.mergedAttrs,n.attrs)}function wT(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Wx(AE(n,e),t,r[u].type);bM(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=fT(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Df(n.mergedAttrs,l.hostAttrs),SM(t,n,e,c,l),DM(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}gM(t,n,s)}function vM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;wM(o)!=a&&o.push(a),o.push(n,r,s)}}function wM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Eu(n)&&AM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||AE(n,e),kr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ho(e,t,a,n);if(kr(u,e),o!==null&&xM(e,a-i,u,c,n,o),vo(c)){let l=Xn(n.index,e);l[Dn]=ho(e,t,a,n)}}}function IT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=kx();try{Mr(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Kh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&EM(c,u)}}finally{Mr(-1),Kh(o)}}function EM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function TM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(ex(e,o.selectors,!1))if(r||(r=[]),vo(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;hf(t,e,c)}else r.unshift(o),hf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function CM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new A(-301,!1);r.push(e[i],s)}}}function DM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vo(e)&&(n[""]=t)}}function bM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function SM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=$i(i.type,!0)),o=new lo(s,vo(i),ht);t.blueprint[r]=o,n[r]=o,vM(t,e,r,fT(t,n,i.hostVars,xu),i)}function AM(t,e,n){let r=Dt(e,t),i=_T(n),s=t[tn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Ou(t,Mu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function RM(t,e,n,r,i,s){let o=Dt(t,e);NM(e[qe],o,s,t.value,n,r,i)}function NM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?no(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function xM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++];ET(r,n,c,u,l)}}function ET(t,e,n,r,i){let s=lt(null);try{let o=t.inputTransforms;o!==null&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{lt(s)}}function PM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}return r}function TT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function CT(t,e){let n=t.contentQueries;if(n!==null){let r=lt(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];mE(s),a.contentQueries(2,e[o],o)}}}finally{lt(r)}}}function Ou(t,e){return t[oo]?t[dI][Ut]=e:t[oo]=e,t[dI]=e,e}function ff(t,e,n){mE(0);let r=lt(null);try{e(t,n)}finally{lt(r)}}function MM(t){return t[so]||(t[so]=[])}function kM(t){return t.cleanup||(t.cleanup=[])}function DT(t,e){let n=t[Bi],r=n?n.get(bn,null):null;r&&r.handleError(e)}function Jf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=e[o],u=t.data[o];ET(u,c,r,a,i)}}function OM(t,e,n){let r=yx(e,t);vP(t[qe],r,n)}var FM=100;function LM(t,e=!0){let n=t[tn],r=n.rendererFactory,i=!1;i||r.begin?.();try{VM(t)}catch(s){throw e&&DT(t,s),s}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function VM(t){pf(t,0);let e=0;for(;dE(t);){if(e===FM)throw new A(103,!1);e++,pf(t,1)}}function UM(t,e,n,r){let i=e[N];if((i&256)===256)return;let s=!1;!s&&e[tn].inlineEffectRunner?.flush(),Rf(e);let o=null,a=null;!s&&jM(t)&&(a=nM(e),o=Tw(a));try{lE(e),Nx(t.bindingStartIndex),n!==null&&pT(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Kc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Qc(e,d,0,null),Mh(e,0)}if(BM(e),bT(e,0),t.contentQueries!==null&&CT(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Kc(e,d)}else{let d=t.contentHooks;d!==null&&Qc(e,d,1),Mh(e,1)}cM(t,e);let u=t.components;u!==null&&AT(e,u,0);let l=t.viewQuery;if(l!==null&&ff(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Kc(e,d)}else{let d=t.viewHooks;d!==null&&Qc(e,d,2),Mh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ph]){for(let d of e[Ph])d();e[Ph]=null}s||(e[N]&=-73)}catch(c){throw co(e),c}finally{a!==null&&(Cw(a,o),iM(a)),Nf()}}function jM(t){return t.type!==2}function bT(t,e){for(let n=aT(t);n!==null;n=cT(n))for(let r=It;r<n.length;r++){let i=n[r];ST(i,e)}}function BM(t){for(let e=aT(t);e!==null;e=cT(e)){if(!(e[N]&bf.HasTransplantedViews))continue;let n=e[ru];for(let r=0;r<n.length;r++){let i=n[r],s=i[He];vx(i)}}}function $M(t,e,n){let r=Xn(e,t);ST(r,n)}function ST(t,e){Af(t)&&pf(t,e)}function pf(t,e){let r=t[G],i=t[N],s=t[xr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&uh(s)),s&&(s.dirty=!1),t[N]&=-9217,o)UM(r,t,r.template,t[Dn]);else if(i&8192){bT(t,1);let a=r.components;a!==null&&AT(t,a,1)}}function AT(t,e,n){for(let r=0;r<e.length;r++)$M(t,e[r],n)}function Xf(t){for(t[tn].changeDetectionScheduler?.notify();t;){t[N]|=64;let e=uo(t);if(ux(t)&&!e)return t;t=e}return null}var Or=class{get rootNodes(){let e=this._lView,n=e[G];return fu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return(this._lView[N]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[He];if(An(e)){let n=e[nu],r=n?n.indexOf(this):-1;r>-1&&(nf(e,r),au(n,r))}this._attachedToViewContainer=!1}ZE(this._lView[G],this._lView)}onDestroy(e){wx(this._lView,e)}markForCheck(){Xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[N]&=-129}reattach(){Gh(this._lView),this._lView[N]|=128}detectChanges(){this._lView[N]|=1024,LM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,QE(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e,Gh(this._lView)}},Fu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HM;let t=e;return t})();function HM(t){return qM(bt(),Pe(),(t&16)===16)}function qM(t,e,n){if(Eu(t)&&!n){let r=Xn(t.index,e);return new Or(r,r)}else if(t.type&47){let r=e[nn];return new Or(r,e)}return null}var bI=new Set;function RT(t){bI.has(t)||(bI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var gf=class extends rt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Uh(s),i&&(i=Uh(i)),o&&(o=Uh(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ve&&e.add(a),a}};function Uh(t){return e=>{setTimeout(t,void 0,e)}}var Vt=gf;function SI(...t){}function zM(){let t=typeof Sr.requestAnimationFrame=="function",e=Sr[t?"requestAnimationFrame":"setTimeout"],n=Sr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vt(!1),this.onMicrotaskEmpty=new Vt(!1),this.onStable=new Vt(!1),this.onError=new Vt(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=zM().nativeRequestAnimationFrame,KM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new A(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,WM,SI,SI);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},WM={};function ep(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function GM(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Sr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mf(t),t.isCheckStableRunning=!0,ep(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mf(t))}function KM(t){let e=()=>{GM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(QM(a))return n.invokeTask(i,s,o,a);try{return AI(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),RI(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return AI(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),RI(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,mf(t),ep(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function mf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function AI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function RI(t){t._nesting--,ep(t)}function QM(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var NT=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of r)s();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=x({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function YM(t,e){let n=Xn(e,t),r=n[G];ZM(r,n);let i=n[Sn];i!==null&&n[tu]===null&&(n[tu]=Qf(i,n[Bi])),tp(r,n,n[Dn])}function ZM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function tp(t,e,n){Rf(e);try{let r=t.viewQuery;r!==null&&ff(1,r,n);let i=t.template;i!==null&&pT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&CT(t,e),t.staticViewQueries&&ff(2,t.viewQuery,n);let s=t.components;s!==null&&JM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[N]&=-5,Nf()}}function JM(t,e){for(let n=0;n<e.length;n++)YM(t,e[n])}function yf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=tI(i,a);else if(s==2){let c=a,u=e[++o];r=tI(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var pu=class extends Au{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Nr(e);return new go(n,this.ngModule)}};function NI(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function XM(t){let e=t.toLowerCase();return e==="svg"?fx:e==="math"?px:null}var _f=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=vu(r);let i=this.injector.get(e,Lh,r);return i!==Lh||n===Lh?i:this.parentInjector.get(e,n,r)}},go=class extends du{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=NI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return NI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ix(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof Et?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new _f(e,s):e,a=o.get(po,null);if(a===null)throw new A(407,!1);let c=o.get(ZP,null),u=o.get(NT,null),l=o.get(sf,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?dM(h,r,this.componentDef.encapsulation,o):KE(h,f,XM(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let I=null;g!==null&&(I=Qf(g,o,!0));let b=Zf(0,null,null,1,0,null,null,null,null,null,null),$=Mu(null,b,null,_,null,null,d,h,o,null,I);Rf($);let te,ne;try{let _e=this.componentDef,ae,ut=null;_e.findHostDirectiveDefs?(ae=[],ut=new Map,_e.findHostDirectiveDefs(_e,ae,ut),ae.push(_e)):ae=[_e];let $n=ek($,g),Er=tk($n,g,_e,ae,$,d,h);ne=uE(b,Yn),g&&ik(h,_e,g,r),n!==void 0&&sk(ne,this.ngContentSelectors,n),te=rk(Er,_e,ae,ut,$,[ok]),tp(b,$,null)}finally{Nf()}return new vf(this.componentType,te,Ru(ne,$),$,ne)}},vf=class extends of{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Or(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Jf(s[G],s,i,e,n),this.previousInputValues.set(e,n);let o=Xn(this._tNode.index,s);Xf(o)}}get injector(){return new Rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ek(t,e){let n=t[G],r=Yn;return t[r]=e,ku(n,r,2,"#host",null)}function tk(t,e,n,r,i,s,o){let a=i[G];nk(r,t,e,o);let c=null;e!==null&&(c=Qf(e,i[Bi]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Mu(i,_T(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&hf(a,t,r.length-1),Ou(i,d),i[t.index]=d}function nk(t,e,n,r){for(let i of t)e.mergedAttrs=Df(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(yf(e,e.mergedAttrs,!0),n!==null&&tT(r,n,e))}function rk(t,e,n,r,i,s){let o=bt(),a=i[G],c=Dt(o,i);wT(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ho(i,a,d,o);kr(h,i)}IT(a,i,o),c&&kr(c,i);let u=ho(i,a,o.directiveStart+o.componentOffset,o);if(t[Dn]=i[Dn]=u,s!==null)for(let l of s)l(u,e);return gT(a,o,t),u}function ik(t,e,n,r){if(r)zh(t,n,["ng-version","17.0.9"]);else{let{attrs:i,classes:s}=sx(e.selectors[0]);i&&zh(t,n,i),s&&s.length>0&&eT(t,n,s.join(" "))}}function sk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ok(){let t=bt();kf(Pe()[G],t)}function np(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function gu(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ak(t,e,n,r){let i=gu(t,e,n);return gu(t,e+1,r)||i}function rp(t,e,n,r){let i=Pe(),s=gE();if(gu(i,s,e)){let o=er(),a=EE();RM(a,i,t,e,n,r)}return rp}function ck(t,e,n,r,i,s){let o=Rx(),a=ak(t,o,n,i);return xx(2),a?e+no(n)+r+no(i)+s:xu}function To(t,e,n){let r=Pe(),i=gE();if(gu(r,i,e)){let s=er(),o=EE();yM(s,o,r,t,e,r[qe],n,!1)}return To}function xI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Jf(t,n,s[o],o,r)}var D3=new RegExp(`^(\\d+)*(${zP}|${qP})*(.*)`);var uk=()=>null;function PI(t,e){return uk(t,e)}function lk(t,e,n,r){let i=e.tView,o=t[N]&4096?4096:16,a=Mu(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[wu]=c;let u=t[ao];return u!==null&&(a[ao]=u.createEmbeddedView(i)),tp(i,a,n),a}function MI(t,e){return!e||e.firstChild===null||WE(t)}function dk(t,e,n,r=!0){let i=e[G];if(TP(i,e,t,n),r){let o=rf(n,t),a=e[qe],c=zf(a,t[Pr]);c!==null&&IP(i,t[jt],a,e,c,o)}let s=e[tu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hk;let t=e;return t})();function hk(){let t=bt();return pk(t,Pe())}var fk=Wi,xT=class extends fk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ru(this._hostTNode,this._hostLView)}get injector(){return new Rr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Of(this._hostTNode,this._hostLView);if(DE(e)){let n=ou(e,this._hostLView),r=su(e),i=n[G].data[r+8];return new Rr(i,n)}else return new Rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=kI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=PI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,MI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!eP(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new go(Nr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?u:this.parentInjector).get(Et,null);_&&(s=_)}let l=Nr(c.componentType??{}),d=PI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,MI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(_x(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[He],u=new xT(c,c[jt],c[He]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return dk(o,i,s,r),e.attachToViewContainerRef(),FE(jh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=kI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=nf(this._lContainer,n);r&&(au(jh(this._lContainer),n),ZE(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=nf(this._lContainer,n);return r&&au(jh(this._lContainer),n)!=null?new Or(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kI(t){return t[nu]}function jh(t){return t[nu]||(t[nu]=[])}function pk(t,e){let n,r=e[t.index];return An(r)?n=r:(n=TT(r,e,null,t),e[t.index]=n,Ou(e,n)),mk(n,e,t,r),new xT(n,t,e)}function gk(t,e){let n=t[qe],r=n.createComment(""),i=Dt(e,t),s=zf(n,i);return uu(n,s,r,NP(n,i),!1),r}var mk=vk,yk=()=>!1;function _k(t,e,n){return yk(t,e,n)}function vk(t,e,n,r){if(t[Pr])return;let i;n.type&8?i=rn(r):i=gk(e,n),t[Pr]=i}function wk(t,e,n,r,i,s,o,a,c){let u=e.consts,l=ku(e,t,4,o||null,iu(u,a));vT(e,n,l,iu(u,c)),kf(e,l);let d=l.tView=Zf(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Co(t,e,n,r,i,s,o,a){let c=Pe(),u=er(),l=t+Yn,d=u.firstCreatePass?wk(l,u,c,e,n,r,i,s,o):u.data[l];Io(d,!1);let h=Ik(u,c,d,t);Pf()&&Wf(u,c,h,d),kr(h,c);let f=TT(h,c,h,d);return c[l]=f,Ou(c,f),_k(f,d,c),Sf(d)&&mT(u,c,d),o!=null&&yT(c,d,a),Co}var Ik=Ek;function Ek(t,e,n,r){return Mf(!0),e[qe].createComment("")}function Tk(t,e,n,r,i,s){let o=e.consts,a=iu(o,i),c=ku(e,t,2,r,a);return vT(e,n,c,iu(o,s)),c.attrs!==null&&yf(c,c.attrs,!1),c.mergedAttrs!==null&&yf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function we(t,e,n,r){let i=Pe(),s=er(),o=Yn+t,a=i[qe],c=s.firstCreatePass?Tk(o,s,i,e,n,r):s.data[o],u=Ck(s,i,c,a,e,t);i[o]=u;let l=Sf(c);return Io(c,!0),tT(a,u,c),(c.flags&32)!==32&&Pf()&&Wf(s,i,u,c),Ix()===0&&kr(u,i),Ex(),l&&(mT(s,i,c),gT(s,c,i)),r!==null&&yT(i,c),we}function De(){let t=bt();pE()?Ax():(t=t.parent,Io(t,!1));let e=t;Dx(e)&&bx(),Tx();let n=er();return n.firstCreatePass&&(kf(n,t),sE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&jx(e)&&xI(n,e,Pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Bx(e)&&xI(n,e,Pe(),e.stylesWithoutHost,!1),De}function nr(t,e,n,r){return we(t,e,n,r),De(),nr}var Ck=(t,e,n,r,i,s)=>(Mf(!0),KE(r,i,Fx()));var mu="en-US";var Dk=mu;function bk(t){FN(t,"Expected localeId to be defined"),typeof t=="string"&&(Dk=t.toLowerCase().replace(/_/g,"-"))}function Do(t){return!!t&&typeof t.then=="function"}function PT(t){return!!t&&typeof t.subscribe=="function"}function ip(t,e,n,r){let i=Pe(),s=er(),o=bt();return Ak(s,i,i[qe],o,t,e,r),ip}function Sk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[so],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Ak(t,e,n,r,i,s,o){let a=Sf(r),u=t.firstCreatePass&&kM(t),l=e[Dn],d=MM(e),h=!0;if(r.type&3||o){let _=Dt(r,e),I=o?o(_):_,b=d.length,$=o?ne=>o(rn(ne[r.index])):r.index,te=null;if(!o&&a&&(te=Sk(t,e,i,r.index)),te!==null){let ne=te.__ngLastListenerFn__||te;ne.__ngNextListenerFn__=s,te.__ngLastListenerFn__=s,h=!1}else{s=FI(r,e,l,s,!1);let ne=n.listen(I,i,s);d.push(s,ne),u&&u.push(i,$,b,b+1)}}else s=FI(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let _=g.length;if(_)for(let I=0;I<_;I+=2){let b=g[I],$=g[I+1],_e=e[b][$].subscribe(s),ae=d.length;d.push(s,_e),u&&u.push(i,r.index,ae,-(ae+1))}}}function OI(t,e,n,r){try{return Jt(6,e,n),n(r)!==!1}catch(i){return DT(t,i),!1}finally{Jt(7,e,n)}}function FI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Xn(t.index,e):e;Xf(a);let c=OI(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=OI(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function ze(t,e=""){let n=Pe(),r=er(),i=t+Yn,s=r.firstCreatePass?ku(r,i,1,e,null):r.data[i],o=Rk(r,n,s,e,t);n[i]=o,Pf()&&Wf(r,n,o,s),Io(s,!1)}var Rk=(t,e,n,r,i)=>(Mf(!0),_P(e[qe],r));function sp(t,e,n,r,i){let s=Pe(),o=ck(s,t,e,n,r,i);return o!==xu&&OM(s,xf(),o),sp}var Zn=class{},mo=class{};var wf=class extends Zn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pu(this);let i=eE(e);this._bootstrapComponents=zE(i.bootstrap),this._r3Injector=HE(e,n,[{provide:Zn,useValue:this},{provide:Au,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},If=class extends mo{constructor(e){super(),this.moduleType=e}create(e){return new wf(this.moduleType,e,[])}};var yu=class extends Zn{constructor(e){super(),this.componentFactoryResolver=new pu(this),this.instance=null;let n=new fo([...e.providers,{provide:Zn,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],e.parent||jf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function op(t,e,n=null){return new yu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Nk=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=jE(!1,r.type),s=i.length>0?op([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=x({token:e,providedIn:"environment",factory:()=>new e(U(Et))});let t=e;return t})();function on(t){RT("NgStandalone"),t.getStandaloneInjector=e=>e.get(Nk).getOrCreateStandaloneInjector(t)}var Lu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Mk;let t=e;return t})(),xk=Lu,Pk=class extends xk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=lk(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Or(i)}};function Mk(){return kk(bt(),Pe())}function kk(t,e){return t.type&4?new Pk(e,t,Ru(t,e)):null}var Jn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},MT=new Jn("17.0.9");var Vu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ef=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ap=(()=>{let e=class e{compileModuleSync(r){return new If(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=eE(r),o=zE(s.declarations).reduce((a,c)=>{let u=Nr(c);return u&&a.push(new go(u)),a},[]);return new Ef(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Uu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kT=new F("");var OT=new F("Application Initializer"),FT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(OT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Do(o))r.push(o);else if(PT(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cp=new F("appBootstrapListener");function Ok(){bw(()=>{throw new A(600,!1)})}function Fk(t){return t.isBoundToModule}function Lk(t,e,n){try{let r=n();return Do(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var bo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(lT),this.afterRenderEffectManager=E(NT),this.componentTypes=[],this.components=[],this.isStable=E(Uu).hasPendingTasks.pipe(W(r=>!r)),this._injector=E(Et)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof du;if(!this._injector.get(FT).done){let f=!s&&XI(r),g=!1;throw new A(405,g)}let a;s?a=r:a=this._injector.get(Au).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Fk(a)?void 0:this._injector.get(Zn),u=i||a.selector,l=a.create(ot.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(kT,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Bh(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new A(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Bh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(cp,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Bh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new A(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Vk=(()=>{let e=class e{constructor(){this.zone=E(re),this.applicationRef=E(bo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uk(t){return[{provide:re,useFactory:t},{provide:Hi,multi:!0,useFactory:()=>{let e=E(Vk,{optional:!0});return()=>e.initialize()}},{provide:Hi,multi:!0,useFactory:()=>{let e=E(Hk);return()=>{e.initialize()}}},{provide:lT,useFactory:jk}]}function jk(){let t=E(re),e=E(bn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Bk(t){let e=Uk(()=>new re($k(t)));return Tu([[],e])}function $k(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Hk=(()=>{let e=class e{constructor(){this.subscription=new ve,this.initialized=!1,this.zone=E(re),this.pendingTasks=E(Uu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qk(){return typeof $localize<"u"&&$localize.locale||mu}var up=new F("LocaleId",{providedIn:"root",factory:()=>E(up,j.Optional|j.SkipSelf)||qk()});var LT=new F("PlatformDestroyListeners");var Jc=null;function zk(t=[],e){return ot.create({name:e,providers:[{provide:Cu,useValue:"platform"},{provide:LT,useValue:new Set([()=>Jc=null])},...t]})}function Wk(t=[]){if(Jc)return Jc;let e=zk(t);return Jc=e,Ok(),Gk(e),e}function Gk(t){t.get($f,null)?.forEach(n=>n())}function VT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Wk(r),s=[Bk(),...n||[]],a=new yu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(re);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(bn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(LT);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),Lk(u,c,()=>{let f=a.get(FT);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(up,mu);bk(g||mu);let _=a.get(bo);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function So(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var lp=null;function Gi(){return lp}function HT(t){lp||(lp=t)}var ju=class{},ft=new F("DocumentToken"),qT=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(Kk))(),providedIn:"platform"});let t=e;return t})();var Kk=(()=>{let e=class e extends qT{constructor(){super(),this._doc=E(ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gi().getBaseHref(this._doc)}onPopState(r){let i=Gi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Gi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function zT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function UT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Vr(t){return t&&t[0]!=="?"?"?"+t:t}var Ki=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(WT))(),providedIn:"root"});let t=e;return t})(),Qk=new F("appBaseHref"),WT=(()=>{let e=class e extends Ki{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return zT(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Vr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Vr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Vr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(qT),U(Qk,8))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ao=(()=>{let e=class e{constructor(r){this._subject=new Vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Jk(UT(jT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Vr(i))}normalize(r){return e.stripTrailingSlash(Zk(this._basePath,jT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Vr,e.joinWithSlash=zT,e.stripTrailingSlash=UT,e.\u0275fac=function(i){return new(i||e)(U(Ki))},e.\u0275prov=x({token:e,factory:()=>Yk(),providedIn:"root"});let t=e;return t})();function Yk(){return new Ao(U(Ki))}function Zk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jT(t){return t.replace(/\/index.html$/,"")}function Jk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function GT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var dp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},KT=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new dp(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),BT(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);BT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ht(Wi),ht(Lu),ht(Yf))},e.\u0275dir=qi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function BT(t,e){t.context.$implicit=e.item}var QT=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new hp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){$T("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){$T("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ht(Wi),ht(Lu))},e.\u0275dir=qi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),hp=class{constructor(){this.$implicit=null,this.ngIf=null}};function $T(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${st(e)}'.`)}var fp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ct({type:e}),e.\u0275inj=Tt({});let t=e;return t})(),YT="browser",Xk="server";function pp(t){return t===Xk}var Bu=class{};var yp=class extends ju{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_p=class t extends yp{static makeCurrent(){HT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=tO();return n==null?null:nO(n)}resetBaseElement(){Ro=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GT(document.cookie,e)}},Ro=null;function tO(){return Ro=Ro||document.querySelector("base"),Ro?Ro.getAttribute("href"):null}function nO(t){return new URL(t,document.baseURI).pathname}var rO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),vp=new F("EventManagerPlugins"),eC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new A(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(vp),U(re))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),$u=class{constructor(e){this._doc=e}},gp="ng-app-id",tC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=pp(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${gp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(gp),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(gp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(ft),U(Bf),U(Hf,8),U(tr))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),mp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ip=/%COMP%/g,nC="%COMP%",iO=`_nghost-${nC}`,sO=`_ngcontent-${nC}`,oO=!0,aO=new F("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>oO});function cO(t){return sO.replace(Ip,t)}function uO(t){return iO.replace(Ip,t)}function rC(t,e){return e.map(n=>n.replace(Ip,t))}var ZT=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=pp(c),this.defaultRenderer=new No(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===en.ShadowDom&&(i=ge(D({},i),{encapsulation:en.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Hu?s.applyToHost(r):s instanceof xo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case en.Emulated:o=new Hu(u,l,i,this.appId,d,a,c,h);break;case en.ShadowDom:return new wp(u,l,r,i,a,c,this.nonce,h);default:o=new xo(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(eC),U(tC),U(Bf),U(aO),U(ft),U(tr),U(re),U(Hf))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),No=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(mp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(JT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(JT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=mp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=mp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Lr.DashCase|Lr.Important)?e.style.setProperty(n,r,i&Lr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Lr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Gi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function JT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wp=class extends No{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=rC(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xo=class extends No{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?rC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hu=class extends xo{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=cO(u),this.hostAttr=uO(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},lO=(()=>{let e=class e extends $u{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(U(ft))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),XT=["alt","control","meta","shift"],dO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},fO=(()=>{let e=class e extends $u{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),XT.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=dO[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),XT.forEach(a=>{if(a!==s){let c=hO[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(ft))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})();function iC(t,e){return VT(D({rootComponent:t},pO(e)))}function pO(t){return{appProviders:[...vO,...t?.providers??[]],platformProviders:_O}}function gO(){_p.makeCurrent()}function mO(){return new bn}function yO(){return qE(document),document}var _O=[{provide:tr,useValue:YT},{provide:$f,useValue:gO,multi:!0},{provide:ft,useFactory:yO,deps:[]}];var vO=[{provide:Cu,useValue:"root"},{provide:bn,useFactory:mO,deps:[]},{provide:vp,useClass:lO,multi:!0,deps:[ft,re,tr]},{provide:vp,useClass:fO,multi:!0,deps:[ft]},ZT,tC,eC,{provide:po,useExisting:ZT},{provide:Bu,useClass:rO,deps:[]},[]];function wO(){return new Ep(U(ft))}var Ep=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(ft))},e.\u0275prov=x({token:e,factory:function(i){let s=null;return i?s=new i:s=wO(),s},providedIn:"root"});let t=e;return t})();var L="primary",Wo=Symbol("RouteTitle"),Sp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xi(t){return new Sp(t)}function EO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function TO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!an(t[n],e[n]))return!1;return!0}function an(t,e){let n=t?Ap(t):void 0,r=e?Ap(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!lC(t[i],e[i]))return!1;return!0}function Ap(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function lC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function or(t){return Dh(t)?t:Do(t)?Ne(Promise.resolve(t)):O(t)}var CO={exact:hC,subset:fC},dC={exact:DO,subset:bO,ignored:()=>!0};function sC(t,e,n){return CO[n.paths](t.root,e.root,n.matrixParams)&&dC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function DO(t,e){return an(t,e)}function hC(t,e,n){if(!jr(t.segments,e.segments)||!Wu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!hC(t.children[r],e.children[r],n))return!1;return!0}function bO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lC(t[n],e[n]))}function fC(t,e,n){return pC(t,e,e.segments,n)}function pC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!jr(i,n)||e.hasChildren()||!Wu(i,n,r))}else if(t.segments.length===n.length){if(!jr(t.segments,n)||!Wu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!fC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!jr(t.segments,i)||!Wu(t.segments,i,r)||!t.children[L]?!1:pC(t.children[L],e,s,r)}}function Wu(t,e,n){return e.every((r,i)=>dC[n](t[i].parameters,r.parameters))}var rr=class{constructor(e=new ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xi(this.queryParams)),this._queryParamMap}toString(){return RO.serialize(this)}},ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}},Ur=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Xi(this.parameters)),this._parameterMap}toString(){return mC(this)}};function SO(t,e){return jr(t,e)&&t.every((n,r)=>an(n.parameters,e[r].parameters))}function jr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function AO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===L&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==L&&(n=n.concat(e(i,r)))}),n}var Xp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>new Qu)(),providedIn:"root"});let t=e;return t})(),Qu=class{parse(e){let n=new Np(e);return new rr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Po(e.root,!0)}`,r=PO(e.queryParams),i=typeof e.fragment=="string"?`#${NO(e.fragment)}`:"";return`${n}${r}${i}`}},RO=new Qu;function Gu(t){return t.segments.map(e=>mC(e)).join("/")}function Po(t,e){if(!t.hasChildren())return Gu(t);if(e){let n=t.children[L]?Po(t.children[L],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==L&&r.push(`${i}:${Po(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=AO(t,(r,i)=>i===L?[Po(t.children[L],!1)]:[`${i}:${Po(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[L]!=null?`${Gu(t)}/${n[0]}`:`${Gu(t)}/(${n.join("//")})`}}function gC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(t){return gC(t).replace(/%3B/gi,";")}function NO(t){return encodeURI(t)}function Rp(t){return gC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ku(t){return decodeURIComponent(t)}function oC(t){return Ku(t.replace(/\+/g,"%20"))}function mC(t){return`${Rp(t.path)}${xO(t.parameters)}`}function xO(t){return Object.entries(t).map(([e,n])=>`;${Rp(e)}=${Rp(n)}`).join("")}function PO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qu(n)}=${qu(i)}`).join("&"):`${qu(n)}=${qu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var MO=/^[^\/()?;#]+/;function Tp(t){let e=t.match(MO);return e?e[0]:""}var kO=/^[^\/()?;=#]+/;function OO(t){let e=t.match(kO);return e?e[0]:""}var FO=/^[^=?&#]+/;function LO(t){let e=t.match(FO);return e?e[0]:""}var VO=/^[^&#]+/;function UO(t){let e=t.match(VO);return e?e[0]:""}var Np=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[L]=new ie(e,n)),r}parseSegment(){let e=Tp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new Ur(Ku(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=OO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tp(this.remaining);i&&(r=i,this.capture(r))}e[Ku(n)]=Ku(r)}parseQueryParam(e){let n=LO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=UO(this.remaining);o&&(r=o,this.capture(r))}let i=oC(n),s=oC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=L);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[L]:new ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}};function yC(t){return t.segments.length>0?new ie([],{[L]:t}):t}function _C(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=_C(i);if(r===L&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ie(t.segments,e);return jO(n)}function jO(t){if(t.numberOfChildren===1&&t.children[L]){let e=t.children[L];return new ie(t.segments.concat(e.segments),e.children)}return t}function es(t){return t instanceof rr}function BO(t,e,n=null,r=null){let i=vC(t);return wC(i,e,n,r)}function vC(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=yC(r);return e??i}function wC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Cp(i,i,i,n,r);let s=$O(e);if(s.toRoot())return Cp(i,i,new ie([],{}),n,r);let o=HO(s,i,t),a=o.processChildren?Oo(o.segmentGroup,o.index,s.commands):EC(o.segmentGroup,o.index,s.commands);return Cp(i,o.segmentGroup,a,n,r)}function Yu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Vo(t){return typeof t=="object"&&t!=null&&t.outlets}function Cp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=IC(t,e,n);let a=yC(_C(o));return new rr(a,s,i)}function IC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=IC(s,e,n)}),new ie(t.segments,r)}var Zu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Yu(r[0]))throw new A(4003,!1);let i=r.find(Vo);if(i&&i!==r.at(-1))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $O(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Zu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Zu(n,e,r)}var Zi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function HO(t,e,n){if(t.isAbsolute)return new Zi(e,!0,0);if(!n)return new Zi(e,!1,NaN);if(n.parent===null)return new Zi(n,!0,0);let r=Yu(t.commands[0])?0:1,i=n.segments.length-1+r;return qO(n,i,t.numberOfDoubleDots)}function qO(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Zi(r,!1,i-s)}function zO(t){return Vo(t[0])?t[0].outlets:{[L]:t}}function EC(t,e,n){if(t||(t=new ie([],{})),t.segments.length===0&&t.hasChildren())return Oo(t,e,n);let r=WO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ie(t.segments.slice(0,r.pathIndex),{});return s.children[L]=new ie(t.segments.slice(r.pathIndex),t.children),Oo(s,0,i)}else return r.match&&i.length===0?new ie(t.segments,{}):r.match&&!t.hasChildren()?xp(t,e,n):r.match?Oo(t,0,i):xp(t,e,n)}function Oo(t,e,n){if(n.length===0)return new ie(t.segments,{});{let r=zO(n),i={};if(Object.keys(r).some(s=>s!==L)&&t.children[L]&&t.numberOfChildren===1&&t.children[L].segments.length===0){let s=Oo(t.children[L],e,n);return new ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=EC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ie(t.segments,i)}}function WO(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Vo(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!cC(c,u,o))return s;r+=2}else{if(!cC(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Vo(s)){let c=GO(s.outlets);return new ie(r,c)}if(i===0&&Yu(n[0])){let c=t.segments[e];r.push(new Ur(c.path,aC(n[0]))),i++;continue}let o=Vo(s)?s.outlets[L]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Yu(a)?(r.push(new Ur(o,aC(a))),i+=2):(r.push(new Ur(o,{})),i++)}return new ie(r,{})}function GO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=xp(new ie([],{}),0,r))}),e}function aC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function cC(t,e,n){return t==n.path&&an(e,n.parameters)}var Fo="imperative",At=class{constructor(e,n){this.id=e,this.url=n}},Uo=class extends At{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ir=class extends At{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sr=class extends At{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends At{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},jo=class extends At{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ju=class extends At{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pp=class extends At{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mp=class extends At{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kp=class extends At{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Op=class extends At{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fp=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lp=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vp=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Up=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jp=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bp=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Bo=class{},$o=class{constructor(e){this.url=e}};var $p=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new il,this.attachRef=null}},il=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new $p,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qp(e,this._root).map(n=>n.value)}};function Hp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hp(t,n);if(r)return r}return null}function qp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qp(t,n);if(r.length)return r.unshift(e),r}return[]}var pt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var el=class extends Xu{constructor(e,n){super(e),this.snapshot=n,tg(this,e)}toString(){return this.snapshot.toString()}};function TC(t){let e=KO(t),n=new je([new Ur("",{})]),r=new je({}),i=new je({}),s=new je({}),o=new je(""),a=new $r(n,r,s,o,i,L,t,e.root);return a.snapshot=e.root,new el(new pt(a,[]),e)}function KO(t){let e={},n={},r={},i="",s=new Ho([],e,r,i,n,L,t,null,{});return new tl("",new pt(s,[]))}var $r=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(u=>u[Wo]))??O(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(W(e=>Xi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(W(e=>Xi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function eg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),i?.data),t._resolvedData)}:r={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},i&&DC(i)&&(r.resolve[Wo]=i.title),r}var Ho=class{get title(){return this.data?.[Wo]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xi(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},tl=class extends Xu{constructor(e,n){super(n),this.url=e,tg(this,n)}toString(){return CC(this._root)}};function tg(t,e){e.value._routerState=t,e.children.forEach(n=>tg(t,n))}function CC(t){let e=t.children.length>0?` { ${t.children.map(CC).join(", ")} } `:"";return`${t.value}${e}`}function Dp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,an(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),an(e.params,n.params)||t.paramsSubject.next(n.params),TO(e.url,n.url)||t.urlSubject.next(n.url),an(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zp(t,e){let n=an(t.params,e.params)&&SO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||zp(t.parent,e.parent))}function DC(t){return typeof t.title=="string"||t.title===null}var ng=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=L,this.activateEvents=new Vt,this.deactivateEvents=new Vt,this.attachEvents=new Vt,this.detachEvents=new Vt,this.parentContexts=E(il),this.location=E(Wi),this.changeDetector=E(Fu),this.environmentInjector=E(Et),this.inputBinder=E(rg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Wp(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wo]});let t=e;return t})(),Wp=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===$r?this.route:e===il?this.childContexts:this.parent.get(e,n)}},rg=new F("");function QO(t,e,n){let r=qo(t,e._root,n?n._root:void 0);return new el(r,e)}function qo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=YO(t,e,n);return new pt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qo(t,a)),o}}let r=ZO(e.value),i=e.children.map(s=>qo(t,s));return new pt(r,i)}}function YO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qo(t,r,i);return qo(t,r)})}function ZO(t){return new $r(new je(t.url),new je(t.params),new je(t.queryParams),new je(t.fragment),new je(t.data),t.outlet,t.component,t)}var bC="ngNavigationCancelingError";function SC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=es(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AC(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function AC(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[bC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function JO(t){return RC(t)&&es(t.url)}function RC(t){return t&&t[bC]}var XO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=sn({type:e,selectors:[["ng-component"]],standalone:!0,features:[on],decls:1,vars:0,template:function(i,s){i&1&&nr(0,"router-outlet")},dependencies:[ng],encapsulation:2});let t=e;return t})();function e1(t,e){return t.providers&&!t._injector&&(t._injector=op(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ig(t){let e=t.children&&t.children.map(ig),n=e?ge(D({},t),{children:e}):D({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=XO),n}function cn(t){return t.outlet||L}function t1(t,e){let n=t.filter(r=>cn(r)===e);return n.push(...t.filter(r=>cn(r)!==e)),n}function Go(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var n1=(t,e,n,r)=>W(i=>(new Gp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Gp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Dp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Yi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Yi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Yi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Yi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Bp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Up(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Dp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Dp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Go(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},nl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ji=class{constructor(e,n){this.component=e,this.route=n}};function r1(t,e,n){let r=t._root,i=e?e._root:null;return Mo(r,i,n,[r.value])}function i1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ns(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!BI(t)?t:e.get(t):r}function Mo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Yi(e);return t.children.forEach(o=>{s1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lo(a,n.getContext(o),i)),i}function s1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=o1(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new nl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Mo(t,e,a?a.children:null,r,i):Mo(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ji(a.outlet.component,o))}else o&&Lo(e,a,i),i.canActivateChecks.push(new nl(r)),s.component?Mo(t,null,a?a.children:null,r,i):Mo(t,null,n,r,i);return i}function o1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!jr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!jr(t.url,e.url)||!an(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zp(t,e)||!an(t.queryParams,e.queryParams);case"paramsChange":default:return!zp(t,e)}}function Lo(t,e,n){let r=Yi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Lo(o,e.children.getContext(s),n):Lo(o,null,n):Lo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ji(e.outlet.component,i)):n.canDeactivateChecks.push(new Ji(null,i)):n.canDeactivateChecks.push(new Ji(null,i))}function Ko(t){return typeof t=="function"}function a1(t){return typeof t=="boolean"}function c1(t){return t&&Ko(t.canLoad)}function u1(t){return t&&Ko(t.canActivate)}function l1(t){return t&&Ko(t.canActivateChild)}function d1(t){return t&&Ko(t.canDeactivate)}function h1(t){return t&&Ko(t.canMatch)}function NC(t){return t instanceof Tn||t?.name==="EmptyError"}var zu=Symbol("INITIAL_VALUE");function ts(){return Ft(t=>Hc(t.map(e=>e.pipe(Cn(1),Nh(zu)))).pipe(W(e=>{for(let n of e)if(n!==!0){if(n===zu)return zu;if(n===!1||n instanceof rr)return n}return!0}),Ot(e=>e!==zu),Cn(1)))}function f1(t,e){return xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?O(ge(D({},n),{guardsResult:!0})):p1(o,r,i,t).pipe(xe(a=>a&&a1(a)?g1(r,s,t,e):O(a)),W(a=>ge(D({},n),{guardsResult:a})))})}function p1(t,e,n,r){return Ne(t).pipe(xe(i=>w1(i.component,i.route,n,e,r)),Yt(i=>i!==!0,!0))}function g1(t,e,n,r){return Ne(e).pipe(Oi(i=>ki(y1(i.route.parent,r),m1(i.route,r),v1(t,i.path,n),_1(t,i.route,n))),Yt(i=>i!==!0,!0))}function m1(t,e){return t!==null&&e&&e(new jp(t)),O(!0)}function y1(t,e){return t!==null&&e&&e(new Vp(t)),O(!0)}function _1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(s=>qc(()=>{let o=Go(e)??n,a=ns(s,o),c=u1(a)?a.canActivate(e,t):Fr(o,()=>a(e,t));return or(c).pipe(Yt())}));return O(i).pipe(ts())}function v1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>i1(o)).filter(o=>o!==null).map(o=>qc(()=>{let a=o.guards.map(c=>{let u=Go(o.node)??n,l=ns(c,u),d=l1(l)?l.canActivateChild(r,t):Fr(u,()=>l(r,t));return or(d).pipe(Yt())});return O(a).pipe(ts())}));return O(s).pipe(ts())}function w1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return O(!0);let o=s.map(a=>{let c=Go(e)??i,u=ns(a,c),l=d1(u)?u.canDeactivate(t,e,n,r):Fr(c,()=>u(t,e,n,r));return or(l).pipe(Yt())});return O(o).pipe(ts())}function I1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return O(!0);let s=i.map(o=>{let a=ns(o,t),c=c1(a)?a.canLoad(e,n):Fr(t,()=>a(e,n));return or(c)});return O(s).pipe(ts(),xC(r))}function xC(t){return yh(Te(e=>{if(es(e))throw SC(t,e)}),W(e=>e===!0))}function E1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return O(!0);let s=i.map(o=>{let a=ns(o,t),c=h1(a)?a.canMatch(e,n):Fr(t,()=>a(e,n));return or(c)});return O(s).pipe(ts(),xC(r))}var zo=class{constructor(e){this.segmentGroup=e||null}},rl=class extends Error{constructor(e){super(),this.urlTree=e}};function Qi(t){return Mi(new zo(t))}function T1(t){return Mi(new A(4e3,!1))}function C1(t){return Mi(AC(!1,3))}var Kp=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return O(r);if(i.numberOfChildren>1||!i.children[L])return T1(e.redirectTo);i=i.children[L]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new rl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new rr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Qp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function D1(t,e,n,r,i){let s=sg(t,e,n);return s.matched?(r=e1(e,r),E1(r,e,n,i).pipe(W(o=>o===!0?s:D({},Qp)))):O(s)}function sg(t,e,n){if(e.path==="**")return b1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?D({},Qp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EO)(n,t,e);if(!i)return D({},Qp);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?D(D({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function b1(t){return{matched:!0,parameters:t.at(-1)?.parameters??{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function uC(t,e,n,r){return n.length>0&&R1(t,n,r)?{segmentGroup:new ie(e,A1(r,new ie(n,t.children))),slicedSegments:[]}:n.length===0&&N1(t,n,r)?{segmentGroup:new ie(t.segments,S1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ie(t.segments,t.children),slicedSegments:n}}function S1(t,e,n,r){let i={};for(let s of n)if(sl(t,e,s)&&!r[cn(s)]){let o=new ie([],{});i[cn(s)]=o}return D(D({},r),i)}function A1(t,e){let n={};n[L]=e;for(let r of t)if(r.path===""&&cn(r)!==L){let i=new ie([],{});n[cn(r)]=i}return n}function R1(t,e,n){return n.some(r=>sl(t,e,r)&&cn(r)!==L)}function N1(t,e,n){return n.some(r=>sl(t,e,r))}function sl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function x1(t,e,n,r){return cn(t)!==r&&(r===L||!sl(e,n,t))?!1:sg(e,t,n).matched}function P1(t,e,n){return e.length===0&&!t.children[n]}var Yp=class{};function M1(t,e,n,r,i,s,o="emptyOnly"){return new Zp(t,e,n,r,i,o,s).recognize()}var k1=31,Zp=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Kp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new A(4002,`'${e.segmentGroup}'`)}recognize(){let e=uC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(n=>{let r=new Ho([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},L,this.rootComponentType,null,{}),i=new pt(r,n),s=new tl("",i),o=BO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,L).pipe(Gn(r=>{if(r instanceof rl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=eg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(W(s=>s instanceof pt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ne(i).pipe(Oi(s=>{let o=r.children[s],a=t1(n,s);return this.processSegmentGroup(e,a,o,s)}),Rh((s,o)=>(s.push(...o),s)),Kn(null),Ah(),xe(s=>{if(s===null)return Qi(r);let o=PC(s);return O1(o),O(o)}))}processSegment(e,n,r,i,s,o){return Ne(n).pipe(Oi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Gn(c=>{if(c instanceof zo)return O(null);throw c}))),Yt(a=>!!a),Gn(a=>{if(NC(a))return P1(r,i,s)?O(new Yp):Qi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return x1(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Qi(i):Qi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=sg(n,i,s);if(!a)return Qi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>k1&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(xe(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=D1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ft(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ft(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Ho(l,h,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,L1(r),cn(r),r.component??r._loadedComponent??null,r,V1(r)),{segmentGroup:g,slicedSegments:_}=uC(n,l,d,c);if(_.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(W(b=>b===null?null:new pt(f,b)));if(c.length===0&&_.length===0)return O(new pt(f,[]));let I=cn(r)===s;return this.processSegment(u,c,g,_,I?L:s,!0).pipe(W(b=>new pt(f,b instanceof pt?[b]:[])))}))):Qi(n)))}getChildConfig(e,n,r){return n.children?O({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?O({routes:n._loadedRoutes,injector:n._loadedInjector}):I1(e,n,r,this.urlSerializer).pipe(xe(i=>i?this.configLoader.loadChildren(e,n).pipe(Te(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):C1(n))):O({routes:[],injector:e})}};function O1(t){t.sort((e,n)=>e.value.outlet===L?-1:n.value.outlet===L?1:e.value.outlet.localeCompare(n.value.outlet))}function F1(t){let e=t.value.routeConfig;return e&&e.path===""}function PC(t){let e=[],n=new Set;for(let r of t){if(!F1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=PC(r.children);e.push(new pt(r.value,i))}return e.filter(r=>!n.has(r))}function L1(t){return t.data||{}}function V1(t){return t.resolve||{}}function U1(t,e,n,r,i,s){return xe(o=>M1(t,e,n,r,o.extractedUrl,i,s).pipe(W(({state:a,tree:c})=>ge(D({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function j1(t,e){return xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of MC(c))o.add(u);let a=0;return Ne(o).pipe(Oi(c=>s.has(c)?B1(c,r,t,e):(c.data=eg(c,c.parent,t).resolve,O(void 0))),Te(()=>a++),Fi(1),xe(c=>a===o.size?O(n):_t))})}function MC(t){let e=t.children.map(n=>MC(n)).flat();return[t,...e]}function B1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!DC(i)&&(s[Wo]=i.title),$1(s,t,e,r).pipe(W(o=>(t._resolvedData=o,t.data=eg(t,t.parent,n).resolve,null)))}function $1(t,e,n,r){let i=Ap(t);if(i.length===0)return O({});let s={};return Ne(i).pipe(xe(o=>H1(t[o],e,n,r).pipe(Yt(),Te(a=>{s[o]=a}))),Fi(1),Sh(s),Gn(o=>NC(o)?_t:Mi(o)))}function H1(t,e,n,r){let i=Go(e)??r,s=ns(t,i),o=s.resolve?s.resolve(e,n):Fr(i,()=>s(e,n));return or(o)}function bp(t){return Ft(e=>{let n=t(e);return n?Ne(n).pipe(W(()=>e)):O(e)})}var kC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===L);return i}getResolvedTitleForRoute(r){return r.data[Wo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(q1))(),providedIn:"root"});let t=e;return t})(),q1=(()=>{let e=class e extends kC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(Ep))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),og=new F("",{providedIn:"root",factory:()=>({})}),ag=new F("ROUTES"),z1=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(ap)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return O(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=or(r.loadComponent()).pipe(W(OC),Te(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Js(()=>{this.componentLoaders.delete(r)})),s=new Ri(i,()=>new rt).pipe(Ai());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return O({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=W1(i,this.compiler,r,this.onLoadEndListener).pipe(Js(()=>{this.childrenLoaders.delete(i)})),a=new Ri(o,()=>new rt).pipe(Ai());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function W1(t,e,n,r){return or(t.loadChildren()).pipe(W(OC),xe(i=>i instanceof mo||Array.isArray(i)?O(i):Ne(e.compileModuleAsync(i))),W(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ag,[],{optional:!0,self:!0}).flat()),{routes:o.map(ig),injector:s}}))}function G1(t){return t&&typeof t=="object"&&"default"in t}function OC(t){return G1(t)?t.default:t}var cg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(K1))(),providedIn:"root"});let t=e;return t})(),K1=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Q1=new F("");var Y1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rt,this.transitionAbortSubject=new rt,this.configLoader=E(z1),this.environmentInjector=E(Et),this.urlSerializer=E(Xp),this.rootContexts=E(il),this.location=E(Ao),this.inputBindingEnabled=E(rg,{optional:!0})!==null,this.titleStrategy=E(kC),this.options=E(og,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(cg),this.createViewTransition=E(Q1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Fp(s)),i=s=>this.events.next(new Lp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ge(D(D({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(o=>o.id!==0),W(o=>ge(D({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ft(o=>{this.currentTransition=o;let a=!1,c=!1;return O(o).pipe(Te(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ge(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ft(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Br(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),_t}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return O(u).pipe(Ft(h=>{let f=this.transitions?.getValue();return this.events.next(new Uo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?_t:Promise.resolve(h)}),U1(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ge(D({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ju(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:_,extras:I}=u,b=new Uo(h,this.urlSerializer.serialize(f),g,_);this.events.next(b);let $=TC(this.rootComponentType).snapshot;return this.currentTransition=o=ge(D({},u),{targetSnapshot:$,urlAfterRedirects:f,extras:ge(D({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,O(o)}else{let h="";return this.events.next(new Br(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),_t}}),Te(u=>{let l=new Pp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),W(u=>(this.currentTransition=o=ge(D({},u),{guards:r1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),f1(this.environmentInjector,u=>this.events.next(u)),Te(u=>{if(o.guardsResult=u.guardsResult,es(u.guardsResult))throw SC(this.urlSerializer,u.guardsResult);let l=new Mp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ot(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),bp(u=>{if(u.guards.canActivateChecks.length)return O(u).pipe(Te(l=>{let d=new kp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ft(l=>{let d=!1;return O(l).pipe(j1(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Te(l=>{let d=new Op(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),bp(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Te(f=>{d.component=f}),W(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Hc(l(u.targetSnapshot.root)).pipe(Kn(null),Cn(1))}),bp(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Ne(d).pipe(W(()=>o)):O(o)}),W(u=>{let l=QO(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ge(D({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Te(()=>{this.events.next(new Bo)}),n1(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Cn(1),Te({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ir(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),xh(this.transitionAbortSubject.pipe(Te(u=>{throw u}))),Js(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(o,u,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Gn(u=>{if(c=!0,RC(u))this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),JO(u)?this.events.next(new $o(u.url)):o.resolve(!1);else{this.events.next(new jo(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){o.reject(l)}}return _t}))}))}cancelNavigationTransition(r,i,s){let o=new sr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Z1(t){return t!==Fo}var J1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(X1))(),providedIn:"root"});let t=e;return t})(),Jp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},X1=(()=>{let e=class e extends Jp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ff(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),FC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>(()=>E(eF))(),providedIn:"root"});let t=e;return t})(),eF=(()=>{let e=class e extends FC{constructor(){super(...arguments),this.location=E(Ao),this.urlSerializer=E(Xp),this.options=E(og,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(cg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Uo)this.stateMemento=this.createStateMemento();else if(r instanceof Br)this.rawUrlTree=i.initialUrl;else if(r instanceof Ju){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Bo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof sr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof jo?this.restoreHistory(i,!0):r instanceof ir&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=D(D({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ff(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ko=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ko||{});function tF(t,e){t.events.pipe(Ot(n=>n instanceof ir||n instanceof sr||n instanceof jo||n instanceof Br),W(n=>n instanceof ir||n instanceof Br?ko.COMPLETE:(n instanceof sr?n.code===0||n.code===1:!1)?ko.REDIRECTING:ko.FAILED),Ot(n=>n!==ko.REDIRECTING),Cn(1)).subscribe(()=>{e()})}function nF(t){throw t}var rF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ug=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=E(Vu),this.stateManager=E(FC),this.options=E(og,{optional:!0})||{},this.pendingTasks=E(Uu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(Y1),this.urlSerializer=E(Xp),this.location=E(Ao),this.urlHandlingStrategy=E(cg),this._events=new rt,this.errorHandler=this.options.errorHandler||nF,this.navigated=!1,this.routeReuseStrategy=E(J1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(ag,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(rg,{optional:!0}),this.eventsSubscription=new ve,this.isNgZoneEnabled=E(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof sr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof ir)this.navigated=!0;else if(i instanceof $o){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Z1(s.source)};this.scheduleNavigation(a,Fo,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}oF(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=D({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ig),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=vC(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return wC(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=es(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Fo,null,i)}navigate(r,i={skipLocationChange:!1}){return sF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=D({},rF):i===!1?s=D({},iF):s=i,es(r))return sC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return sC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return tF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new A(4008,!1)}function oF(t){return!(t instanceof Bo)&&!(t instanceof $o)}var LC=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new rt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof ir&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:rT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ht(ug),ht($r),Lf("tabindex"),ht(Nu),ht(Eo),ht(Ki))},e.\u0275dir=qi({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ip("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&rp("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",So],skipLocationChange:["skipLocationChange","skipLocationChange",So],replaceUrl:["replaceUrl","replaceUrl",So],routerLink:"routerLink"},standalone:!0,features:[np,wo]});let t=e;return t})();var aF=new F("");function VC(t,...e){return Tu([{provide:ag,multi:!0,useValue:t},[],{provide:$r,useFactory:cF,deps:[ug]},{provide:cp,multi:!0,useFactory:uF},e.map(n=>n.\u0275providers)])}function cF(t){return t.routerState.root}function uF(){let t=E(ot);return e=>{let n=t.get(bo);if(e!==n.components[0])return;let r=t.get(ug),i=t.get(lF);t.get(dF)===1&&r.initialNavigation(),t.get(hF,null,j.Optional)?.setUpPreloading(),t.get(aF,null,j.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lF=new F("",{factory:()=>new rt}),dF=new F("",{providedIn:"root",factory:()=>1});var hF=new F("");function fF(t,e){t&1&&(we(0,"div",7)(1,"p",4),ze(2,"To get started"),De(),we(3,"p"),ze(4,"please sign or login using the button below or use the testing credentials provided in the readme"),De(),we(5,"section",8)(6,"button",9),ze(7,"Sign up"),De(),we(8,"button",9),ze(9,"Login"),De()()())}var UC=(()=>{let e=class e{constructor(){this.authStatus=!1,this.user="John doe"}changeAuth(){this.authStatus=!this.authStatus}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=sn({type:e,selectors:[["app-homepage"]],standalone:!0,features:[on],decls:14,vars:1,consts:[[1,"flex","items-center","p-10","pt-8","flex-col","text-center"],["src","assets/Dooter-logo.png",1,"h-32"],[1,"mt-6"],[1,"font-bold"],[1,"font-medium"],[1,"underline","italic"],["class","mt-16",4,"ngIf"],[1,"mt-16"],[1,"flex","flex-col","items-center","mt-4"],[1,"mt-12","bg-blue-700","hover:bg-blue-900","text-white","font-bold","py-2","px-4","rounded-full","w-40"]],template:function(i,s){i&1&&(we(0,"section",0),nr(1,"img",1),we(2,"section",2)(3,"h1",3),ze(4,"Welcome to Dooter!"),De(),we(5,"p",4),ze(6,"My small chat app"),De(),we(7,"p"),ze(8,"This web-app was made with Angular, Tailwind, Socket.IO and Firebase."),De(),we(9,"p"),ze(10,"To see more, visit the "),we(11,"span",5),ze(12,"Github & Readme"),De()()(),Co(13,fF,10,0,"div",6),De()),i&2&&(Pu(13),To("ngIf",!s.authStatus))},dependencies:[QT]});let t=e;return t})();var dg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v=function(t,e){if(!t)throw qr(e)},qr=function(t){return new Error("Firebase Database ("+dg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var BC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},al={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new hg;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pg=function(t){let e=BC(t);return al.encodeByteArray(e,!0)},Qo=function(t){return pg(t).replace(/\./g,"")},Yo=function(t){try{return al.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $C(t){return HC(void 0,t)}function HC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!gF(n)||(t[n]=HC(t[n],e[n]));return t}function gF(t){return t!=="__proto__"}function mF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yF=()=>mF().__FIREBASE_DEFAULTS__,_F=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yo(t[1]);return e&&JSON.parse(e)},gg=()=>{try{return yF()||_F()||vF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mg=t=>{var e,n;return(n=(e=gg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cl=t=>{let e=mg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yg=()=>{var t;return(t=gg())===null||t===void 0?void 0:t.config},_g=t=>{var e;return(e=gg())===null||e===void 0?void 0:e[`_${t}`]};var Hr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ul(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Qo(JSON.stringify(n)),Qo(JSON.stringify(o)),a].join(".")}function ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function qC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ll(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zC(){let t=ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function un(){return dg.NODE_CLIENT===!0||dg.NODE_ADMIN===!0}function vg(){try{return typeof indexedDB=="object"}catch{return!1}}function WC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var wF="FirebaseError",gt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rn.prototype.create)}},Rn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gt(i,a,r)}};function IF(t,e){return t.replace(EF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var EF=/\{\$([^}]+)}/g;function rs(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}var GC=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=rs(Yo(s[0])||""),n=rs(Yo(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var KC=function(t){let e=GC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},QC=function(t){let e=GC(t).claims;return typeof e=="object"&&e.admin===!0};function ln(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Jo(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Wr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(jC(s)&&jC(o)){if(!Wr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jC(t){return t!==null&&typeof t=="object"}function Gr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ol=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function YC(t,e){let n=new fg(t,e);return n.subscribe.bind(n)}var fg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=lg),i.error===void 0&&(i.error=lg),i.complete===void 0&&(i.complete=lg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lg(){}function ZC(t,e){return`${t} failed: ${e} argument `}var JC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,v(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ea=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var X6=4*60*60*1e3;function et(t){return t&&t._delegate?t._delegate:t}var at=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Kr="[DEFAULT]";var dl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Hr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DF(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CF(t){return t===Kr?void 0:t}function DF(t){return t.instantiationMode==="EAGER"}var ta=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new dl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var bF=[],B=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(B||{}),SF={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},AF=B.INFO,RF={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},NF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=RF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dn=class{constructor(e){this.name=e,this._logLevel=AF,this._logHandler=NF,this._userLogHandler=null,bF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}};var xF=(t,e)=>e.some(n=>t instanceof n),XC,eD;function PF(){return XC||(XC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MF(){return eD||(eD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tD=new WeakMap,Ig=new WeakMap,nD=new WeakMap,wg=new WeakMap,Tg=new WeakMap;function kF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tD.set(n,t)}).catch(()=>{}),Tg.set(e,t),e}function OF(t){if(Ig.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ig.set(t,e)}var Eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rD(t){Eg=t(Eg)}function FF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(hl(this),e,...n);return nD.set(r,e.sort?e.sort():[e]),hn(r)}:MF().includes(t)?function(...e){return t.apply(hl(this),e),hn(tD.get(this))}:function(...e){return hn(t.apply(hl(this),e))}}function LF(t){return typeof t=="function"?FF(t):(t instanceof IDBTransaction&&OF(t),xF(t,PF())?new Proxy(t,Eg):t)}function hn(t){if(t instanceof IDBRequest)return kF(t);if(wg.has(t))return wg.get(t);let e=LF(t);return e!==t&&(wg.set(t,e),Tg.set(e,t)),e}var hl=t=>Tg.get(t);function sD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=hn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(hn(o.result),c.oldVersion,c.newVersion,hn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var VF=["get","getKey","getAll","getAllKeys","count"],UF=["put","add","delete","clear"],Cg=new Map;function iD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cg.get(e))return Cg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=UF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VF.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Cg.set(e,s),s}rD(t=>ge(D({},t),{get:(e,n,r)=>iD(e,n)||t.get(e,n,r),has:(e,n)=>!!iD(e,n)||t.has(e,n)}));var bg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function jF(t){let e=t.getComponent();return e?.type==="VERSION"}var Sg="@firebase/app",oD="0.9.25";var Qr=new dn("@firebase/app"),BF="@firebase/app-compat",$F="@firebase/analytics-compat",HF="@firebase/analytics",qF="@firebase/app-check-compat",zF="@firebase/app-check",WF="@firebase/auth",GF="@firebase/auth-compat",KF="@firebase/database",QF="@firebase/database-compat",YF="@firebase/functions",ZF="@firebase/functions-compat",JF="@firebase/installations",XF="@firebase/installations-compat",eL="@firebase/messaging",tL="@firebase/messaging-compat",nL="@firebase/performance",rL="@firebase/performance-compat",iL="@firebase/remote-config",sL="@firebase/remote-config-compat",oL="@firebase/storage",aL="@firebase/storage-compat",cL="@firebase/firestore",uL="@firebase/firestore-compat",lL="firebase",dL="10.7.1";var Ag="[DEFAULT]",hL={[Sg]:"fire-core",[BF]:"fire-core-compat",[HF]:"fire-analytics",[$F]:"fire-analytics-compat",[zF]:"fire-app-check",[qF]:"fire-app-check-compat",[WF]:"fire-auth",[GF]:"fire-auth-compat",[KF]:"fire-rtdb",[QF]:"fire-rtdb-compat",[YF]:"fire-fn",[ZF]:"fire-fn-compat",[JF]:"fire-iid",[XF]:"fire-iid-compat",[eL]:"fire-fcm",[tL]:"fire-fcm-compat",[nL]:"fire-perf",[rL]:"fire-perf-compat",[iL]:"fire-rc",[sL]:"fire-rc-compat",[oL]:"fire-gcs",[aL]:"fire-gcs-compat",[cL]:"fire-fst",[uL]:"fire-fst-compat","fire-js":"fire-js",[lL]:"fire-js-all"};var na=new Map,Rg=new Map;function fL(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fn(t){let e=t.name;if(Rg.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(let n of na.values())fL(n,t);return!0}function Yr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var pL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ar=new Rn("app","Firebase",pL);var Ng=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new at("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}};var pn=dL;function Mg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ag,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ar.create("bad-app-name",{appName:String(i)});if(n||(n=yg()),!n)throw ar.create("no-options");let s=na.get(i);if(s){if(Wr(n,s.options)&&Wr(r,s.config))return s;throw ar.create("duplicate-app",{appName:i})}let o=new ta(i);for(let c of Rg.values())o.addComponent(c);let a=new Ng(n,r,o);return na.set(i,a),a}function cr(t=Ag){let e=na.get(t);if(!e&&t===Ag&&yg())return Mg();if(!e)throw ar.create("no-app",{appName:t});return e}function fl(){return Array.from(na.values())}function fe(t,e,n){var r;let i=(r=hL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}fn(new at(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gL="firebase-heartbeat-database",mL=1,ra="firebase-heartbeat-store",Dg=null;function lD(){return Dg||(Dg=sD(gL,mL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ra)}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),Dg}function yL(t){return p(this,null,function*(){try{return yield(yield lD()).transaction(ra).objectStore(ra).get(dD(t))}catch(e){if(e instanceof gt)Qr.warn(e.message);else{let n=ar.create("idb-get",{originalErrorMessage:e?.message});Qr.warn(n.message)}}})}function aD(t,e){return p(this,null,function*(){try{let r=(yield lD()).transaction(ra,"readwrite");yield r.objectStore(ra).put(e,dD(t)),yield r.done}catch(n){if(n instanceof gt)Qr.warn(n.message);else{let r=ar.create("idb-set",{originalErrorMessage:n?.message});Qr.warn(r.message)}}})}function dD(t){return`${t.name}!${t.options.appId}`}var _L=1024,vL=30*24*60*60*1e3,xg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Pg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=vL}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=cD(),{heartbeatsToSend:r,unsentEntries:i}=wL(this._heartbeatsCache.heartbeats),s=Qo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function cD(){return new Date().toISOString().substring(0,10)}function wL(t,e=_L){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),uD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),uD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Pg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return vg()?WC().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield yL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function uD(t){return Qo(JSON.stringify({version:2,heartbeats:t})).length}function IL(t){fn(new at("platform-logger",e=>new bg(e),"PRIVATE")),fn(new at("heartbeat",e=>new xg(e),"PRIVATE")),fe(Sg,oD,t),fe(Sg,oD,"esm2017"),fe("fire-js","")}IL("");var EL="firebase",TL="10.7.1";fe(EL,TL,"app");var Nn=new Jn("ANGULARFIRE2_VERSION");function ss(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Jr=(t,e)=>{let n=e?[e]:fl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ur=class{constructor(){return Jr(CL)}},CL="app-check";function is(){}var pl=class{zone;delegate;constructor(e,n=Th){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},kg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",is,{},is,is)),n.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},lr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new pl(Zone.current)),this.insideAngular=n.run(()=>new pl(Zone.current,Eh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(U(re))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function DL(t){return gl().ngZone.runOutsideAngular(()=>t())}function Zr(t){return gl().ngZone.run(()=>t())}function bL(t){return SL(gl())(t)}function SL(t){return function(n){return n=n.lift(new kg(t.ngZone)),n.pipe(Wn(t.outsideAngular),zn(t.insideAngular))}}var AL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Zr(()=>t.apply(void 0,r))},Bt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Zr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",is,{},is,is))),r[s]=AL(r[s],n));let i=DL(()=>t.apply(this,r));if(!e)if(i instanceof J){let s=gl();return i.pipe(Wn(s.outsideAngular),zn(s.insideAngular))}else return Zr(()=>i);return i instanceof J?i.pipe(bL):i instanceof Promise?Zr(()=>new Promise((s,o)=>i.then(a=>Zr(()=>s(a)),a=>Zr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Zr(()=>i)};var $t=class{constructor(e){return e}},xn=class{constructor(){return fl()}};function RL(t){return t&&t.length===1?t[0]:new $t(cr())}var Og=new F("angularfire2._apps"),NL={provide:$t,useFactory:RL,deps:[[new Ce,Og]]},xL={provide:xn,deps:[[new Ce,Og]]};function PL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $t(r)}}var ML=(()=>{class t{constructor(n){fe("angularfire",Nn.full,"core"),fe("angularfire",Nn.full,"app"),fe("angular",MT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(U(tr))};static \u0275mod=Ct({type:t});static \u0275inj=Tt({providers:[NL,xL]})}return t})();function hD(t,...e){return{ngModule:ML,providers:[{provide:Og,useFactory:PL(t),multi:!0,deps:[re,ot,lr,...e]}]}}var fD=Bt(Mg,!0);function SD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AD=SD,RD=new Rn("auth","Firebase",SD());var Il=new dn("@firebase/auth");function kL(t,...e){Il.logLevel<=B.WARN&&Il.warn(`Auth (${pn}): ${t}`,...e)}function yl(t,...e){Il.logLevel<=B.ERROR&&Il.error(`Auth (${pn}): ${t}`,...e)}function hr(t,...e){throw tm(t,...e)}function Xr(t,...e){return tm(t,...e)}function OL(t,e,n){let r=Object.assign(Object.assign({},AD()),{[e]:n});return new Rn("auth","Firebase",r).create(e,{appName:t.name})}function tm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RD.create(t,...e)}function M(t,e,...n){if(!t)throw tm(e,...n)}function Pn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw yl(e),new Error(e)}function fr(t,e){t||Pn(e)}function Ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FL(){return pD()==="http:"||pD()==="https:"}function pD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function LL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FL()||qC()||"connection"in navigator)?navigator.onLine:!0}function VL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ei=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=Zo()||ll()}get(){return LL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nm(t,e){fr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var El=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jL=new ei(3e4,6e4);function rm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function os(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return ND(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Gr(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),El.fetch()(xD(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function ND(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},UL),e);try{let i=new jg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ml(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw OL(t,l,u);hr(t,l)}}catch(i){if(i instanceof gt)throw i;hr(t,"network-request-failed",{message:String(i)})}})}function BL(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let u=yield os(t,e,n,r,i);return"mfaPendingCredential"in u&&hr(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function xD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?nm(t.config,i):`${t.config.apiScheme}://${i}`}var jg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),jL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ml(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Xr(t,e,r);return i.customData._tokenResponse=n,i}function $L(t,e){return p(this,null,function*(){return os(t,"POST","/v1/accounts:delete",e)})}function HL(t,e){return p(this,null,function*(){return os(t,"POST","/v1/accounts:lookup",e)})}function ia(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function im(t,e=!1){return p(this,null,function*(){let n=et(t),r=yield n.getIdToken(e),i=sm(r);M(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ia(Fg(i.auth_time)),issuedAtTime:ia(Fg(i.iat)),expirationTime:ia(Fg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Fg(t){return Number(t)*1e3}function sm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yo(n);return i?JSON.parse(i):(yl("Failed to decode base64 JWT payload"),null)}catch(i){return yl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qL(t){let e=sm(t);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function sa(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof gt&&zL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function zL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Bg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Cl(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield sa(t,HL(n,{idToken:r}));M(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?GL(s.providerUserInfo):[],a=WL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tl(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function om(t){return p(this,null,function*(){let e=et(t);yield Cl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GL(t){return t.map(e=>{var{providerId:n}=e,r=Ch(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function KL(t,e){return p(this,null,function*(){let n=yield ND(t,{},()=>p(this,null,function*(){let r=Gr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=xD(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",El.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function QL(t,e){return p(this,null,function*(){return os(t,"POST","/v2/accounts:revokeToken",rm(t,e))})}var Dl=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return M(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield KL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(M(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(M(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Pn("not implemented")}};function dr(t,e){M(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var oa=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ch(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield sa(this,this.stsTokenManager.getToken(this.auth,e));return M(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return im(this,e)}reload(){return om(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Cl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield sa(this,$L(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,$=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:te,emailVerified:ne,isAnonymous:_e,providerData:ae,stsTokenManager:ut}=n;M(te&&ut,e,"internal-error");let $n=Dl.fromJSON(this.name,ut);M(typeof te=="string",e,"internal-error"),dr(d,e.name),dr(h,e.name),M(typeof ne=="boolean",e,"internal-error"),M(typeof _e=="boolean",e,"internal-error"),dr(f,e.name),dr(g,e.name),dr(_,e.name),dr(I,e.name),dr(b,e.name),dr($,e.name);let Er=new t({uid:te,auth:e,email:h,emailVerified:ne,displayName:d,isAnonymous:_e,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:$n,createdAt:b,lastLoginAt:$});return ae&&Array.isArray(ae)&&(Er.providerData=ae.map(Tc=>Object.assign({},Tc))),I&&(Er._redirectEventId=I),Er}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Dl;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Cl(s),s})}};var gD=new Map;function Mn(t){fr(t instanceof Function,"Expected a class definition");let e=gD.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gD.set(t,e),e)}var YL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),$g=YL;function _l(t,e,n){return`firebase:${t}:${e}:${n}`}var bl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=_l(this.userKey,i.apiKey,s),this.fullPersistenceKey=_l("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?oa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Mn($g),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Mn($g),o=_l(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=oa._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function mD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FD(e))return"Blackberry";if(LD(e))return"Webos";if(am(e))return"Safari";if((e.includes("chrome/")||MD(e))&&!e.includes("edge/"))return"Chrome";if(OD(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function PD(t=ke()){return/firefox\//i.test(t)}function am(t=ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MD(t=ke()){return/crios\//i.test(t)}function kD(t=ke()){return/iemobile/i.test(t)}function OD(t=ke()){return/android/i.test(t)}function FD(t=ke()){return/blackberry/i.test(t)}function LD(t=ke()){return/webos/i.test(t)}function kl(t=ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZL(t=ke()){var e;return kl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JL(){return zC()&&document.documentMode===10}function VD(t=ke()){return kl(t)||OD(t)||LD(t)||FD(t)||/windows phone/i.test(t)||kD(t)}function XL(){try{return!!(window&&window!==window.top)}catch{return!1}}function UD(t,e=[]){let n;switch(t){case"Browser":n=mD(ke());break;case"Worker":n=`${mD(ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pn}/${r}`}var Hg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function eV(n){return p(this,arguments,function*(t,e={}){return os(t,"GET","/v2/passwordPolicy",rm(t,e))})}var tV=6,qg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:tV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var zg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sl(this),this.idTokenSubscription=new Sl(this),this.beforeStateQueue=new Hg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Cl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=VL()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?et(e):null;return n&&M(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Mn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield eV(this),n=new qg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Mn(e)||this._popupRedirectResolver;M(n,this,"argument-error"),this.redirectPersistenceManager=yield bl.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(M(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&kL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function cm(t){return et(t)}var Sl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function nV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function rV(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Xr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})}function jD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function um(t,e){let n=Yr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Wr(s,e??{}))return i;hr(i,"already-initialized")}return n.initialize({options:e})}function iV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function lm(t,e,n){let r=cm(t);M(r._canInitEmulator,r,"emulator-config-failed"),M(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=BD(e),{host:o,port:a}=sV(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||oV()}function BD(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sV(t){let e=BD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:yD(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:yD(o)}}}function yD(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function oV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Al=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}};function Lg(t,e){return p(this,null,function*(){return BL(t,"POST","/v1/accounts:signInWithIdp",rm(t,e))})}var Rl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wg=class extends Rl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var aa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield oa._fromIdTokenResponse(e,r,i),o=_D(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=_D(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function _D(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Gg=class t extends gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function $D(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gg._fromErrorAndOperation(t,s,e,r):s})}function aV(t,e,n=!1){return p(this,null,function*(){let r=yield sa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return aa._forOperation(t,"link",r)})}function cV(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield sa(t,$D(r,i,e,t),n);M(s.idToken,r,"internal-error");let o=sm(s.idToken);M(o,r,"internal-error");let{sub:a}=o;return M(t.uid===a,r,"user-mismatch"),aa._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hr(r,"user-mismatch"),s}})}function uV(t,e,n=!1){return p(this,null,function*(){let r="signIn",i=yield $D(t,r,e),s=yield aa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function dm(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function hm(t,e,n){return et(t).beforeAuthStateChanged(e,n)}var Nl="__sak";var xl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nl,"1"),this.storage.removeItem(Nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function lV(){let t=ke();return am(t)||kl(t)}var dV=1e3,hV=10,fV=(()=>{class t extends xl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=lV()&&XL(),this.fallbackToPolling=VD(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);JL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,hV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},dV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Hn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Hn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Hn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),HD=fV;var pV=(()=>{class t extends xl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),fm=pV;function gV(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var mV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>p(this,null,function*(){return l(r.origin,o)})),u=yield gV(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function qD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Kg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=qD("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function gn(){return window}function yV(t){gn().location.href=t}function zD(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}function _V(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wV(){return zD()?self:null}var WD="firebaseLocalStorageDb",IV=1,Pl="firebaseLocalStorage",GD="fbase_key",ti=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ol(t,e){return t.transaction([Pl],e?"readwrite":"readonly").objectStore(Pl)}function EV(){let t=indexedDB.deleteDatabase(WD);return new ti(t).toPromise()}function Qg(){let t=indexedDB.open(WD,IV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Pl,{keyPath:GD})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Pl)?e(r):(r.close(),yield EV(),e(yield Qg()))}))})}function vD(t,e,n){return p(this,null,function*(){let r=Ol(t,!0).put({[GD]:e,value:n});return new ti(r).toPromise()})}function TV(t,e){return p(this,null,function*(){let n=Ol(t,!1).get(e),r=yield new ti(n).toPromise();return r===void 0?null:r.value})}function wD(t,e){let n=Ol(t,!0).delete(e);return new ti(n).toPromise()}var CV=800,DV=3,bV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Qg(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>DV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return zD()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=mV._getInstance(wV()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield _V(),!this.activeServiceWorker)return;this.sender=new Kg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Qg();return yield vD(n,Nl,"1"),yield wD(n,Nl),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>vD(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>TV(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>wD(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ol(s,!1).getAll();return new ti(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),CV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),KD=bV;var z5=jD("rcb"),W5=new ei(3e4,6e4);function SV(t,e){return e?Mn(e):(M(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ca=class extends Al{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function AV(t){return uV(t.auth,new ca(t),t.bypassAuthState)}function RV(t){let{auth:e,user:n}=t;return M(n,e,"internal-error"),cV(n,new ca(t),t.bypassAuthState)}function NV(t){return p(this,null,function*(){let{auth:e,user:n}=t;return M(n,e,"internal-error"),aV(n,new ca(t),t.bypassAuthState)})}var Yg=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AV;case"linkViaPopup":case"linkViaRedirect":return NV;case"reauthViaPopup":case"reauthViaRedirect":return RV;default:hr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var G5=new ei(2e3,1e4);var xV="pendingRedirect",vl=new Map,Zg=class t extends Yg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=vl.get(this.auth._key());if(!e){try{let r=(yield PV(this.resolver,this.auth))?yield Hn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vl.set(this.auth._key(),e)}return this.bypassAuthState||vl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Hn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Hn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function PV(t,e){return p(this,null,function*(){let n=OV(e),r=kV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function MV(t,e){vl.set(t._key(),e)}function kV(t){return Mn(t._redirectPersistence)}function OV(t){return _l(xV,t.config.apiKey,t.name)}function FV(t,e,n=!1){return p(this,null,function*(){let r=cm(t),i=SV(r,e),o=yield new Zg(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var LV=10*60*1e3,Jg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QD(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LV&&this.cachedEventUids.clear(),this.cachedEventUids.has(ID(e))}saveEventToCache(e){this.cachedEventUids.add(ID(e)),this.lastProcessedEventTime=Date.now()}};function ID(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function VV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QD(t);default:return!1}}function UV(n){return p(this,arguments,function*(t,e={}){return os(t,"GET","/v1/projects",e)})}var jV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BV=/^https?/;function $V(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield UV(t);for(let n of e)try{if(HV(n))return}catch{}hr(t,"unauthorized-domain")})}function HV(t){let e=Ug(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BV.test(n))return!1;if(jV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var qV=new ei(3e4,6e4);function ED(){let t=gn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zV(t){return new Promise((e,n)=>{var r,i,s;function o(){ED(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ED(),n(Xr(t,"network-request-failed"))},timeout:qV.get()})}if(!((i=(r=gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gn().gapi)===null||s===void 0)&&s.load)o();else{let a=jD("iframefcb");return gn()[a]=()=>{gapi.load?o():n(Xr(t,"network-request-failed"))},rV(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw wl=null,e})}var wl=null;function WV(t){return wl=wl||zV(t),wl}var GV=new ei(5e3,15e3),KV="__/auth/iframe",QV="emulator/auth/iframe",YV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JV(t){let e=t.config;M(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?nm(e,QV):`https://${t.config.authDomain}/${KV}`,r={apiKey:e.apiKey,appName:t.name,v:pn},i=ZV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gr(r).slice(1)}`}function XV(t){return p(this,null,function*(){let e=yield WV(t),n=gn().gapi;return M(n,t,"internal-error"),e.open({where:document.body,url:JV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YV,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Xr(t,"network-request-failed"),a=gn().setTimeout(()=>{s(o)},GV.get());function c(){gn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var eU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tU=500,nU=600,rU="_blank",iU="http://localhost",Ml=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sU(t,e,n,r=tU,i=nU){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},eU),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ke().toLowerCase();n&&(a=MD(u)?rU:n),PD(u)&&(e=e||iU,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(ZL(u)&&a!=="_self")return oU(e||"",a),new Ml(null);let d=window.open(e||"",a,l);M(d,t,"popup-blocked");try{d.focus()}catch{}return new Ml(d)}function oU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var aU="__/auth/handler",cU="emulator/auth/handler",uU=encodeURIComponent("fac");function TD(t,e,n,r,i,s){return p(this,null,function*(){M(t.config.authDomain,t,"auth-domain-config-required"),M(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pn,eventId:i};if(e instanceof Rl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Jo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof Wg){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${uU}=${encodeURIComponent(c)}`:"";return`${lU(t)}?${Gr(a).slice(1)}${u}`})}function lU({config:t}){return t.emulator?nm(t,cU):`https://${t.authDomain}/${aU}`}var Vg="webStorageSupport",Xg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fm,this._completeRedirectFn=FV,this._overrideRedirectResult=MV}_openPopup(e,n,r,i){return p(this,null,function*(){var s;fr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield TD(e,n,r,Ug(),i);return sU(e,o,qD())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield TD(e,n,r,Ug(),i);return yV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield XV(e),r=new Jg(e);return n.register("authEvent",i=>(M(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vg,{type:Vg},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Vg];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$V(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VD()||am()||kl()}},YD=Xg;var CD="@firebase/auth",DD="1.5.1";var em=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function hU(t){fn(new at("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;M(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UD(t)},u=new zg(r,i,s,c);return iV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new at("auth-internal",e=>{let n=cm(e.getProvider("auth").getImmediate());return(r=>new em(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fe(CD,DD,dU(t)),fe(CD,DD,"esm2017")}var fU=5*60,pU=_g("authIdTokenMaxAge")||fU,bD=null,gU=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pU)return;let i=n?.token;bD!==i&&(bD=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function pm(t=cr()){let e=Yr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=um(t,{popupRedirectResolver:YD,persistence:[KD,HD,fm]}),r=_g("authTokenSyncURL");if(r){let s=gU(r);hm(n,s,()=>s(n.currentUser)),dm(n,o=>s(o))}let i=mg("auth");return i&&lm(n,`http://${i}`),n}hU("Browser");var ZD="auth",ua=class{constructor(e){return e}},ni=class{constructor(){return Jr(ZD)}};var gm=new F("angularfire2.auth-instances");function u2(t,e){let n=ss(ZD,t,e);return n&&new ua(n)}function l2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ua(r)}}var d2={provide:ni,deps:[[new Ce,gm]]},h2={provide:ua,useFactory:u2,deps:[[new Ce,gm],$t]},f2=(()=>{class t{constructor(){fe("angularfire",Nn.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ct({type:t});static \u0275inj=Tt({providers:[h2,d2]})}return t})();function JD(t,...e){return{ngModule:f2,providers:[{provide:gm,useFactory:l2(t),multi:!0,deps:[re,ot,lr,xn,[new Ce,ur],...e]}]}}var XD=Bt(pm,!0);var p2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qt={},w,Lm=Lm||{},R=p2||self;function Ql(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ta(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function g2(t){return Object.prototype.hasOwnProperty.call(t,mm)&&t[mm]||(t[mm]=++m2)}var mm="closure_uid_"+(1e9*Math.random()>>>0),m2=0;function y2(t,e,n){return t.call.apply(t.bind,arguments)}function _2(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function We(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?We=y2:We=_2,We.apply(null,arguments)}function Fl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Le(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pr(){this.s=this.s,this.o=this.o}var v2=0;pr.prototype.s=!1;pr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),v2!=0)&&g2(this)};pr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Vm(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eb(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Ql(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ge(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var w2=function(){if(!R.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};R.addEventListener("test",n,e),R.removeEventListener("test",n,e)}catch{}return t}();function ga(t){return/^[\s\xa0]*$/.test(t)}function Yl(){var t=R.navigator;return t&&(t=t.userAgent)?t:""}function mn(t){return Yl().indexOf(t)!=-1}function Um(t){return Um[" "](t),t}Um[" "]=function(){};function I2(t,e){var n=uj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var E2=mn("Opera"),ls=mn("Trident")||mn("MSIE"),fb=mn("Edge"),Im=fb||ls,pb=mn("Gecko")&&!(Yl().toLowerCase().indexOf("webkit")!=-1&&!mn("Edge"))&&!(mn("Trident")||mn("MSIE"))&&!mn("Edge"),T2=Yl().toLowerCase().indexOf("webkit")!=-1&&!mn("Edge");function gb(){var t=R.document;return t?t.documentMode:void 0}var Em;e:{if(Ll="",Vl=function(){var t=Yl();if(pb)return/rv:([^\);]+)(\)|;)/.exec(t);if(fb)return/Edge\/([\d\.]+)/.exec(t);if(ls)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(T2)return/WebKit\/(\S+)/.exec(t);if(E2)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Vl&&(Ll=Vl?Vl[1]:""),ls&&(Ul=gb(),Ul!=null&&Ul>parseFloat(Ll))){Em=String(Ul);break e}Em=Ll}var Ll,Vl,Ul,Tm;R.document&&ls?(ym=gb(),Tm=ym||parseInt(Em,10)||void 0):Tm=void 0;var ym,C2=Tm;function ma(t,e){if(Ge.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pb){e:{try{Um(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:D2[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ma.$.h.call(this)}}Le(ma,Ge);var D2={2:"touch",3:"pen",4:"mouse"};ma.prototype.h=function(){ma.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ca="closure_listenable_"+(1e6*Math.random()|0),b2=0;function S2(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++b2,this.fa=this.ia=!1}function Zl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jm(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function A2(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function mb(t){let e={};for(let n in t)e[n]=t[n];return e}var tb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yb(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<tb.length;s++)n=tb[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Jl(t){this.src=t,this.g={},this.h=0}Jl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Dm(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new S2(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Cm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=hb(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Zl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dm(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Bm="closure_lm_"+(1e6*Math.random()|0),_m={};function _b(t,e,n,r,i){if(r&&r.once)return wb(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)_b(t,e[s],n,r,i);return null}return n=qm(n),t&&t[Ca]?t.O(e,n,Ta(r)?!!r.capture:!!r,i):vb(t,e,n,!1,r,i)}function vb(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ta(i)?!!i.capture:!!i,a=Hm(t);if(a||(t[Bm]=a=new Jl(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=R2(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)w2||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Eb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function R2(){function t(n){return e.call(t.src,t.listener,n)}let e=N2;return t}function wb(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)wb(t,e[s],n,r,i);return null}return n=qm(n),t&&t[Ca]?t.P(e,n,Ta(r)?!!r.capture:!!r,i):vb(t,e,n,!0,r,i)}function Ib(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ib(t,e[s],n,r,i);else r=Ta(r)?!!r.capture:!!r,n=qm(n),t&&t[Ca]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Dm(s,n,r,i),-1<n&&(Zl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dm(e,n,r,i)),(n=-1<t?e[t]:null)&&$m(n))}function $m(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ca])Cm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Eb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hm(e))?(Cm(n,t),n.h==0&&(n.src=null,e[Bm]=null)):Zl(t)}}}function Eb(t){return t in _m?_m[t]:_m[t]="on"+t}function N2(t,e){if(t.fa)t=!0;else{e=new ma(e,this);var n=t.listener,r=t.la||t.src;t.ia&&$m(t),t=n.call(r,e)}return t}function Hm(t){return t=t[Bm],t instanceof Jl?t:null}var vm="__closure_events_fn_"+(1e9*Math.random()>>>0);function qm(t){return typeof t=="function"?t:(t[vm]||(t[vm]=function(e){return t.handleEvent(e)}),t[vm])}function Fe(){pr.call(this),this.i=new Jl(this),this.S=this,this.J=null}Le(Fe,pr);Fe.prototype[Ca]=!0;Fe.prototype.removeEventListener=function(t,e,n,r){Ib(this,t,e,n,r)};function $e(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ge(e,t);else if(e instanceof Ge)e.target=e.target||t;else{var i=e;e=new Ge(r,t),yb(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=jl(o,r,!0,e)&&i}if(o=e.g=t,i=jl(o,r,!0,e)&&i,i=jl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=jl(o,r,!1,e)&&i}Fe.prototype.N=function(){if(Fe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zl(n[r]);delete t.g[e],t.h--}}this.J=null};Fe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Fe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function jl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Cm(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var zm=R.JSON.stringify,bm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function x2(){var t=Wm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Sm=class{constructor(){this.h=this.g=null}add(e,n){let r=Tb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Tb=new bm(()=>new Am,t=>t.reset()),Am=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function P2(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function M2(t){R.setTimeout(()=>{throw t},0)}var ya,_a=!1,Wm=new Sm,Cb=()=>{let t=R.Promise.resolve(void 0);ya=()=>{t.then(k2)}},k2=()=>{for(var t;t=x2();){try{t.h.call(t.g)}catch(n){M2(n)}var e=Tb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_a=!1};function Xl(t,e){Fe.call(this),this.h=t||1,this.g=e||R,this.j=We(this.qb,this),this.l=Date.now()}Le(Xl,Fe);w=Xl.prototype;w.ga=!1;w.T=null;w.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$e(this,"tick"),this.ga&&(Gm(this),this.start()))}};w.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Gm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}w.N=function(){Xl.$.N.call(this),Gm(this),delete this.g};function Km(t,e,n){if(typeof t=="function")n&&(t=We(t,n));else if(t&&typeof t.handleEvent=="function")t=We(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:R.setTimeout(t,e||0)}function Db(t){t.g=Km(()=>{t.g=null,t.i&&(t.i=!1,Db(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Rm=class extends pr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Db(this)}N(){super.N(),this.g&&(R.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function va(t){pr.call(this),this.h=t,this.g={}}Le(va,pr);var nb=[];function bb(t,e,n,r){Array.isArray(n)||(n&&(nb[0]=n.toString()),n=nb);for(var i=0;i<n.length;i++){var s=_b(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Sb(t){jm(t.g,function(e,n){this.g.hasOwnProperty(n)&&$m(e)},t),t.g={}}va.prototype.N=function(){va.$.N.call(this),Sb(this)};va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ed(){this.g=!0}ed.prototype.Ea=function(){this.g=!1};function O2(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function F2(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function cs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+V2(t,n)+(r?" "+r:"")})}function L2(t,e){t.info(function(){return"TIMEOUT: "+e})}ed.prototype.info=function(){};function V2(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return zm(n)}catch{return e}}var oi={},rb=null;function td(){return rb=rb||new Fe}oi.Ta="serverreachability";function Ab(t){Ge.call(this,oi.Ta,t)}Le(Ab,Ge);function wa(t){let e=td();$e(e,new Ab(e))}oi.STAT_EVENT="statevent";function Rb(t,e){Ge.call(this,oi.STAT_EVENT,t),this.stat=e}Le(Rb,Ge);function tt(t){let e=td();$e(e,new Rb(e,t))}oi.Ua="timingevent";function Nb(t,e){Ge.call(this,oi.Ua,t),this.size=e}Le(Nb,Ge);function Da(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return R.setTimeout(function(){t()},e)}var nd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qm(){}Qm.prototype.h=null;function ib(t){return t.h||(t.h=t.i())}function Pb(){}var ba={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ym(){Ge.call(this,"d")}Le(Ym,Ge);function Zm(){Ge.call(this,"c")}Le(Zm,Ge);var Nm;function rd(){}Le(rd,Qm);rd.prototype.g=function(){return new XMLHttpRequest};rd.prototype.i=function(){return{}};Nm=new rd;function Sa(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new va(this),this.P=U2,t=Im?125:void 0,this.V=new Xl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mb}function Mb(){this.i=null,this.g="",this.h=!1}var U2=45e3,kb={},xm={};w=Sa.prototype;w.setTimeout=function(t){this.P=t};function Pm(t,e,n){t.L=1,t.A=sd(On(e)),t.u=n,t.S=!0,Ob(t,null)}function Ob(t,e){t.G=Date.now(),Aa(t),t.B=On(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Hb(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Mb,t.g=lS(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Rm(We(t.Pa,t,t.g),t.O)),bb(t.U,t.g,"readystatechange",t.nb),e=t.I?mb(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),wa(),O2(t.j,t.v,t.B,t.m,t.W,t.u)}w.nb=function(t){t=t.target;let e=this.M;e&&yn(t)==3?e.l():this.Pa(t)};w.Pa=function(t){try{if(t==this.g)e:{let l=yn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Im||this.g&&(this.h.h||this.g.ja()||cb(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?wa(3):wa(2)),id(this);var n=this.g.da();this.ca=n;t:if(Fb(this)){var r=cb(this.g);t="";var i=r.length,s=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),pa(this);var o="";break t}this.h.i=new R.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,F2(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ga(a)){var u=a;break t}}u=null}if(n=u)cs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mm(this,n);else{this.i=!1,this.s=3,tt(12),ri(this),pa(this);break e}}this.S?(Lb(this,l,o),Im&&this.i&&l==3&&(bb(this.U,this.V,"tick",this.mb),this.V.start())):(cs(this.j,this.m,o,null),Mm(this,o)),l==4&&ri(this),this.i&&!this.J&&(l==4?oS(this.l,this):(this.i=!1,Aa(this)))}else oj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),ri(this),pa(this)}}}catch{}finally{}};function Fb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Lb(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=j2(t,n),i==xm){e==4&&(t.s=4,tt(14),r=!1),cs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==kb){t.s=4,tt(15),cs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else cs(t.j,t.m,i,null),Mm(t,i);Fb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,tt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ry(e),e.M=!0,tt(11))):(cs(t.j,t.m,n,"[Invalid Chunked Response]"),ri(t),pa(t))}w.mb=function(){if(this.g){var t=yn(this.g),e=this.g.ja();this.o<e.length&&(id(this),Lb(this,t,e),this.i&&t!=4&&Aa(this))}};function j2(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?xm:(n=Number(e.substring(n,r)),isNaN(n)?kb:(r+=1,r+n>e.length?xm:(e=e.slice(r,r+n),t.o=r+n,e)))}w.cancel=function(){this.J=!0,ri(this)};function Aa(t){t.Y=Date.now()+t.P,Vb(t,t.P)}function Vb(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Da(We(t.lb,t),e)}function id(t){t.C&&(R.clearTimeout(t.C),t.C=null)}w.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(L2(this.j,this.B),this.L!=2&&(wa(),tt(17)),ri(this),this.s=2,pa(this)):Vb(this,this.Y-t)};function pa(t){t.l.H==0||t.J||oS(t.l,t)}function ri(t){id(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Gm(t.V),Sb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Mm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||km(n.i,t))){if(!t.K&&km(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)zl(n),cd(n);else break e;ny(n),tt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Da(We(n.ib,n),6e3));if(1>=Wb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ii(n,11)}else if((t.K||n.g==t)&&zl(n),!ga(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Jm(s,s.h),s.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,de(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=uS(r,r.J?r.pa:null,r.Y),o.K){Gb(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(id(a),Aa(a)),r.g=o}else iS(r);0<n.j.length&&ud(n)}else u[0]!="stop"&&u[0]!="close"||ii(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ii(n,7):ty(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}wa(4)}catch{}}function B2(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ql(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function $2(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ql(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function Ub(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ql(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=$2(t),r=B2(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H2(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function si(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof si){this.h=t.h,Hl(this,t.j),this.s=t.s,this.g=t.g,ql(this,t.m),this.l=t.l;var e=t.i,n=new Ia;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),sb(this,n),this.o=t.o}else t&&(e=String(t).match(jb))?(this.h=!1,Hl(this,e[1]||"",!0),this.s=ha(e[2]||""),this.g=ha(e[3]||"",!0),ql(this,e[4]),this.l=ha(e[5]||"",!0),sb(this,e[6]||"",!0),this.o=ha(e[7]||"")):(this.h=!1,this.i=new Ia(null,this.h))}si.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fa(e,ob,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(fa(e,ob,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(fa(n,n.charAt(0)=="/"?W2:z2,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",fa(n,K2)),t.join("")};function On(t){return new si(t)}function Hl(t,e,n){t.j=n?ha(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ql(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sb(t,e,n){e instanceof Ia?(t.i=e,Q2(t.i,t.h)):(n||(e=fa(e,G2)),t.i=new Ia(e,t.h))}function de(t,e,n){t.i.set(e,n)}function sd(t){return de(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ha(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,q2),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function q2(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ob=/[#\/\?@]/g,z2=/[#\?:]/g,W2=/[#\?]/g,G2=/[#\?@]/g,K2=/#/g;function Ia(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gr(t){t.g||(t.g=new Map,t.h=0,t.i&&H2(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}w=Ia.prototype;w.add=function(t,e){gr(this),this.i=null,t=ds(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Bb(t,e){gr(t),e=ds(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $b(t,e){return gr(t),e=ds(t,e),t.g.has(e)}w.forEach=function(t,e){gr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};w.ta=function(){gr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};w.Z=function(t){gr(this);let e=[];if(typeof t=="string")$b(this,t)&&(e=e.concat(this.g.get(ds(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};w.set=function(t,e){return gr(this),this.i=null,t=ds(this,t),$b(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};w.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Hb(t,e,n){Bb(t,e),0<n.length&&(t.i=null,t.g.set(ds(t,e),Vm(n)),t.h+=n.length)}w.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ds(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Q2(t,e){e&&!t.j&&(gr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Bb(this,r),Hb(this,i,n))},t)),t.j=e}var Y2=class{constructor(t,e){this.g=t,this.map=e}};function qb(t){this.l=t||Z2,R.PerformanceNavigationTiming?(t=R.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(R.g&&R.g.Ka&&R.g.Ka()&&R.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Z2=10;function zb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Wb(t){return t.h?1:t.g?t.g.size:0}function km(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Jm(t,e){t.g?t.g.add(e):t.h=e}function Gb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}qb.prototype.cancel=function(){if(this.i=Kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Kb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Vm(t.i)}var J2=class{stringify(t){return R.JSON.stringify(t,void 0)}parse(t){return R.JSON.parse(t,void 0)}};function X2(){this.g=new J2}function ej(t,e,n){let r=n||"";try{Ub(t,function(i,s){let o=i;Ta(i)&&(o=zm(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function tj(t,e){let n=new ed;if(R.Image){let r=new Image;r.onload=Fl(Bl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fl(Bl,n,r,"TestLoadImage: error",!1,e),r.onabort=Fl(Bl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fl(Bl,n,r,"TestLoadImage: timeout",!1,e),R.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Bl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ra(t){this.l=t.ec||null,this.j=t.ob||!1}Le(Ra,Qm);Ra.prototype.g=function(){return new od(this.l,this.j)};Ra.prototype.i=function(t){return function(){return t}}({});function od(t,e){Fe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Xm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Le(od,Fe);var Xm=0;w=od.prototype;w.open=function(t,e){if(this.readyState!=Xm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ea(this)};w.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||R).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=Xm};w.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof R.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Qb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}w.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Na(this):Ea(this),this.readyState==3&&Qb(this)}};w.Za=function(t){this.g&&(this.response=this.responseText=t,Na(this))};w.Ya=function(t){this.g&&(this.response=t,Na(this))};w.ka=function(){this.g&&Na(this)};function Na(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ea(t)}w.setRequestHeader=function(t,e){this.v.append(t,e)};w.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};w.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var nj=R.JSON.parse;function me(t){Fe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Yb,this.L=this.M=!1}Le(me,Fe);var Yb="",rj=/^https?$/i,ij=["POST","PUT"];w=me.prototype;w.Oa=function(t){this.M=t};w.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nm.g(),this.C=this.u?ib(this.u):ib(Nm),this.g.onreadystatechange=We(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ab(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=R.FormData&&t instanceof R.FormData,!(0<=hb(ij,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Xb(this),0<this.B&&((this.L=sj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=We(this.ua,this)):this.A=Km(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ab(this,s)}};function sj(t){return ls&&typeof t.timeout=="number"&&t.ontimeout!==void 0}w.ua=function(){typeof Lm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$e(this,"timeout"),this.abort(8))};function ab(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Zb(t),ad(t)}function Zb(t){t.F||(t.F=!0,$e(t,"complete"),$e(t,"error"))}w.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$e(this,"complete"),$e(this,"abort"),ad(this))};w.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ad(this,!0)),me.$.N.call(this)};w.La=function(){this.s||(this.G||this.v||this.l?Jb(this):this.kb())};w.kb=function(){Jb(this)};function Jb(t){if(t.h&&typeof Lm<"u"&&(!t.C[1]||yn(t)!=4||t.da()!=2)){if(t.v&&yn(t)==4)Km(t.La,0,t);else if($e(t,"readystatechange"),yn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(jb)[1]||null;!i&&R.self&&R.self.location&&(i=R.self.location.protocol.slice(0,-1)),r=!rj.test(i?i.toLowerCase():"")}n=r}if(n)$e(t,"complete"),$e(t,"success");else{t.m=6;try{var s=2<yn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Zb(t)}}finally{ad(t)}}}}function ad(t,e){if(t.g){Xb(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||$e(t,"ready");try{n.onreadystatechange=r}catch{}}}function Xb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(R.clearTimeout(t.A),t.A=null)}w.isActive=function(){return!!this.g};function yn(t){return t.g?t.g.readyState:0}w.da=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}};w.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};w.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),nj(e)}};function cb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Yb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function oj(t){let e={};t=(t.g&&2<=yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ga(t[r]))continue;var n=P2(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}A2(e,function(r){return r.join(", ")})}w.Ia=function(){return this.m};w.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function eS(t){let e="";return jm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ey(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=eS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):de(t,e,n))}function la(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tS(t){this.Ga=0,this.j=[],this.l=new ed,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=la("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=la("baseRetryDelayMs",5e3,t),this.hb=la("retryDelaySeedMs",1e4,t),this.eb=la("forwardChannelMaxRetries",2,t),this.xa=la("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new qb(t&&t.concurrentRequestLimit),this.Ja=new X2,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}w=tS.prototype;w.ra=8;w.H=1;function ty(t){if(nS(t),t.H==3){var e=t.W++,n=On(t.I);if(de(n,"SID",t.K),de(n,"RID",e),de(n,"TYPE","terminate"),xa(t,n),e=new Sa(t,t.l,e),e.L=2,e.A=sd(On(n)),n=!1,R.navigator&&R.navigator.sendBeacon)try{n=R.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&R.Image&&(new Image().src=e.A,n=!0),n||(e.g=lS(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Aa(e)}cS(t)}function cd(t){t.g&&(ry(t),t.g.cancel(),t.g=null)}function nS(t){cd(t),t.u&&(R.clearTimeout(t.u),t.u=null),zl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&R.clearTimeout(t.m),t.m=null)}function ud(t){if(!zb(t.i)&&!t.m){t.m=!0;var e=t.Na;ya||Cb(),_a||(ya(),_a=!0),Wm.add(e,t),t.C=0}}function aj(t,e){return Wb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Da(We(t.Na,t,e),aS(t,t.C)),t.C++,!0)}w.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Sa(this,this.l,t),s=this.s;if(this.U&&(s?(s=mb(s),yb(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rS(this,i,e),n=On(this.I),de(n,"RID",t),de(n,"CVER",22),this.F&&de(n,"X-HTTP-Session-Id",this.F),xa(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(eS(s)))+"&"+e:this.o&&ey(n,this.o,s)),Jm(this.i,i),this.bb&&de(n,"TYPE","init"),this.P?(de(n,"$req",e),de(n,"SID","null"),i.aa=!0,Pm(i,n,null)):Pm(i,n,e),this.H=2}}else this.H==3&&(t?ub(this,t):this.j.length==0||zb(this.i)||ub(this))};function ub(t,e){var n;e?n=e.m:n=t.W++;let r=On(t.I);de(r,"SID",t.K),de(r,"RID",n),de(r,"AID",t.V),xa(t,r),t.o&&t.s&&ey(r,t.o,t.s),n=new Sa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Jm(t.i,n),Pm(n,r,e)}function xa(t,e){t.na&&jm(t.na,function(n,r){de(e,r,n)}),t.h&&Ub({},function(n,r){de(e,r,n)})}function rS(t,e,n){n=Math.min(t.j.length,n);var r=t.h?We(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{ej(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function iS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ya||Cb(),_a||(ya(),_a=!0),Wm.add(e,t),t.A=0}}function ny(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Da(We(t.Ma,t),aS(t,t.A)),t.A++,!0)}w.Ma=function(){if(this.u=null,sS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Da(We(this.jb,this),t)}};w.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tt(10),cd(this),sS(this))};function ry(t){t.B!=null&&(R.clearTimeout(t.B),t.B=null)}function sS(t){t.g=new Sa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=On(t.wa);de(e,"RID","rpc"),de(e,"SID",t.K),de(e,"AID",t.V),de(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&de(e,"TO",t.qa),de(e,"TYPE","xmlhttp"),xa(t,e),t.o&&t.s&&ey(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=sd(On(e)),n.u=null,n.S=!0,Ob(n,t)}w.ib=function(){this.v!=null&&(this.v=null,cd(this),ny(this),tt(19))};function zl(t){t.v!=null&&(R.clearTimeout(t.v),t.v=null)}function oS(t,e){var n=null;if(t.g==e){zl(t),ry(t),t.g=null;var r=2}else if(km(t.i,e))n=e.F,Gb(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=td(),$e(r,new Nb(r,n)),ud(t)}else iS(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&aj(t,e)||r==2&&ny(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ii(t,5);break;case 4:ii(t,10);break;case 3:ii(t,6);break;default:ii(t,2)}}}function aS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ii(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=We(t.pb,t);n||(n=new si("//www.google.com/images/cleardot.gif"),R.location&&R.location.protocol=="http"||Hl(n,"https"),sd(n)),tj(n.toString(),r)}else tt(2);t.H=0,t.h&&t.h.za(e),cS(t),nS(t)}w.pb=function(t){t?(this.l.info("Successfully pinged google.com"),tt(2)):(this.l.info("Failed to ping google.com"),tt(1))};function cS(t){if(t.H=0,t.ma=[],t.h){let e=Kb(t.i);(e.length!=0||t.j.length!=0)&&(eb(t.ma,e),eb(t.ma,t.j),t.i.i.length=0,Vm(t.j),t.j.length=0),t.h.ya()}}function uS(t,e,n){var r=n instanceof si?On(n):new si(n);if(r.g!="")e&&(r.g=e+"."+r.g),ql(r,r.m);else{var i=R.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new si(null);r&&Hl(s,r),e&&(s.g=e),i&&ql(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&de(r,n,e),de(r,"VER",t.ra),xa(t,r),r}function lS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new me(new Ra({ob:n})):new me(t.va),e.Oa(t.J),e}w.isActive=function(){return!!this.h&&this.h.isActive(this)};function dS(){}w=dS.prototype;w.Ba=function(){};w.Aa=function(){};w.za=function(){};w.ya=function(){};w.isActive=function(){return!0};w.Va=function(){};function Wl(){if(ls&&!(10<=Number(C2)))throw Error("Environmental error: no available transport.")}Wl.prototype.g=function(t,e){return new mt(t,e)};function mt(t,e){Fe.call(this),this.g=new tS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ga(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ga(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new hs(this)}Le(mt,Fe);mt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;tt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=uS(t,null,t.Y),ud(t)};mt.prototype.close=function(){ty(this.g)};mt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=zm(t),t=n);e.j.push(new Y2(e.fb++,t)),e.H==3&&ud(e)};mt.prototype.N=function(){this.g.h=null,delete this.j,ty(this.g),delete this.g,mt.$.N.call(this)};function hS(t){Ym.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Le(hS,Ym);function fS(){Zm.call(this),this.status=1}Le(fS,Zm);function hs(t){this.g=t}Le(hs,dS);hs.prototype.Ba=function(){$e(this.g,"a")};hs.prototype.Aa=function(t){$e(this.g,new hS(t))};hs.prototype.za=function(t){$e(this.g,new fS)};hs.prototype.ya=function(){$e(this.g,"b")};function cj(){this.blockSize=-1}function Ht(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Le(Ht,cj);Ht.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function wm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ht.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)wm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){wm(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){wm(this,r),i=0;break}}this.h=i,this.i+=e};Ht.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function oe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var uj={};function iy(t){return-128<=t&&128>t?I2(t,function(e){return new oe([e|0],0>e?-1:0)}):new oe([t|0],0>t?-1:0)}function _n(t){if(isNaN(t)||!isFinite(t))return us;if(0>t)return Be(_n(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Om;return new oe(e,0)}function pS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Be(pS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_n(Math.pow(e,8)),r=us,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=_n(Math.pow(e,s)),r=r.R(s).add(_n(o))):(r=r.R(n),r=r.add(_n(o)))}return r}var Om=4294967296,us=iy(0),Fm=iy(1),lb=iy(16777216);w=oe.prototype;w.ea=function(){if(Rt(this))return-Be(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Om+r)*e,e*=Om}return t};w.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(kn(this))return"0";if(Rt(this))return"-"+Be(this).toString(t);for(var e=_n(Math.pow(t,6)),n=this,r="";;){var i=Kl(n,e).g;n=Gl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,kn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};w.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function kn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rt(t){return t.h==-1}w.X=function(t){return t=Gl(this,t),Rt(t)?-1:kn(t)?0:1};function Be(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new oe(n,~t.h).add(Fm)}w.abs=function(){return Rt(this)?Be(this):this};w.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new oe(n,n[n.length-1]&-2147483648?-1:0)};function Gl(t,e){return t.add(Be(e))}w.R=function(t){if(kn(this)||kn(t))return us;if(Rt(this))return Rt(t)?Be(this).R(Be(t)):Be(Be(this).R(t));if(Rt(t))return Be(this.R(Be(t)));if(0>this.X(lb)&&0>t.X(lb))return _n(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,$l(n,2*r+2*i),n[2*r+2*i+1]+=s*c,$l(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,$l(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,$l(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new oe(n,0)};function $l(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function da(t,e){this.g=t,this.h=e}function Kl(t,e){if(kn(e))throw Error("division by zero");if(kn(t))return new da(us,us);if(Rt(t))return e=Kl(Be(t),e),new da(Be(e.g),Be(e.h));if(Rt(e))return e=Kl(t,Be(e)),new da(Be(e.g),e.h);if(30<t.g.length){if(Rt(t)||Rt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fm,r=e;0>=r.X(t);)n=db(n),r=db(r);var i=as(n,1),s=as(r,1);for(r=as(r,2),n=as(n,2);!kn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=as(r,1),n=as(n,1)}return e=Gl(t,i.R(e)),new da(i,e)}for(i=us;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=_n(n),o=s.R(e);Rt(o)||0<o.X(t);)n-=r,s=_n(n),o=s.R(e);kn(s)&&(s=Fm),i=i.add(s),t=Gl(t,o)}return new da(i,t)}w.gb=function(t){return Kl(this,t).h};w.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new oe(n,this.h&t.h)};w.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new oe(n,this.h|t.h)};w.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new oe(n,this.h^t.h)};function db(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new oe(n,t.h)}function as(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new oe(i,t.h)}Wl.prototype.createWebChannel=Wl.prototype.g;mt.prototype.send=mt.prototype.u;mt.prototype.open=mt.prototype.m;mt.prototype.close=mt.prototype.close;nd.NO_ERROR=0;nd.TIMEOUT=8;nd.HTTP_ERROR=6;xb.COMPLETE="complete";Pb.EventType=ba;ba.OPEN="a";ba.CLOSE="b";ba.ERROR="c";ba.MESSAGE="d";Fe.prototype.listen=Fe.prototype.O;me.prototype.listenOnce=me.prototype.P;me.prototype.getLastError=me.prototype.Sa;me.prototype.getLastErrorCode=me.prototype.Ia;me.prototype.getStatus=me.prototype.da;me.prototype.getResponseJson=me.prototype.Wa;me.prototype.getResponseText=me.prototype.ja;me.prototype.send=me.prototype.ha;me.prototype.setWithCredentials=me.prototype.Oa;Ht.prototype.digest=Ht.prototype.l;Ht.prototype.reset=Ht.prototype.reset;Ht.prototype.update=Ht.prototype.j;oe.prototype.add=oe.prototype.add;oe.prototype.multiply=oe.prototype.R;oe.prototype.modulo=oe.prototype.gb;oe.prototype.compare=oe.prototype.X;oe.prototype.toNumber=oe.prototype.ea;oe.prototype.toString=oe.prototype.toString;oe.prototype.getBits=oe.prototype.D;oe.fromNumber=_n;oe.fromString=pS;var gS=qt.createWebChannelTransport=function(){return new Wl},mS=qt.getStatEventTarget=function(){return td()},ld=qt.ErrorCode=nd,yS=qt.EventType=xb,_S=qt.Event=oi,sy=qt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},O8=qt.FetchXmlHttpFactory=Ra,Pa=qt.WebChannel=Pb,vS=qt.XhrIo=me,wS=qt.Md5=Ht,ai=qt.Integer=oe;var IS="@firebase/firestore";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var ks="10.7.0";var di=new dn("@firebase/firestore");function Ma(){return di.logLevel}function T(t,...e){if(di.logLevel<=B.DEBUG){let n=e.map(W_);di.debug(`Firestore (${ks}): ${t}`,...n)}}function Vn(t,...e){if(di.logLevel<=B.ERROR){let n=e.map(W_);di.error(`Firestore (${ks}): ${t}`,...n)}}function Es(t,...e){if(di.logLevel<=B.WARN){let n=e.map(W_);di.warn(`Firestore (${ks}): ${t}`,...n)}}function W_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function k(t="Unexpected state"){let e=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function Re(t,e){t||k()}function ee(t,e){return t}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=class extends gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ln=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var pd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},hy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},fy=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ln,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ln)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new pd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Ve(e)}},py=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new py(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},my=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new my(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function lj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _y=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=lj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function se(t,e){return t<e?-1:t>e?1:0}function Ts(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&k(),r===void 0?r=e.length-n:r>e.length-n&&k(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ie=class t extends gd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new C(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nt=class t extends gd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return dj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new C(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new C(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new C(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var S=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ie.fromString(e))}static fromName(e){return new t(Ie.fromString(e).popFirst(5))}static empty(){return new t(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ie(e.slice()))}};var vy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};vy.UNKNOWN_ID=-1;function hj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new hi(i,S.empty(),e)}function fj(t){return new hi(t.readTime,t.key,-1)}var hi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),S.empty(),-1)}static max(){return new t(V.max(),S.empty(),-1)}};function pj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=S.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var gj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function G_(t){return p(this,null,function*(){if(t.code!==m.FAILED_PRECONDITION||t.message!==gj)throw t;T("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function tc(t){return t.name==="IndexedDbTransactionError"}var ZS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Vd(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function mj(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var yj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],W8=[...yj,"documentOverlays"],_j=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vj=_j,G8=[...vj,"indexConfiguration","indexState","indexEntries"];function ES(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nc(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ee=class t{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ms(this.root,e,this.comparator,!0)}},ms=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();let e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}};wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class t{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new md(this.data.getIterator())}getIteratorFrom(e){return new md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},md=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ci=class t{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ye(Nt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ts(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var yd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(t){if(Re(!!t),typeof t=="string"){let e=0,n=wj.exec(t);if(Re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ye(t.seconds),nanos:ye(t.nanos)}}function ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}function K_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Q_(t){let e=t.mapValue.fields.__previous_value__;return K_(e)?Q_(e):e}function Ba(t){let e=mr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var Iy=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},_d=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var dd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K_(t)?4:XS(t)?9007199254740991:10:k()}function En(t,e){if(t===e)return!0;let n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ba(t).isEqual(Ba(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=mr(i.timestampValue),a=mr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ye(i.geoPointValue.latitude)===ye(s.geoPointValue.latitude)&&ye(i.geoPointValue.longitude)===ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ye(i.integerValue)===ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ye(i.doubleValue),a=ye(s.doubleValue);return o===a?ja(o)===ja(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ts(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ES(o)!==ES(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!En(o[c],a[c])))return!1;return!0}(t,e);default:return k()}}function $a(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function Cs(t,e){if(t===e)return 0;let n=fi(t),r=fi(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ye(s.integerValue||s.doubleValue),c=ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return TS(t.timestampValue,e.timestampValue);case 4:return TS(Ba(t),Ba(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){let a=yr(s),c=yr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=se(a[u],c[u]);if(l!==0)return l}return se(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=se(ye(s.latitude),ye(o.latitude));return a!==0?a:se(ye(s.longitude),ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Cs(a[u],c[u]);if(l)return l}return se(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===dd.mapValue&&o===dd.mapValue)return 0;if(s===dd.mapValue)return 1;if(o===dd.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=se(c[d],l[d]);if(h!==0)return h;let f=Cs(a[c[d]],u[l[d]]);if(f!==0)return f}return se(c.length,l.length)}(t.mapValue,e.mapValue);default:throw k()}}function TS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=mr(t),r=mr(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function Ds(t){return Ey(t)}function Ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return S.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Ey(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Ey(n.fields[o])}`;return i+"}"}(t.mapValue):k()}function CS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Y_(t){return!!t&&"arrayValue"in t}function DS(t){return!!t&&"nullValue"in t}function bS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oy(t){return!!t&&"mapValue"in t}function Oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return nc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oa(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Fn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(n)}setAll(e){let n=Nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Oa(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());oy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];oy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){nc(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Oa(this.value))}};var zt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var bs=class{constructor(e,n){this.position=e,this.inclusive=n}};function SS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=S.comparator(S.fromName(o.referenceValue),n.key):r=Cs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function AS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}var Ss=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Ij(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vd=class{},Ae=class t extends vd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Dy(e,n,r):n==="array-contains"?new Ay(e,r):n==="in"?new Ry(e,r):n==="not-in"?new Ny(e,r):n==="array-contains-any"?new xy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new by(e,r):new Sy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cs(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(Cs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wt=class t extends vd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return e0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function e0(t){return t.op==="and"}function t0(t){return Ej(t)&&e0(t)}function Ej(t){for(let e of t.filters)if(e instanceof Wt)return!1;return!0}function Cy(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+Ds(t.value);if(t0(t))return t.filters.map(e=>Cy(e)).join(",");{let e=t.filters.map(n=>Cy(n)).join(",");return`${t.op}(${e})`}}function n0(t,e){return t instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(t,e):t instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&n0(o,i.filters[a]),!0):!1}(t,e):void k()}function r0(t){return t instanceof Ae?function(n){return`${n.field.canonicalString()} ${n.op} ${Ds(n.value)}`}(t):t instanceof Wt?function(n){return n.op.toString()+" {"+n.getFilters().map(r0).join(" ,")+"}"}(t):"Filter"}var Dy=class extends Ae{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){let n=S.comparator(e.key,this.key);return this.matchesComparison(n)}},by=class extends Ae{constructor(e,n){super(e,"in",n),this.keys=i0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Sy=class extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=i0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function i0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}var Ay=class extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Y_(n)&&$a(n.arrayValue,this.value)}},Ry=class extends Ae{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&$a(this.value.arrayValue,n)}},Ny=class extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!$a(this.value.arrayValue,n)}},xy=class extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Y_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$a(this.value.arrayValue,r))}};var Py=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function RS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Py(t,e,n,r,i,s,o)}function Z_(t){let e=ee(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ds(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ds(r)).join(",")),e.ce=n}return e.ce}function J_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ij(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AS(t.startAt,e.startAt)&&AS(t.endAt,e.endAt)}function My(t){return S.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var pi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Tj(t,e,n,r,i,s,o,a){return new pi(t,e,n,r,i,s,o,a)}function s0(t){return new pi(t)}function NS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o0(t){return t.collectionGroup!==null}function Fa(t){let e=ee(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(Nt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ss(s,r))}),n.has(Nt.keyField().canonicalString())||e.le.push(new Ss(Nt.keyField(),r))}return e.le}function In(t){let e=ee(t);return e.he||(e.he=Cj(e,Fa(t))),e.he}function Cj(t,e){if(t.limitType==="F")return RS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ss(i.field,s)});let n=t.endAt?new bs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bs(t.startAt.position,t.startAt.inclusive):null;return RS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ky(t,e){let n=t.filters.concat([e]);return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Oy(t,e,n){return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ud(t,e){return J_(In(t),In(e))&&t.limitType===e.limitType}function a0(t){return`${Z_(In(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>r0(i)).join(", ")}]`),Vd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ds(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ds(i)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):S.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Fa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=SS(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Fa(r),i)||r.endAt&&!function(o,a,c){let u=SS(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Fa(r),i))}(t,e)}function Dj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c0(t){return(e,n)=>{let r=!1;for(let i of Fa(t)){let s=bj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bj(t,e,n){let r=t.field.isKeyField()?S.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Cs(c,u):k()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return k()}}var _r=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return JS(this.inner)}size(){return this.innerSize}};var Sj=new Ee(S.comparator);function vr(){return Sj}var u0=new Ee(S.comparator);function ka(...t){let e=u0;for(let n of t)e=e.insert(n.key,n);return e}function Aj(t){let e=u0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return La()}function l0(){return La()}function La(){return new _r(t=>t.toString(),(t,e)=>t.isEqual(e))}var Q8=new Ee(S.comparator),Rj=new Ye(S.comparator);function Z(...t){let e=Rj;for(let n of t)e=e.add(n);return e}var Nj=new Ye(se);function xj(){return Nj}function d0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function h0(t){return{integerValue:""+t}}function Pj(t,e){return mj(e)?h0(e):d0(t,e)}var As=class{constructor(){this._=void 0}};function Mj(t,e,n){return t instanceof Ha?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&K_(s)&&(s=Q_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rs?f0(t,e):t instanceof Ns?p0(t,e):function(i,s){let o=Oj(i,s),a=xS(o)+xS(i.Ie);return Ty(o)&&Ty(i.Ie)?h0(a):d0(i.serializer,a)}(t,e)}function kj(t,e,n){return t instanceof Rs?f0(t,e):t instanceof Ns?p0(t,e):n}function Oj(t,e){return t instanceof qa?function(r){return Ty(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ha=class extends As{},Rs=class extends As{constructor(e){super(),this.elements=e}};function f0(t,e){let n=g0(e);for(let r of t.elements)n.some(i=>En(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ns=class extends As{constructor(e){super(),this.elements=e}};function p0(t,e){let n=g0(e);for(let r of t.elements)n=n.filter(i=>!En(i,r));return{arrayValue:{values:n}}}var qa=class extends As{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function xS(t){return ye(t.integerValue||t.doubleValue)}function g0(t){return Y_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Fj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Ns&&i instanceof Ns?Ts(r.elements,i.elements,En):r instanceof qa&&i instanceof qa?En(r.Ie,i.Ie):r instanceof Ha&&i instanceof Ha}(t.transform,e.transform)}var Va=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var za=class{};function m0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fy(t.key,Va.none()):new Wa(t.key,t.data,Va.none());{let n=t.data,r=Fn.empty(),i=new Ye(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xs(t.key,r,new ci(i.toArray()),Va.none())}}function Lj(t,e,n){t instanceof Wa?function(i,s,o){let a=i.value.clone(),c=MS(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(i,s,o){if(!fd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=MS(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(y0(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ua(t,e,n,r){return t instanceof Wa?function(s,o,a,c){if(!fd(s.precondition,o))return a;let u=s.value.clone(),l=kS(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(s,o,a,c){if(!fd(s.precondition,o))return a;let u=kS(s.fieldTransforms,c,o),l=o.data;return l.setAll(y0(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return fd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function PS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ts(r,i,(s,o)=>Fj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Wa=class extends za{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xs=class extends za{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function y0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function MS(t,e,n){let r=new Map;Re(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kj(o,a,n[i]))}return r}function kS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Mj(s,o,e))}return r}var Fy=class extends za{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Ly=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Lj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=l0();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=m0(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,(n,r)=>PS(n,r))&&Ts(this.baseMutations,e.baseMutations,(n,r)=>PS(n,r))}};var Vy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Uy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var be,K;function _0(t){if(t===void 0)return Vn("GRPC error has no .code"),m.UNKNOWN;switch(t){case be.OK:return m.OK;case be.CANCELLED:return m.CANCELLED;case be.UNKNOWN:return m.UNKNOWN;case be.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case be.INTERNAL:return m.INTERNAL;case be.UNAVAILABLE:return m.UNAVAILABLE;case be.UNAUTHENTICATED:return m.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case be.NOT_FOUND:return m.NOT_FOUND;case be.ALREADY_EXISTS:return m.ALREADY_EXISTS;case be.PERMISSION_DENIED:return m.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case be.ABORTED:return m.ABORTED;case be.OUT_OF_RANGE:return m.OUT_OF_RANGE;case be.UNIMPLEMENTED:return m.UNIMPLEMENTED;case be.DATA_LOSS:return m.DATA_LOSS;default:return k()}}(K=be||(be={}))[K.OK=0]="OK",K[K.CANCELLED=1]="CANCELLED",K[K.UNKNOWN=2]="UNKNOWN",K[K.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",K[K.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",K[K.NOT_FOUND=5]="NOT_FOUND",K[K.ALREADY_EXISTS=6]="ALREADY_EXISTS",K[K.PERMISSION_DENIED=7]="PERMISSION_DENIED",K[K.UNAUTHENTICATED=16]="UNAUTHENTICATED",K[K.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",K[K.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",K[K.ABORTED=10]="ABORTED",K[K.OUT_OF_RANGE=11]="OUT_OF_RANGE",K[K.UNIMPLEMENTED=12]="UNIMPLEMENTED",K[K.INTERNAL=13]="INTERNAL",K[K.UNAVAILABLE=14]="UNAVAILABLE",K[K.DATA_LOSS=15]="DATA_LOSS";var OS=null;function Vj(){return new TextEncoder}var Uj=new ai([4294967295,4294967295],0);function FS(t){let e=Vj().encode(t),n=new wS;return n.update(e),new Uint8Array(n.digest())}function LS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ai([n,r],0),new ai([i,s],0)]}var jy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new li(`Invalid padding: ${n}`);if(r<0)throw new li(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new li(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new li(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ai.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ai.fromNumber(r)));return i.compare(Uj)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=FS(e),[r,i]=LS(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=FS(e),[r,i]=LS(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},li=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new Ee(se),vr(),Z())}},Ga=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Z(),Z(),Z())}};var _s=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Id=class{constructor(e,n){this.targetId=e,this.fe=n}},Ed=class{constructor(e,n,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Td=class{constructor(){this.ge=0,this.pe=US(),this.ye=nt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Z(),n=Z(),r=Z();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:k()}}),new Ga(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=US()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Re(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},By=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=vr(),this.Qe=VS(),this.Ke=new Ee(se)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:k()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(My(s))if(r===0){let o=new S(s.path);this.We(n,o,zt.newNoDocument(o,V.min()))}else Re(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}OS?.tt(function(l,d,h,f,g){var _,I,b,$,te,ne;let _e={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ae=d.unchangedNames;return ae&&(_e.bloomFilter={applied:g===0,hashCount:(_=ae?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:($=(b=(I=ae?.bits)===null||I===void 0?void 0:I.bitmap)===null||b===void 0?void 0:b.length)!==null&&$!==void 0?$:0,padding:(ne=(te=ae?.bits)===null||te===void 0?void 0:te.padding)!==null&&ne!==void 0?ne:0,mightContain:ut=>{var $n;return($n=f?.mightContain(ut))!==null&&$n!==void 0&&$n}}),_e}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=yr(r).toUint8Array()}catch(c){if(c instanceof yd)return Es("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jy(o,i,s)}catch(c){return Es(c instanceof li?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&My(a.target)){let c=new S(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,zt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Z();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new wd(e,n,this.Ke,this.qe,r);return this.qe=vr(),this.Qe=VS(),this.Ke=new Ee(se),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Td,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ye(se),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||T("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Td),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function VS(){return new Ee(S.comparator)}function US(){return new Ee(S.comparator)}var jj=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Bj=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$j=(()=>({and:"AND",or:"OR"}))(),$y=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Hy(t,e){return t.useProto3Json||Vd(e)?e:{value:e}}function qy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vs(t){return Re(!!t),V.fromTimestamp(function(n){let r=mr(n);return new Qe(r.seconds,r.nanos)}(t))}function w0(t,e){return function(r){return new Ie(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function I0(t){let e=Ie.fromString(t);return Re(D0(e)),e}function ay(t,e){let n=I0(e);if(n.get(1)!==t.databaseId.projectId)throw new C(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new S(E0(n))}function zy(t,e){return w0(t.databaseId,e)}function Hj(t){let e=I0(t);return e.length===4?Ie.emptyPath():E0(e)}function jS(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function E0(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(Re(l===void 0||typeof l=="string"),nt.fromBase64String(l||"")):(Re(l===void 0||l instanceof Uint8Array),nt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?m.UNKNOWN:_0(u.code);return new C(l,u.message||"")}(o);n=new Ed(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ay(t,r.document.name),s=vs(r.document.updateTime),o=r.document.createTime?vs(r.document.createTime):V.min(),a=new Fn({mapValue:{fields:r.document.fields}}),c=zt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new _s(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ay(t,r.document),s=r.readTime?vs(r.readTime):V.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _s([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ay(t,r.document),s=r.removedTargetIds||[];n=new _s([],s,i,null)}else{if(!("filter"in e))return k();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Uy(i,s),a=r.targetId;n=new Id(a,o)}}return n}function zj(t,e){return{documents:[zy(t,e.path)]}}function Wj(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=zy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return C0(Wt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let s=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ps(d.field),direction:Qj(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=Hy(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function Gj(t){let e=Hj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Re(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=T0(d);return h instanceof Wt&&t0(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new Ss(gs(g.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Vd(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new bs(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new bs(f,h)}(n.endAt)),Tj(e,i,o,s,a,"F",c,u)}function Kj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=gs(n.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=gs(n.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=gs(n.unaryFilter.field);return Ae.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=gs(n.unaryFilter.field);return Ae.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):t.fieldFilter!==void 0?function(n){return Ae.create(gs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wt.create(n.compositeFilter.filters.map(r=>T0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(t):k()}function Qj(t){return jj[t]}function Yj(t){return Bj[t]}function Zj(t){return $j[t]}function ps(t){return{fieldPath:t.canonicalString()}}function gs(t){return Nt.fromServerFormat(t.fieldPath)}function C0(t){return t instanceof Ae?function(n){if(n.op==="=="){if(bS(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(DS(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bS(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(DS(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:Yj(n.op),value:n.value}}}(t):t instanceof Wt?function(n){let r=n.getFilters().map(i=>C0(i));return r.length===1?r[0]:{compositeFilter:{op:Zj(n.op),filters:r}}}(t):k()}function D0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ka=class t{constructor(e,n,r,i,s=V.min(),o=V.min(),a=nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Wy=class{constructor(e){this.ut=e}};function Jj(t){let e=Gj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oy(e,e.limit,"L"):e}var Cd=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ye(e.integerValue));else if("doubleValue"in e){let r=ye(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ja(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(yr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?XS(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):k()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),S.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Cd.St=new Cd;var Gy=class{constructor(){this.on=new Ky}addToCollectionParentIndex(e,n){return this.on.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(hi.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},Ky=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ie.comparator)).toArray()}};var Y8=new Uint8Array(0);var vn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(41943040,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);var Qa=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Qy=class{constructor(){this.changes=new _r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Zy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ua(r.mutation,i,ci.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){let i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ka();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=vr(),o=La(),a=function(){return La()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof xs)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Ua(l.mutation,u,l.mutation.getFieldMask(),Qe.now())):o.set(u.key,ci.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Yy(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=La(),i=new Ee((o,a)=>o-a),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||ci.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Z()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=l0();l.forEach(h=>{if(!s.has(h)){let f=m0(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return S.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):y.resolve(ui()),a=-1,c=s;return o.next(u=>y.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Z())).next(l=>({batchId:a,changes:Aj(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let i=ka();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ka();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,c=>{let u=function(d,h){return new pi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,zt.newInvalidDocument(l)))});let a=ka();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&Ua(l.mutation,u,ci.empty(),Qe.now()),jd(n,u)&&(a=a.insert(c,u))}),a})}};var Jy=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return y.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vs(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Jj(i.bundledQuery),readTime:vs(i.readTime)}}(n)),y.resolve()}};var Xy=class{constructor(){this.overlays=new Ee(S.comparator),this.lr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ui();return y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=ui(),s=n.length+1,o=new S(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=ui(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=ui(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return y.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vy(n,r));let s=this.lr.get(n);s===void 0&&(s=Z(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var Ya=class{constructor(){this.hr=new Ye(Se.Pr),this.Ir=new Ye(Se.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Se(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Se(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new S(new Ie([])),r=new Se(n,e),i=new Se(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new S(new Ie([])),r=new Se(n,e),i=new Se(n,e+1),s=Z();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Se(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Se=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return S.comparator(e.key,n.key)||se(e.gr,n.gr)}static Tr(e,n){return se(e.gr,n.gr)||S.comparator(e.key,n.key)}};var e_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ye(Se.Pr)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ly(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Se(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,n){return y.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Se(n,0),i=new Se(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(se);return n.forEach(i=>{let s=new Se(i,0),o=new Se(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),y.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;S.isDocumentKey(s)||(s=s.child(""));let o=new Se(new S(s),0),a=new Ye(se);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),y.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return y.forEach(n.mutations,i=>{let s=new Se(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Se(n,0),i=this.yr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var t_=class{constructor(e){this.Cr=e,this.docs=function(){return new Ee(S.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=vr(),o=n.path,a=new S(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||pj(fj(l),r)<=0||(i.has(l.key)||jd(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){k()}vr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n_(this)}getSize(e){return y.resolve(this.size)}},n_=class extends Qy{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var r_=class{constructor(e){this.persistence=e,this.Fr=new _r(n=>Z_(n),J_),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ya,this.targetCount=0,this.Nr=Qa.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),y.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.kn(n),y.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Or.containsKey(n))}};var i_=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new ZS(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new r_(this),this.indexManager=new Gy,this.remoteDocumentCache=function(i){return new t_(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Wy(n),this.Kr=new Jy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new e_(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);let i=new s_(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},s_=class extends wy{constructor(e){super(),this.currentSequenceNumber=e}},o_=class t{constructor(e){this.persistence=e,this.Gr=new Ya,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw k()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),y.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Hr,r=>{let i=S.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,V.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return y.or([()=>y.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var a_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Z(),i=Z();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var c_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var u_=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new c_;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ma()<=B.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),y.resolve()):(Ma()<=B.DEBUG&&T("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ma()<=B.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):y.resolve())}zi(e,n){if(NS(n))return y.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Oy(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Z(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,Oy(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return NS(n)||i.isEqual(V.min())?y.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?y.resolve(null):(Ma()<=B.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fs(n)),this.Xi(e,o,n,hj(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ye(c0(e));return n.forEach((i,s)=>{jd(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Ma()<=B.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",fs(n)),this.Gi.getDocumentsMatchingQuery(e,n,hi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var l_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ee(se),this.ns=new _r(s=>Z_(s),J_),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zy(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function Xj(t,e,n,r){return new l_(t,e,n,r)}function b0(t,e){return p(this,null,function*(){let n=ee(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Z();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function S0(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function eB(t,e){let n=ee(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(nt.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,I,b){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let c=vr(),u=Z();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(tB(s,o,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(V.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ts=i,s))}function tB(t,e,n){let r=Z(),i=Z();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=vr();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function nB(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ka(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function d_(t,e,n){return p(this,null,function*(){let r=ee(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!tc(o))throw o;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function BS(t,e,n){let r=ee(t),i=V.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=ee(c),h=d.ns.get(l);return h!==void 0?y.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,o,In(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:V.min(),n?s:Z())).next(a=>(rB(r,Dj(e),a),{documents:a,ls:s})))}function rB(t,e,n){let r=t.rs.get(e)||V.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var Dd=class{constructor(){this.activeTargetIds=xj()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var h_=class{constructor(){this.eo=new Dd,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Dd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var f_=class{ro(e){}shutdown(){}};var bd=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hd=null;function cy(){return hd===null?hd=function(){return 268435456+Math.round(2147483648*Math.random())}():hd++,"0x"+hd.toString(16)}var iB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var p_=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var Ke="WebChannelConnection",g_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){let a=cy(),c=this.So(n,r);T("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,c,u,i).then(l=>(T("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Es("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ks}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){let i=iB[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let s=cy();return new Promise((o,a)=>{let c=new vS;c.setWithCredentials(!0),c.listenOnce(yS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ld.NO_ERROR:let l=c.getResponseJson();T(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case ld.TIMEOUT:T(Ke,`RPC '${e}' ${s} timed out`),a(new C(m.DEADLINE_EXCEEDED,"Request time out"));break;case ld.HTTP_ERROR:let d=c.getStatus();if(T(Ke,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(I){let b=I.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(b)>=0?b:m.UNKNOWN}(f.status);a(new C(g,f.message))}else a(new C(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new C(m.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{T(Ke,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);T(Ke,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}vo(e,n,r){let i=cy(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gS(),a=mS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");T(Ke,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,g=new p_({co:I=>{f?T(Ke,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(h||(T(Ke,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),T(Ke,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},lo:()=>d.close()}),_=(I,b,$)=>{I.listen(b,te=>{try{$(te)}catch(ne){setTimeout(()=>{throw ne},0)}})};return _(d,Pa.EventType.OPEN,()=>{f||T(Ke,`RPC '${e}' stream ${i} transport opened.`)}),_(d,Pa.EventType.CLOSE,()=>{f||(f=!0,T(Ke,`RPC '${e}' stream ${i} transport closed`),g.Ro())}),_(d,Pa.EventType.ERROR,I=>{f||(f=!0,Es(Ke,`RPC '${e}' stream ${i} transport errored:`,I),g.Ro(new C(m.UNAVAILABLE,"The operation could not be completed")))}),_(d,Pa.EventType.MESSAGE,I=>{var b;if(!f){let $=I.data[0];Re(!!$);let te=$,ne=te.error||((b=te[0])===null||b===void 0?void 0:b.error);if(ne){T(Ke,`RPC '${e}' stream ${i} received error:`,ne);let _e=ne.status,ae=function(Er){let Tc=be[Er];if(Tc!==void 0)return _0(Tc)}(_e),ut=ne.message;ae===void 0&&(ae=m.INTERNAL,ut="Unknown error status: "+_e+" with message "+ne.message),f=!0,g.Ro(new C(ae,ut)),d.close()}else T(Ke,`RPC '${e}' stream ${i} received:`,$),g.Vo($)}}),_(a,_S.STAT_EVENT,I=>{I.stat===sy.PROXY?T(Ke,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===sy.NOPROXY&&T(Ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ao()},0),g}};function uy(){return typeof document<"u"?document:null}function Bd(t){return new $y(t,!0)}var Sd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var m_=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Sd(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return p(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return p(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return p(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new C(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>p(this,null,function*(){this.state=0,this.start()}))}o_(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},y_=class extends m_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=qj(this.serializer,e),r=function(s){if(!("targetChange"in s))return V.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?V.min():o.readTime?vs(o.readTime):V.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=jS(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=My(c)?{documents:zj(s,c)}:{query:Wj(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=v0(s,o.resumeToken);let u=Hy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(V.min())>0){a.readTime=qy(s,o.snapshotVersion.toTimestamp());let u=Hy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=Kj(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=jS(this.serializer),n.removeTarget=e,this.e_(n)}};var __=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new C(m.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(m.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(m.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var v_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Vn(n),this.f_=!1):T("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var w_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(()=>p(this,null,function*(){ic(this)&&(T("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=ee(c);u.C_.add(4),yield rc(u),u.M_.set("Unknown"),u.C_.delete(4),yield $d(u)})}(this))}))}),this.M_=new v_(r,i)}};function $d(t){return p(this,null,function*(){if(ic(t))for(let e of t.v_)yield e(!0)})}function rc(t){return p(this,null,function*(){for(let e of t.v_)yield e(!1)})}function A0(t,e){let n=ee(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),tv(n)?ev(n):Os(n).Ho()&&X_(n,e))}function R0(t,e){let n=ee(t),r=Os(n);n.D_.delete(e),r.Ho()&&N0(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ic(n)&&n.M_.set("Unknown"))}function X_(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Os(t).u_(e)}function N0(t,e){t.x_.Oe(e),Os(t).c_(e)}function ev(t){t.x_=new By({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Os(t).start(),t.M_.g_()}function tv(t){return ic(t)&&!Os(t).jo()&&t.D_.size>0}function ic(t){return ee(t).C_.size===0}function x0(t){t.x_=void 0}function sB(t){return p(this,null,function*(){t.D_.forEach((e,n)=>{X_(t,e)})})}function oB(t,e){return p(this,null,function*(){x0(t),tv(t)?(t.M_.w_(e),ev(t)):t.M_.set("Unknown")})}function aB(t,e,n){return p(this,null,function*(){if(t.M_.set("Online"),e instanceof Ed&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $S(t,r)}else if(e instanceof _s?t.x_.$e(e):e instanceof Id?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(V.min()))try{let r=yield S0(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.D_.get(u);l&&s.D_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.D_.get(c);if(!l)return;s.D_.set(c,l.withResumeToken(nt.EMPTY_BYTE_STRING,l.snapshotVersion)),N0(s,c);let d=new Ka(l.target,c,u,l.sequenceNumber);X_(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){T("RemoteStore","Failed to raise snapshot:",r),yield $S(t,r)}})}function $S(t,e,n){return p(this,null,function*(){if(!tc(e))throw e;t.C_.add(1),yield rc(t),t.M_.set("Offline"),n||(n=()=>S0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){T("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield $d(t)}))})}function HS(t,e){return p(this,null,function*(){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");let r=ic(n);n.C_.add(3),yield rc(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield $d(n)})}function cB(t,e){return p(this,null,function*(){let n=ee(t);e?(n.C_.delete(2),yield $d(n)):e||(n.C_.add(2),yield rc(n),n.M_.set("Unknown"))})}function Os(t){return t.O_||(t.O_=function(n,r,i){let s=ee(n);return s.A_(),new y_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:sB.bind(null,t),Io:oB.bind(null,t),a_:aB.bind(null,t)}),t.v_.push(e=>p(this,null,function*(){e?(t.O_.Yo(),tv(t)?ev(t):t.M_.set("Unknown")):(yield t.O_.stop(),x0(t))}))),t.O_}var I_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function P0(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),tc(t))return new C(m.UNAVAILABLE,`${e}: ${t}`);throw t}var Ad=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||S.comparator(n.key,r.key):(n,r)=>S.comparator(n.key,r.key),this.keyedMap=ka(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Rd=class{constructor(){this.B_=new Ee(S.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):k():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ps=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Ad.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var E_=class{constructor(){this.k_=void 0,this.listeners=[]}},T_=class{constructor(){this.queries=new _r(e=>a0(e),Ud),this.onlineState="Unknown",this.q_=new Set}};function uB(t,e){return p(this,null,function*(){let n=ee(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new E_),i)try{s.k_=yield n.onListen(r)}catch(o){let a=P0(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&nv(n)})}function lB(t,e){return p(this,null,function*(){let n=ee(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function dB(t,e){let n=ee(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&nv(n)}function hB(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function nv(t){t.q_.forEach(e=>{e.next()})}var C_=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var Nd=class{constructor(e){this.key=e}},xd=class{constructor(e){this.key=e}},D_=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Z(),this.mutatedKeys=Z(),this._a=c0(e),this.aa=new Ad(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new Rd,i=n?n.aa:this.aa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=jd(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),I=!1;h&&f?h.data.isEqual(f.data)?g!==_&&(r.track({type:3,doc:f}),I=!0):this.ha(h,f)||(r.track({type:2,doc:f}),I=!0,(c&&this._a(f,c)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),I=!0):h&&!f&&(r.track({type:1,doc:h}),I=!0,(c||u)&&(a=!0)),I&&(f?(o=o.add(f),s=_?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((l,d)=>function(f,g){let _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return _(f)-_(g)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,u=c!==this.sa;return this.sa=c,o.length!==0||u?{snapshot:new Ps(this.query,e.aa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Rd,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=Z(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new xd(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new Nd(r))}),n}da(e){this.ia=e.ls,this.oa=Z();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Ps.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},b_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},S_=class{constructor(e){this.key=e,this.Ra=!1}},A_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new _r(a=>a0(a),Ud),this.fa=new Map,this.ga=new Set,this.pa=new Ee(S.comparator),this.ya=new Map,this.wa=new Ya,this.Sa={},this.ba=new Map,this.Da=Qa.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function fB(t,e){return p(this,null,function*(){let n=wB(t),r,i,s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{let o=yield nB(n.localStore,In(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield pB(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&A0(n.remoteStore,o)}return i})}function pB(t,e,n,r,i){return p(this,null,function*(){t.va=(d,h,f)=>function(_,I,b,$){return p(this,null,function*(){let te=I.view.ca(b);te.Zi&&(te=yield BS(_.localStore,I.query,!1).then(({documents:ut})=>I.view.ca(ut,te)));let ne=$&&$.targetChanges.get(I.targetId),_e=$&&$.targetMismatches.get(I.targetId)!=null,ae=I.view.applyChanges(te,_.isPrimaryClient,ne,_e);return zS(_,I.targetId,ae.Ta),ae.snapshot})}(t,d,h,f);let s=yield BS(t.localStore,e,!0),o=new D_(e,s.ls),a=o.ca(s.documents),c=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);zS(t,n,u.Ta);let l=new b_(e,n,o);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot})}function gB(t,e){return p(this,null,function*(){let n=ee(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!Ud(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield d_(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),R0(n.remoteStore,r.targetId),R_(n,r.targetId)}).catch(G_))):(R_(n,r.targetId),yield d_(n.localStore,r.targetId,!0))})}function M0(t,e){return p(this,null,function*(){let n=ee(t);try{let r=yield eB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.ya.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Re(o.Ra):i.removedDocuments.size>0&&(Re(o.Ra),o.Ra=!1))}),yield O0(n,r,e)}catch(r){yield G_(r)}})}function qS(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ee(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(u=!0)}),u&&nv(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mB(t,e,n){return p(this,null,function*(){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),s=i&&i.key;if(s){let o=new Ee(S.comparator);o=o.insert(s,zt.newNoDocument(s,V.min()));let a=Z().add(s),c=new wd(V.min(),new Map,new Ee(se),o,a);yield M0(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),rv(r)}else yield d_(r.localStore,e,!1).then(()=>R_(r,e,n)).catch(G_)})}function R_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||k0(t,r)})}function k0(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(R0(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),rv(t))}function zS(t,e,n){for(let r of n)r instanceof Nd?(t.wa.addReference(r.key,e),yB(t,r)):r instanceof xd?(T("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||k0(t,r.key)):k()}function yB(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(T("SyncEngine","New document in limbo: "+n),t.ga.add(r),rv(t))}function rv(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new S(Ie.fromString(e)),r=t.Da.next();t.ya.set(r,new S_(n)),t.pa=t.pa.insert(n,r),A0(t.remoteStore,new Ka(In(s0(n.path)),r,"TargetPurposeLimboResolution",ZS._e))}}function O0(t,e,n){return p(this,null,function*(){let r=ee(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=a_.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Va.a_(i),yield function(c,u){return p(this,null,function*(){let l=ee(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>y.forEach(u,h=>y.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>y.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!tc(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),g=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(g);l.ts=l.ts.insert(h,_)}}})}(r.localStore,s))})}function _B(t,e){return p(this,null,function*(){let n=ee(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());let r=yield b0(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(c=>{c.reject(new C(m.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield O0(n,r._s)}})}function vB(t,e){let n=ee(t),r=n.ya.get(e);if(r&&r.Ra)return Z().add(r.key);{let i=Z(),s=n.fa.get(e);if(!s)return i;for(let o of s){let a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function wB(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mB.bind(null,e),e.Va.a_=dB.bind(null,e.eventManager),e.Va.Fa=hB.bind(null,e.eventManager),e}var Pd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Xj(this.persistence,new u_,e.initialUser,this.serializer)}createPersistence(e){return new i_(o_.jr,this.serializer)}createSharedClientState(e){return new h_}terminate(){return p(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var N_=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_B.bind(null,this.syncEngine),yield cB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new T_}()}createDatastore(e){let n=Bd(e.databaseInfo.databaseId),r=function(s){return new g_(s)}(e.databaseInfo);return function(s,o,a,c){return new __(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new w_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>qS(this.syncEngine,n,0),function(){return bd.D()?new bd:new f_}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new A_(i,s,o,a,c,u);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return p(this,null,function*(){let r=ee(n);T("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield rc(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};var x_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var P_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=_y.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){T("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(T("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return p(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=P0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ly(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield b0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function WS(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield EB(t);T("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>HS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>HS(e.remoteStore,s)),t._onlineComponents=e})}function IB(t){return t.name==="FirebaseError"?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function EB(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){T("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ly(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!IB(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),yield ly(t,new Pd)}}else T("FirestoreClient","Using default OfflineComponentProvider"),yield ly(t,new Pd);return t._offlineComponents})}function TB(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(T("FirestoreClient","Using user provided OnlineComponentProvider"),yield WS(t,t._uninitializedComponentsProvider._online)):(T("FirestoreClient","Using default OnlineComponentProvider"),yield WS(t,new N_))),t._onlineComponents})}function CB(t){return p(this,null,function*(){let e=yield TB(t),n=e.eventManager;return n.onListen=fB.bind(null,e.syncEngine),n.onUnlisten=gB.bind(null,e.syncEngine),n})}function DB(t,e,n={}){let r=new Ln;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new x_({next:h=>{o.enqueueAndForget(()=>lB(s,d)),h.fromCache&&c.source==="server"?u.reject(new C(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new C_(a,l,{includeMetadataChanges:!0,J_:!0});return uB(s,d)}(yield CB(t),t.asyncQueue,e,n,r)})),r.promise}function F0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var GS=new Map;function bB(t,e,n){if(!n)throw new C(m.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SB(t,e,n,r){if(e===!0&&r===!0)throw new C(m.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KS(t){if(S.isDocumentKey(t))throw new C(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":k()}function M_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Hd(t);throw new C(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Md=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new C(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new C(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new C(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new C(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Za=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Md({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Md(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dy;switch(r.type){case"firstParty":return new gy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new C(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=GS.get(n);r&&(T("ComponentProvider","Removing Datastore"),GS.delete(n),r.terminate())}(this),Promise.resolve()}};function L0(t,e,n,r={}){var i;let s=(t=M_(t,Za))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ve.MOCK_USER;else{a=ul(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new C(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ve(u)}t._authCredentials=new hy(new pd(a,c))}}var Ms=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Un=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ws=class t extends Ms{constructor(e,n,r){super(e,n,s0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new S(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function V0(t,e,...n){if(t=et(t),bB("collection","path",e),t instanceof Za){let r=Ie.fromString(e,...n);return KS(r),new ws(t,null,r)}{if(!(t instanceof Un||t instanceof ws))throw new C(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return KS(r),new ws(t.firestore,null,r)}}var k_=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Sd(this,"async_queue_retry"),this.iu=()=>{let n=uy();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=uy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=uy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new Ln;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return p(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!tc(e))throw e;T("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=I_.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&k()}verifyOperationInProgress(){}uu(){return p(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};var kd=class extends Za{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new k_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||j0(this),this._firestoreClient.terminate()}};function U0(t,e){let n=typeof t=="object"?t:cr(),r=typeof t=="string"?t:e||"(default)",i=Yr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=cl("firestore");s&&L0(i,...s)}return i}function AB(t){return t._firestoreClient||j0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function j0(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Iy(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,F0(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new P_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ja=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(nt.fromBase64String(e))}catch(n){throw new C(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Od=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fd=class{constructor(e){this._methodName=e}};var Xa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var RB=/^__.*__$/;function B0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var O_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return L_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(B0(this.Iu)&&RB.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},F_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bd(e)}pu(e,n,r,i=!1){return new O_({Iu:e,methodName:n,gu:r,path:Nt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function NB(t){let e=t._freezeSettings(),n=Bd(t._databaseId);return new F_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xB(t,e,n,r=!1){return iv(n,t.pu(r?4:3,e))}function iv(t,e){if($0(t=et(t)))return MB("Unsupported field value:",e,t),PB(t,e);if(t instanceof Fd)return function(r,i){if(!B0(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=iv(a,i.Vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Qe.fromDate(r);return{timestampValue:qy(i.serializer,s)}}if(r instanceof Qe){let s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qy(i.serializer,s)}}if(r instanceof Xa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ja)return{bytesValue:v0(i.serializer,r._byteString)};if(r instanceof Un){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Hd(r)}`)}(t,e)}function PB(t,e){let n={};return JS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(t,(r,i)=>{let s=iv(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Xa||t instanceof Ja||t instanceof Un||t instanceof Fd)}function MB(t,e,n){if(!$0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Hd(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}var kB=new RegExp("[~\\*/\\[\\]]");function OB(t,e,n){if(e.search(kB)>=0)throw L_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Od(...e.split("."))._internalPath}catch{throw L_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function L_(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new C(m.INVALID_ARGUMENT,a+t+c)}var Ld=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new V_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(H0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},V_=class extends Ld{data(){return super.data()}};function H0(t,e){return typeof e=="string"?OB(t,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function FB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ec=class{},U_=class extends ec{};function q0(t,e,...n){let r=[];e instanceof ec&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof B_).length,a=s.filter(c=>c instanceof j_).length;if(o>1||o>0&&a>0)throw new C(m.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var j_=class t extends U_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return z0(e._query,n),new Ms(e.firestore,e.converter,ky(e._query,n))}_parse(e){let n=NB(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new C(m.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){YS(d,l);let f=[];for(let g of d)f.push(QS(c,s,g));h={arrayValue:{values:f}}}else h=QS(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||YS(d,l),h=xB(a,o,d,l==="in"||l==="not-in");return Ae.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var B_=class t extends ec{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)z0(o,c),o=ky(o,c)}(e._query,n),new Ms(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function QS(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new C(m.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o0(e)&&n.indexOf("/")!==-1)throw new C(m.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ie.fromString(n));if(!S.isDocumentKey(r))throw new C(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CS(t,new S(r))}if(n instanceof Un)return CS(t,n._key);throw new C(m.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function YS(t,e){if(!Array.isArray(t)||t.length===0)throw new C(m.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z0(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new C(m.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new C(m.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var $_=class{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw k()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return nc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Xa(ye(e.latitude),ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Q_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ba(e));default:return null}}convertTimestamp(e){let n=mr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ie.fromString(e);Re(D0(r));let i=new _d(r.get(1),r.get(3)),s=new S(r.popFirst(5));return i.isEqual(n)||Vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};var ys=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},H_=class extends Ld{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(H0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Is=class extends H_{data(e={}){return super.data(e)}},q_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Is(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:LB(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function LB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}var z_=class extends $_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}};function W0(t){t=M_(t,Ms);let e=M_(t.firestore,kd),n=AB(e),r=new z_(e);return FB(t._query),DB(n,t._query).then(i=>new q_(e,r,t,i))}(function(e,n=!0){(function(i){ks=i})(pn),fn(new at("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new kd(new fy(r.getProvider("auth-internal")),new yy(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new C(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fe(IS,"4.4.0",e),fe(IS,"4.4.0","esm2017")})();var gi=class{constructor(e){return e}},G0="firestore",sv=class{constructor(){return Jr(G0)}};var ov=new F("angularfire2.firestore-instances");function VB(t,e){let n=ss(G0,t,e);return n&&new gi(n)}function UB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new gi(r)}}var jB={provide:sv,deps:[[new Ce,ov]]},BB={provide:gi,useFactory:VB,deps:[[new Ce,ov],$t]},$B=(()=>{class t{constructor(){fe("angularfire",Nn.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ct({type:t});static \u0275inj=Tt({providers:[BB,jB]})}return t})();function K0(t,...e){return{ngModule:$B,providers:[{provide:ov,useFactory:UB(t),multi:!0,deps:[re,ot,lr,xn,[new Ce,ni],[new Ce,ur],...e]}]}}var Q0=Bt(V0,!0);var Y0=Bt(W0,!0);var Z0=Bt(U0,!0);var J0=Bt(q0,!0);function HB(t,e){if(t&1&&(we(0,"li"),ze(1),De()),t&2){let n=e.$implicit;Pu(),sp("",n.Name,": ",n.Message,"")}}var X0=(()=>{let e=class e{constructor(){this.firestore=E(gi),this.messages=[]}ngOnInit(){return p(this,null,function*(){let r=J0(Q0(this.firestore,"FirestoreTest"));(yield Y0(r)).forEach(s=>{let o=s.data();console.log(o),this.messages.push(o)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=sn({type:e,selectors:[["app-chatpage"]],standalone:!0,features:[on],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(i,s){i&1&&Co(0,HB,2,2,"li",0),i&2&&To("ngForOf",s.messages)},dependencies:[KT]});let t=e;return t})();var eA=[{path:"",component:UC},{path:"chatpage",component:X0}];var tA="@firebase/database",nA="1.0.2";var iw="";function qB(t){iw=t}var pv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:rs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var gv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ln(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var OA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pv(e)}}catch{}return new gv},yi=OA("localStorage"),mv=OA("sessionStorage");var Us=new dn("@firebase/database"),zB=function(){let t=1;return function(){return t++}}(),FA=function(t){let e=JC(t),n=new ol;n.update(e);let r=n.digest();return al.encodeByteArray(r)},yc=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yc.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e},_i=null,rA=!0,WB=function(t,e){v(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Us.logLevel=B.VERBOSE,_i=Us.log.bind(Us),e&&mv.set("logging_enabled",!0)):typeof t=="function"?_i=t:(_i=null,mv.remove("logging_enabled"))},Ze=function(...t){if(rA===!0&&(rA=!1,_i===null&&mv.get("logging_enabled")===!0&&WB(!0)),_i){let e=yc.apply(null,t);_i(e)}},_c=function(t){return function(...e){Ze(t,...e)}},yv=function(...t){let e="FIREBASE INTERNAL ERROR: "+yc(...t);Us.error(e)},Bn=function(...t){let e=`FIREBASE FATAL ERROR: ${yc(...t)}`;throw Us.error(e),new Error(e)},yt=function(...t){let e="FIREBASE WARNING: "+yc(...t);Us.warn(e)},GB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},LA=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},KB=function(t){if(un()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Bs="[MIN_NAME]",vi="[MAX_NAME]",Ks=function(t,e){if(t===e)return 0;if(t===Bs||e===vi)return-1;if(e===Bs||t===vi)return 1;{let n=iA(t),r=iA(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},QB=function(t,e){return t===e?0:t<e?-1:1},sc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},sw=function(t){if(typeof t!="object"||t===null)return Oe(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=sw(t[e[r]]);return n+="}",n},VA=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Mt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var UA=function(t){v(!LA(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},YB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var JB=new RegExp("^-?(0*)\\d{1,10}$"),XB=-2147483648,e$=2147483647,iA=function(t){if(JB.test(t)){let e=Number(t);if(e>=XB&&e<=e$)return e}return null},vc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw yt("Exception was thrown by user callback.",n),e},Math.floor(0))}},t$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var _v=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){yt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var vv=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yt(e)}},dc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),zd="5",jA="v",BA="s",$A="r",HA="f",qA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zA="ls",WA="p",wv="ac",GA="websocket",KA="long_polling";var Wd=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function n$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function QA(t,e,n){v(typeof e=="string","typeof type must == string"),v(typeof n=="object","typeof params must == object");let r;if(e===GA)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===KA)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);n$(t)&&(n.ns=t.namespace);let i=[];return Mt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Iv=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ln(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $C(this.counters_)}};var av={},cv={};function ow(t){let e=t.toString();return av[e]||(av[e]=new Iv),av[e]}function r$(t,e){let n=t.toString();return cv[n]||(cv[n]=e()),cv[n]}var Ev=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var sA="start",i$="close",s$="pLPCommand",o$="pRTLPCB",YA="id",ZA="pw",JA="ser",a$="cb",c$="seg",u$="ts",l$="d",d$="dframe",XA=1870,eR=30,h$=XA-eR,f$=25e3,p$=3e4,Tv=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_c(e),this.stats_=ow(n),this.urlFn=c=>(this.appCheckToken&&(c[wv]=this.appCheckToken),QA(n,KA,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ev(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(p$)),KB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cv((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sA)this.id=a,this.password=c;else if(o===i$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[sA]="t",r[JA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[a$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jA]=zd,this.transportSessionId&&(r[BA]=this.transportSessionId),this.lastSessionId&&(r[zA]=this.lastSessionId),this.applicationId&&(r[WA]=this.applicationId),this.appCheckToken&&(r[wv]=this.appCheckToken),typeof location<"u"&&location.hostname&&qA.test(location.hostname)&&(r[$A]=HA);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return un()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YB()&&!ZB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=pg(n),i=VA(r,h$);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(un())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[d$]="t",r[YA]=e,r[ZA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Cv=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,un())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=zB(),window[s$+this.uniqueCallbackIdentifier]=e,window[o$+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ze("frame writing exception"),a.stack&&Ze(a.stack),Ze(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ze("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[YA]=this.myID,e[ZA]=this.myPW,e[JA]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eR+r.length<=XA;){let o=this.pendingSegs.shift();r=r+"&"+c$+i+"="+o.seg+"&"+u$+i+"="+o.ts+"&"+l$+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(f$)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){un()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var g$=16384,m$=45e3,Gd=null;typeof MozWebSocket<"u"?Gd=MozWebSocket:typeof WebSocket<"u"&&(Gd=WebSocket);var oc=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_c(this.connId),this.stats_=ow(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[jA]=zd,!un()&&typeof location<"u"&&location.hostname&&qA.test(location.hostname)&&(a[$A]=HA),r&&(a[BA]=r),i&&(a[zA]=i),s&&(a[wv]=s),o&&(a[WA]=o),QA(n,GA,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yi.set("previous_websocket_failure",!0);try{let i;if(un()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${zd}/${iw}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Gd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Gd!==null&&!t.forceDisallow_}static previouslyFailed(){return yi.isInMemoryStorage||yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){yi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=rs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(v(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Oe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=VA(r,g$);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(m$))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),y$=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Tv,oc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=oc&&oc.isAvailable(),i=r&&!oc.previouslyFailed();if(n.webSocketOnly&&(r||yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[oc];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),_$=6e4,v$=5e3,w$=10*1024,I$=100*1024,uv="t",oA="d",E$="s",aA="r",T$="e",cA="o",uA="a",lA="n",dA="p",C$="h",Dv=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_c("c:"+this.id+":"),this.transportManager_=new y$(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>I$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>w$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(uv in e){let n=e[uv];n===uA?this.upgradeIfSecondaryHealthy_():n===aA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=sc("t",e),r=sc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=sc("t",e),r=sc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=sc(uv,e);if(oA in e){let r=e[oA];if(n===C$){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===lA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===E$?this.onConnectionShutdown_(r):n===aA?this.onReset_(r):n===T$?yv("Server Error: "+r):n===cA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yv("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zd!==r&&yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),lc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(v$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dA,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Kd=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Qd=class{constructor(e){this.allowedEvents_=e,this.listeners_={},v(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){v(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Yd=class t extends Qd{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Zo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return v(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var hA=32,fA=768,le=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ce(){return new le("")}function Q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ir(t){return t.pieces_.length-t.pieceNum_}function he(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function tR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function D$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function nR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rR(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function Ue(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new le(n,0)}function H(t){return t.pieceNum_>=t.pieces_.length}function xt(t,e){let n=Q(t),r=Q(e);if(n===null)return e;if(n===r)return xt(he(t),he(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function iR(t,e){if(Ir(t)!==Ir(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Kt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ir(t)>Ir(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var bv=class{constructor(e,n){this.errorPrefix_=n,this.parts_=nR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ea(this.parts_[r]);sR(this)}};function b$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ea(e),sR(t)}function S$(t){let e=t.parts_.pop();t.byteLength_-=ea(e),t.parts_.length>0&&(t.byteLength_-=1)}function sR(t){if(t.byteLength_>fA)throw new Error(t.errorPrefix_+"has a key path longer than "+fA+" bytes ("+t.byteLength_+").");if(t.parts_.length>hA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hA+") or object contains a cycle "+mi(t))}function mi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Sv=class t extends Qd{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return v(e==="visible","Unknown event type: "+e),[this.visible_]}};var ac=1e3,A$=60*5*1e3,pA=30*1e3,R$=1.3,N$=3e4,x$="server_kill",gA=3,aw=(()=>{class t extends Kd{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=_c("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ac,this.maxReconnectDelay_=A$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!un())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Yd.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Oe(o)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Hr,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ln(n,"w")){let i=zr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||QC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pA)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=KC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Oe(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):yv("Unrecognized action received from server: "+Oe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>N$&&(this.reconnectDelay_=ac),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*R$)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){v(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Dv(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{yt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(x$)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&yt(h),u())}}})}interrupt(n){Ze("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ze("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Jo(this.interruptReasons_)&&(this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>sw(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new le(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ze("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gA&&(this.reconnectDelay_=pA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ze("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";un()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+iw.replace(/\./g,"-")]=1,Zo()?n["framework.cordova"]=1:ll()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Yd.getInstance().currentlyOnline();return Jo(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Y=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var $s=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Y(Bs,e),i=new Y(Bs,n);return this.compare(r,i)!==0}minPost(){return Y.MIN}};var qd,Zd=class extends $s{static get __EMPTY_NODE(){return qd}static set __EMPTY_NODE(e){qd=e}compare(e,n){return Ks(e.name,n.name)}isDefinedOn(e){throw qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Y.MIN}maxPost(){return new Y(vi,qd)}makePost(e,n){return v(typeof e=="string","KeyIndex indexValue must always be a string."),new Y(e,qd)}toString(){return".key"}},js=new Zd;var Ls=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Gt=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Pt.EMPTY_NODE,this.right=o??Pt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Av=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Pt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ls(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ls(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ls(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ls(this.root_,null,this.comparator_,!0,e)}};Pt.EMPTY_NODE=new Av;function P$(t,e){return Ks(t.name,e.name)}function cw(t,e){return Ks(t,e)}var Rv;function M$(t){Rv=t}var oR=function(t){return typeof t=="number"?"number:"+UA(t):"string:"+t},aR=function(t){if(t.isLeafNode()){let e=t.val();v(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ln(e,".sv"),"Priority must be a string or number.")}else v(t===Rv||t.isEmpty(),"priority of unexpected type.");v(t===Rv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var mA,Hs=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aR(this.priorityNode_)}static set __childrenNodeConstructor(n){mA=n}static get __childrenNodeConstructor(){return mA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return H(n)?this:Q(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Q(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(v(i!==".priority"||Ir(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(he(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+oR(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=UA(this.value_):n+=this.value_,this.lazyHash_=FA(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(v(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return v(s>=0,"Unknown leaf type: "+r),v(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),cR,uR;function k$(t){cR=t}function O$(t){uR=t}var Nv=class extends $s{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ks(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(vi,new Hs("[PRIORITY-POST]",uR))}makePost(e,n){let r=cR(e);return new Y(n,new Hs("[PRIORITY-POST]",r))}toString(){return".priority"}},Xe=new Nv;var F$=Math.log(2),xv=class{constructor(e){let n=s=>parseInt(Math.log(s)/F$,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Jd=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new Gt(h,d.node,Gt.BLACK,null,null);{let f=parseInt(l/2,10)+c,g=i(c,f),_=i(f+1,u);return d=t[f],h=n?n(d):d,new Gt(h,d.node,Gt.BLACK,g,_)}},s=function(c){let u=null,l=null,d=t.length,h=function(g,_){let I=d-g,b=d;d-=g;let $=i(I+1,b),te=t[I],ne=n?n(te):te;f(new Gt(ne,te.node,_,null,$))},f=function(g){u?(u.left=g,u=g):(l=g,u=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),I=Math.pow(2,c.count-(g+1));_?h(I,Gt.BLACK):(h(I,Gt.BLACK),h(I,Gt.RED))}return l},o=new xv(t.length),a=s(o);return new Pt(r||e,a)};var lv,Fs={},qs=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return v(Fs&&Xe,"ChildrenNode.ts has not been loaded"),lv=lv||new t({".priority":Fs},{".priority":Xe}),lv}get(e){let n=zr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pt?n:null}hasIndex(e){return ln(this.indexSet_,e.toString())}addIndex(e,n){v(e!==js,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Y.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Jd(r,e.getCompare()):a=Fs;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=Xo(this.indexes_,(i,s)=>{let o=zr(this.indexSet_,s);if(v(o,"Missing index implementation for "+s),i===Fs)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Y.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Jd(a,o.getCompare())}else return Fs;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Y(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Xo(this.indexes_,i=>{if(i===Fs)return i;{let s=n.get(e.name);return s?i.remove(new Y(e.name,s)):i}});return new t(r,this.indexSet_)}};var cc,pe=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&aR(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cc||(cc=new t(new Pt(cw),null,qs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cc}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?cc:r}}getChild(n){let r=Q(n);return r===null?this:this.getImmediateChild(r).getChild(he(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(v(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Y(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?cc:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Q(n);if(i===null)return r;{v(Q(n)!==".priority"||Ir(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(he(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Xe,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+oR(this.getPriority().val())+":"),this.forEachChild(Xe,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":FA(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Y(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Y(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Y(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===wc?-1:0}withIndex(n){if(n===js||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===js||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Xe),s=r.getIterator(Xe),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===js?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Pv=class extends pe{constructor(){super(new Pt(cw),pe.EMPTY_NODE,qs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}},wc=new Pv;Object.defineProperties(Y,{MIN:{value:new Y(Bs,pe.EMPTY_NODE)},MAX:{value:new Y(vi,wc)}});Zd.__EMPTY_NODE=pe.EMPTY_NODE;Hs.__childrenNodeConstructor=pe;M$(wc);O$(wc);var L$=!0;function Je(t,e=null){if(t===null)return pe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),v(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Hs(n,Je(e))}if(!(t instanceof Array)&&L$){let n=[],r=!1;if(Mt(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Je(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Y(o,c)))}}),n.length===0)return pe.EMPTY_NODE;let s=Jd(n,P$,o=>o.name,cw);if(r){let o=Jd(n,Xe.getCompare());return new pe(s,Je(e),new qs({".priority":o},{".priority":Xe}))}else return new pe(s,Je(e),qs.Default)}else{let n=pe.EMPTY_NODE;return Mt(t,(r,i)=>{if(ln(t,r)&&r.substring(0,1)!=="."){let s=Je(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Je(e))}}k$(Je);var Mv=class extends $s{constructor(e){super(),this.indexPath_=e,v(!H(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ks(e.name,n.name):s}makePost(e,n){let r=Je(e),i=pe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Y(n,i)}maxPost(){let e=pe.EMPTY_NODE.updateChild(this.indexPath_,wc);return new Y(vi,e)}toString(){return nR(this.indexPath_,0).join("/")}};var kv=class extends $s{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ks(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(e,n){let r=Je(e);return new Y(n,r)}toString(){return".value"}},V$=new kv;function U$(t){return{type:"value",snapshotNode:t}}function j$(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function B$(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $$(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Ov=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bs}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xe}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function _A(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Xe?n="$priority":t.index_===V$?n="$value":t.index_===js?n="$key":(v(t.index_ instanceof Mv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vA(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Xe&&(e.i=t.index_.toString()),e}var Fv=class t extends Kd{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_c("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(v(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=_A(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),zr(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=_A(e._queryParams),r=e._path.toString(),i=new Hr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gr(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=rs(a.responseText)}catch{yt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&yt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Lv=class{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Xd(){return{value:null,children:new Map}}function lR(t,e,n){if(H(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Q(e);t.children.has(r)||t.children.set(r,Xd());let i=t.children.get(r);e=he(e),lR(i,e,n)}}function Vv(t,e,n){t.value!==null?n(e,t.value):H$(t,(r,i)=>{let s=new le(e.toString()+"/"+r);Vv(i,s,n)})}function H$(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Uv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Mt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var wA=10*1e3,q$=30*1e3,z$=5*60*1e3,jv=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Uv(e);let r=wA+(q$-wA)*Math.random();lc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Mt(e,(i,s)=>{s>0&&ln(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),lc(this.reportStats_.bind(this),Math.floor(Math.random()*2*z$))}};var jn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(jn||{});function dR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Bv=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=jn.ACK_USER_WRITE,this.source=dR()}operationForChild(e){if(H(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new le(e));return new t(ce(),n,this.revert)}}else return v(Q(this.path)===e,"operationForChild called for unrelated child."),new t(he(this.path),this.affectedTree,this.revert)}};var zs=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=jn.OVERWRITE}operationForChild(e){return H(this.path)?new t(this.source,ce(),this.snap.getImmediateChild(e)):new t(this.source,he(this.path),this.snap)}};var eh=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=jn.MERGE}operationForChild(e){if(H(this.path)){let n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new zs(this.source,ce(),n.value):new t(this.source,ce(),n)}else return v(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,he(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var pc=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(H(e))return this.isFullyInitialized()&&!this.filtered_;let n=Q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function W$(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push($$(o.childName,o.snapshotNode))}),uc(t,i,"child_removed",e,r,n),uc(t,i,"child_added",e,r,n),uc(t,i,"child_moved",s,r,n),uc(t,i,"child_changed",e,r,n),uc(t,i,"value",e,r,n),i}function uc(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>K$(t,a,c)),o.forEach(a=>{let c=G$(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function G$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function K$(t,e,n){if(e.childName==null||n.childName==null)throw qr("Should only compare child_ events.");let r=new Y(e.childName,e.snapshotNode),i=new Y(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function pR(t,e){return{eventCache:t,serverCache:e}}function hc(t,e,n,r){return pR(new pc(e,n,r),t.serverCache)}function gR(t,e,n,r){return pR(t.eventCache,new pc(e,n,r))}function $v(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function wi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var dv,Q$=()=>(dv||(dv=new Pt(QB)),dv),ct=class t{constructor(e,n=Q$()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Mt(e,(r,i)=>{n=n.set(new le(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ce(),value:this.value};if(H(e))return null;{let r=Q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(he(e),n);return s!=null?{path:Ue(new le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(H(e))return this;{let n=Q(e),r=this.children.get(n);return r!==null?r.subtree(he(e)):new t(null)}}set(e,n){if(H(e))return new t(n,this.children);{let r=Q(e),s=(this.children.get(r)||new t(null)).set(he(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(H(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Q(e),r=this.children.get(n);if(r){let i=r.remove(he(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(H(e))return this.value;{let n=Q(e),r=this.children.get(n);return r?r.get(he(e)):null}}setTree(e,n){if(H(e))return n;{let r=Q(e),s=(this.children.get(r)||new t(null)).setTree(he(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(ce(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ue(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ce(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(H(e))return null;{let s=Q(e),o=this.children.get(s);return o?o.findOnPath_(he(e),Ue(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ce(),n)}foreachOnPath_(e,n,r){if(H(e))return this;{this.value&&r(n,this.value);let i=Q(e),s=this.children.get(i);return s?s.foreachOnPath_(he(e),Ue(n,i),r):new t(null)}}foreach(e){this.foreach_(ce(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ue(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Qt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ct(null))}};function fc(t,e,n){if(H(e))return new Qt(new ct(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=xt(i,e);return s=s.updateChild(o,n),new Qt(t.writeTree_.set(i,s))}else{let i=new ct(n),s=t.writeTree_.setTree(e,i);return new Qt(s)}}}function IA(t,e,n){let r=t;return Mt(n,(i,s)=>{r=fc(r,Ue(e,i),s)}),r}function EA(t,e){if(H(e))return Qt.empty();{let n=t.writeTree_.setTree(e,new ct(null));return new Qt(n)}}function Hv(t,e){return Ii(t,e)!=null}function Ii(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xt(n.path,e)):null}function TA(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xe,(r,i)=>{e.push(new Y(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Y(r,i.value))}),e}function wr(t,e){if(H(e))return t;{let n=Ii(t,e);return n!=null?new Qt(new ct(n)):new Qt(t.writeTree_.subtree(e))}}function qv(t){return t.writeTree_.isEmpty()}function Ws(t,e){return mR(ce(),t.writeTree_,e)}function mR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(v(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=mR(Ue(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ue(t,".priority"),r)),n}}function yR(t,e){return ER(e,t)}function Y$(t,e,n,r,i){v(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=fc(t.visibleWrites,e,n)),t.lastWriteId=r}function Z$(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function J$(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);v(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&X$(a,r.path)?i=!1:Kt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return eH(t),!0;if(r.snap)t.visibleWrites=EA(t.visibleWrites,r.path);else{let a=r.children;Mt(a,c=>{t.visibleWrites=EA(t.visibleWrites,Ue(r.path,c))})}return!0}else return!1}function X$(t,e){if(t.snap)return Kt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Kt(Ue(t.path,n),e))return!0;return!1}function eH(t){t.visibleWrites=_R(t.allWrites,tH,ce()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tH(t){return t.visible}function _R(t,e,n){let r=Qt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Kt(n,o)?(a=xt(n,o),r=fc(r,a,s.snap)):Kt(o,n)&&(a=xt(o,n),r=fc(r,ce(),s.snap.getChild(a)));else if(s.children){if(Kt(n,o))a=xt(n,o),r=IA(r,a,s.children);else if(Kt(o,n))if(a=xt(o,n),H(a))r=IA(r,ce(),s.children);else{let c=zr(s.children,Q(a));if(c){let u=c.getChild(he(a));r=fc(r,ce(),u)}}}else throw qr("WriteRecord should have .snap or .children")}}return r}function vR(t,e,n,r,i){if(!r&&!i){let s=Ii(t.visibleWrites,e);if(s!=null)return s;{let o=wr(t.visibleWrites,e);if(qv(o))return n;if(n==null&&!Hv(o,ce()))return null;{let a=n||pe.EMPTY_NODE;return Ws(o,a)}}}else{let s=wr(t.visibleWrites,e);if(!i&&qv(s))return n;if(!i&&n==null&&!Hv(s,ce()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Kt(u.path,e)||Kt(e,u.path))},a=_R(t.allWrites,o,e),c=n||pe.EMPTY_NODE;return Ws(a,c)}}}function nH(t,e,n){let r=pe.EMPTY_NODE,i=Ii(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=wr(t.visibleWrites,e);return n.forEachChild(Xe,(o,a)=>{let c=Ws(wr(s,new le(o)),a);r=r.updateImmediateChild(o,c)}),TA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=wr(t.visibleWrites,e);return TA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function rH(t,e,n,r,i){v(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ue(e,n);if(Hv(t.visibleWrites,s))return null;{let o=wr(t.visibleWrites,s);return qv(o)?i.getChild(n):Ws(o,i.getChild(n))}}function iH(t,e,n,r){let i=Ue(e,n),s=Ii(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=wr(t.visibleWrites,i);return Ws(o,r.getNode().getImmediateChild(n))}else return null}function sH(t,e){return Ii(t.visibleWrites,e)}function oH(t,e,n,r,i,s,o){let a,c=wr(t.visibleWrites,e),u=Ii(c,ce());if(u!=null)a=u;else if(n!=null)a=Ws(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function aH(){return{visibleWrites:Qt.empty(),allWrites:[],lastWriteId:-1}}function zv(t,e,n,r){return vR(t.writeTree,t.treePath,e,n,r)}function wR(t,e){return nH(t.writeTree,t.treePath,e)}function CA(t,e,n,r){return rH(t.writeTree,t.treePath,e,n,r)}function th(t,e){return sH(t.writeTree,Ue(t.treePath,e))}function cH(t,e,n,r,i,s){return oH(t.writeTree,t.treePath,e,n,r,i,s)}function uw(t,e,n){return iH(t.writeTree,t.treePath,e,n)}function IR(t,e){return ER(Ue(t.treePath,e),t.writeTree)}function ER(t,e){return{treePath:t,writeTree:e}}var Wv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;v(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),v(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,yA(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,B$(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,j$(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,yA(r,e.snapshotNode,i.oldSnap));else throw qr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Gv=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},TR=new Gv,gc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new pc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uw(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wi(this.viewCache_),s=cH(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function uH(t,e){v(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),v(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function lH(t,e,n,r,i){let s=new Wv,o,a;if(n.type===jn.OVERWRITE){let u=n;u.source.fromUser?o=Kv(t,e,u.path,u.snap,r,i,s):(v(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!H(u.path),o=nh(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===jn.MERGE){let u=n;u.source.fromUser?o=hH(t,e,u.path,u.children,r,i,s):(v(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Qv(t,e,u.path,u.children,r,i,a,s))}else if(n.type===jn.ACK_USER_WRITE){let u=n;u.revert?o=gH(t,e,u.path,r,i,s):o=fH(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===jn.LISTEN_COMPLETE)o=pH(t,e,n.path,r,s);else throw qr("Unknown operation type: "+n.type);let c=s.getChanges();return dH(e,o,c),{viewCache:o,changes:c}}function dH(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=$v(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(U$($v(e)))}}function CR(t,e,n,r,i,s){let o=e.eventCache;if(th(r,n)!=null)return e;{let a,c;if(H(n))if(v(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=wi(e),l=u instanceof pe?u:pe.EMPTY_NODE,d=wR(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=zv(r,wi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=Q(n);if(u===".priority"){v(Ir(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=CA(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=he(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=CA(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=uw(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return hc(e,a,o.isFullyInitialized()||H(n),t.filter.filtersNodes())}}function nh(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(H(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=Q(n);if(!c.isCompleteForPath(n)&&Ir(n)>1)return e;let g=he(n),I=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?u=l.updatePriority(c.getNode(),I):u=l.updateChild(c.getNode(),f,I,g,TR,null)}let d=gR(e,u,c.isFullyInitialized()||H(n),l.filtersNodes()),h=new gc(i,d,s);return CR(t,d,n,i,h,a)}function Kv(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new gc(i,e,s);if(H(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=hc(e,u,!0,t.filter.filtersNodes());else{let d=Q(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=hc(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=he(n),f=a.getNode().getImmediateChild(d),g;if(H(h))g=r;else{let _=l.getCompleteChild(d);_!=null?tR(h)===".priority"&&_.getChild(rR(h)).isEmpty()?g=_:g=_.updateChild(h,r):g=pe.EMPTY_NODE}if(f.equals(g))c=e;else{let _=t.filter.updateChild(a.getNode(),d,g,h,l,o);c=hc(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function DA(t,e){return t.eventCache.isCompleteForChild(e)}function hH(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=Ue(n,c);DA(e,Q(l))&&(a=Kv(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=Ue(n,c);DA(e,Q(l))||(a=Kv(t,a,l,u,i,s,o))}),a}function bA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Qv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;H(n)?u=r:u=new ct(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=bA(t,f,h);c=nh(t,c,new le(d),g,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),_=bA(t,g,h);c=nh(t,c,new le(d),_,i,s,o,a)}}),c}function fH(t,e,n,r,i,s,o){if(th(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(H(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return nh(t,e,n,c.getNode().getChild(n),i,s,a,o);if(H(n)){let u=new ct(null);return c.getNode().forEachChild(js,(l,d)=>{u=u.set(new le(l),d)}),Qv(t,e,n,u,i,s,a,o)}else return e}else{let u=new ct(null);return r.foreach((l,d)=>{let h=Ue(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),Qv(t,e,n,u,i,s,a,o)}}function pH(t,e,n,r,i){let s=e.serverCache,o=gR(e,s.getNode(),s.isFullyInitialized()||H(n),s.isFiltered());return CR(t,o,n,r,TR,i)}function gH(t,e,n,r,i,s){let o;if(th(r,n)!=null)return e;{let a=new gc(r,e,i),c=e.eventCache.getNode(),u;if(H(n)||Q(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=zv(r,wi(e));else{let d=e.serverCache.getNode();v(d instanceof pe,"serverChildren would be complete if leaf node"),l=wR(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=Q(n),d=uw(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,he(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,pe.EMPTY_NODE,he(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zv(r,wi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||th(r,ce())!=null,hc(e,u,o,t.filter.filtersNodes())}}function mH(t,e){let n=wi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!H(e)&&!n.getImmediateChild(Q(e)).isEmpty())?n.getChild(e):null}function SA(t,e,n,r){e.type===jn.MERGE&&e.source.queryId!==null&&(v(wi(t.viewCache_),"We should always have a full cache before handling merges"),v($v(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=lH(t.processor_,i,e,n,r);return uH(t.processor_,s.viewCache),v(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,yH(t,s.changes,s.viewCache.eventCache.getNode(),null)}function yH(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return W$(t.eventGenerator_,e,n,i)}var AA;function _H(t){v(!AA,"__referenceConstructor has already been defined"),AA=t}function lw(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return v(s!=null,"SyncTree gave us an op for an invalid query."),SA(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(SA(o,e,n,r));return s}}function dw(t,e){let n=null;for(let r of t.views.values())n=n||mH(r,e);return n}var RA;function vH(t){v(!RA,"__referenceConstructor has already been defined"),RA=t}var rh=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_=aH(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function wH(t,e,n,r,i){return Y$(t.pendingWriteTree_,e,n,r,i),i?sh(t,new zs(dR(),e,n)):[]}function Vs(t,e,n=!1){let r=Z$(t.pendingWriteTree_,e);if(J$(t.pendingWriteTree_,e)){let s=new ct(null);return r.snap!=null?s=s.set(ce(),!0):Mt(r.children,o=>{s=s.set(new le(o),!0)}),sh(t,new Bv(r.path,s,n))}else return[]}function ih(t,e,n){return sh(t,new zs(hR(),e,n))}function IH(t,e,n){let r=ct.fromObject(n);return sh(t,new eh(hR(),e,r))}function EH(t,e,n,r){let i=AR(t,r);if(i!=null){let s=RR(i),o=s.path,a=s.queryId,c=xt(o,e),u=new zs(fR(a),c,n);return NR(t,o,u)}else return[]}function TH(t,e,n,r){let i=AR(t,r);if(i){let s=RR(i),o=s.path,a=s.queryId,c=xt(o,e),u=ct.fromObject(n),l=new eh(fR(a),c,u);return NR(t,o,l)}else return[]}function DR(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=xt(o,e),u=dw(a,c);if(u)return u});return vR(i,e,s,n,!0)}function sh(t,e){return bR(e,t.syncPointTree_,null,yR(t.pendingWriteTree_,ce()))}function bR(t,e,n,r){if(H(t.path))return SR(t,e,n,r);{let i=e.get(ce());n==null&&i!=null&&(n=dw(i,ce()));let s=[],o=Q(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=IR(r,o);s=s.concat(bR(a,c,u,l))}return i&&(s=s.concat(lw(i,t,r,n))),s}}function SR(t,e,n,r){let i=e.get(ce());n==null&&i!=null&&(n=dw(i,ce()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=IR(r,o),l=t.operationForChild(o);l&&(s=s.concat(SR(l,a,c,u)))}),i&&(s=s.concat(lw(i,t,r,n))),s}function AR(t,e){return t.tagToQueryMap.get(e)}function RR(t){let e=t.indexOf("$");return v(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function NR(t,e,n){let r=t.syncPointTree_.get(e);v(r,"Missing sync point for query tag that we're tracking");let i=yR(t.pendingWriteTree_,e);return lw(r,n,i,null)}var Yv=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Zv=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Ue(this.path_,e);return new t(this.syncTree_,n)}node(){return DR(this.syncTree_,this.path_)}},CH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},NA=function(t,e,n){if(!t||typeof t!="object")return t;if(v(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bH(t[".sv"],e);v(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:v(!1,"Unexpected server value: "+t)}},bH=function(t,e,n){t.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&v(!1,"Unexpected increment value: "+r);let i=e.node();if(v(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},SH=function(t,e,n,r){return hw(e,new Zv(n,t),r)},AH=function(t,e,n){return hw(t,new Yv(e),n)};function hw(t,e,n){let r=t.getPriority().val(),i=NA(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=NA(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Hs(a,Je(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Hs(i))),o.forEachChild(Xe,(a,c)=>{let u=hw(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var mc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function fw(t,e){let n=e instanceof le?e:new le(e),r=t,i=Q(n);for(;i!==null;){let s=zr(r.node.children,i)||{children:{},childCount:0};r=new mc(i,r,s),n=he(n),i=Q(n)}return r}function Qs(t){return t.node.value}function xR(t,e){t.node.value=e,Jv(t)}function PR(t){return t.node.childCount>0}function RH(t){return Qs(t)===void 0&&!PR(t)}function oh(t,e){Mt(t.node.children,(n,r)=>{e(new mc(n,t,r))})}function MR(t,e,n,r){n&&!r&&e(t),oh(t,i=>{MR(i,e,!0,r)}),n&&r&&e(t)}function NH(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ic(t){return new le(t.parent===null?t.name:Ic(t.parent)+"/"+t.name)}function Jv(t){t.parent!==null&&xH(t.parent,t.name,t)}function xH(t,e,n){let r=RH(n),i=ln(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Jv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Jv(t))}var PH=/[\[\].#$\/\u0000-\u001F\u007F]/,MH=/[\[\].#$\u0000-\u001F\u007F]/,hv=10*1024*1024,kR=function(t){return typeof t=="string"&&t.length!==0&&!PH.test(t)},kH=function(t){return typeof t=="string"&&t.length!==0&&!MH.test(t)},OH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kH(t)};var OR=function(t,e,n){let r=n instanceof le?new bv(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mi(r));if(typeof e=="function")throw new Error(t+"contains a function "+mi(r)+" with contents = "+e.toString());if(LA(e))throw new Error(t+"contains "+e.toString()+" "+mi(r));if(typeof e=="string"&&e.length>hv/3&&ea(e)>hv)throw new Error(t+"contains a string greater than "+hv+" utf8 bytes "+mi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Mt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kR(o)))throw new Error(t+" contains an invalid key ("+o+") "+mi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);b$(r,o),OR(t,a,r),S$(r)}),i&&s)throw new Error(t+' contains ".value" child '+mi(r)+" in addition to actual children.")}};var FH=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!OH(n))throw new Error(ZC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Xv=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function LH(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!iR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ei(t,e,n){LH(t,n),VH(t,r=>Kt(r,e)||Kt(e,r))}function VH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(UH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function UH(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();_i&&Ze("event: "+n.toString()),vc(r)}}}var jH="repo_interrupt",BH=25,ew=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xd(),this.transactionQueueTree_=new mc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function $H(t,e,n){if(t.stats_=ow(t.repoInfo_),t.forceRestClient_||t$())t.server_=new Fv(t.repoInfo_,(r,i,s,o)=>{xA(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>PA(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new aw(t.repoInfo_,e,(r,i,s,o)=>{xA(t,r,i,s,o)},r=>{PA(t,r)},r=>{qH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=r$(t.repoInfo_,()=>new jv(t.stats_,t.server_)),t.infoData_=new Lv,t.infoSyncTree_=new rh({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ih(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pw(t,"connected",!1),t.serverSyncTree_=new rh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);Ei(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function HH(t){let n=t.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function FR(t){return CH({timestamp:HH(t)})}function xA(t,e,n,r,i){t.dataUpdateCount++;let s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Xo(n,u=>Je(u));o=TH(t.serverSyncTree_,s,c,i)}else{let c=Je(n);o=EH(t.serverSyncTree_,s,c,i)}else if(r){let c=Xo(n,u=>Je(u));o=IH(t.serverSyncTree_,s,c)}else{let c=Je(n);o=ih(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=mw(t,s)),Ei(t.eventQueue_,a,o)}function PA(t,e){pw(t,"connected",e),e===!1&&WH(t)}function qH(t,e){Mt(e,(n,r)=>{pw(t,n,r)})}function pw(t,e,n){let r=new le("/.info/"+e),i=Je(n);t.infoData_.updateSnapshot(r,i);let s=ih(t.infoSyncTree_,r,i);Ei(t.eventQueue_,r,s)}function zH(t){return t.nextWriteId_++}function WH(t){LR(t,"onDisconnectEvents");let e=FR(t),n=Xd();Vv(t.onDisconnect_,ce(),(i,s)=>{let o=SH(i,s,t.serverSyncTree_,e);lR(n,i,o)});let r=[];Vv(n,ce(),(i,s)=>{r=r.concat(ih(t.serverSyncTree_,i,s));let o=YH(t,i);mw(t,o)}),t.onDisconnect_=Xd(),Ei(t.eventQueue_,ce(),r)}function GH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(jH)}function LR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ze(n,...e)}function VR(t,e,n){return DR(t.serverSyncTree_,e,n)||pe.EMPTY_NODE}function gw(t,e=t.transactionQueueTree_){if(e||ah(t,e),Qs(e)){let n=jR(t,e);v(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&KH(t,Ic(e),n)}else PR(e)&&oh(e,n=>{gw(t,n)})}function KH(t,e,n){let r=n.map(u=>u.currentWriteId),i=VR(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];v(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=xt(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{LR(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Vs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ah(t,fw(t.transactionQueueTree_,e)),gw(t,t.transactionQueueTree_),Ei(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)vc(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{yt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}mw(t,e)}},o)}function mw(t,e){let n=UR(t,e),r=Ic(n),i=jR(t,n);return QH(t,i,r),r}function QH(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=xt(n,c.path),l=!1,d;if(v(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(Vs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=BH)l=!0,d="maxretry",i=i.concat(Vs(t.serverSyncTree_,c.currentWriteId,!0));else{let h=VR(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){OR("transaction failed: Data returned ",f,c.path);let g=Je(f);typeof f=="object"&&f!=null&&ln(f,".priority")||(g=g.updatePriority(h.getPriority()));let I=c.currentWriteId,b=FR(t),$=AH(g,h,b);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=$,c.currentWriteId=zH(t),o.splice(o.indexOf(I),1),i=i.concat(wH(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(Vs(t.serverSyncTree_,I,!0))}else l=!0,d="nodata",i=i.concat(Vs(t.serverSyncTree_,c.currentWriteId,!0))}Ei(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ah(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)vc(r[a]);gw(t,t.transactionQueueTree_)}function UR(t,e){let n,r=t.transactionQueueTree_;for(n=Q(e);n!==null&&Qs(r)===void 0;)r=fw(r,n),e=he(e),n=Q(e);return r}function jR(t,e){let n=[];return BR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BR(t,e,n){let r=Qs(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);oh(e,i=>{BR(t,i,n)})}function ah(t,e){let n=Qs(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,xR(e,n.length>0?n:void 0)}oh(e,r=>{ah(t,r)})}function YH(t,e){let n=Ic(UR(t,e)),r=fw(t.transactionQueueTree_,e);return NH(r,i=>{fv(t,i)}),fv(t,r),MR(r,i=>{fv(t,i)}),n}function fv(t,e){let n=Qs(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(v(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(v(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Vs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?xR(e,void 0):n.length=s+1,Ei(t.eventQueue_,Ic(e),i);for(let o=0;o<r.length;o++)vc(r[o])}}function ZH(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function JH(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yt(`Invalid query segment '${n}' in query '${t}'`)}return e}var MA=function(t,e){let n=XH(t),r=n.namespace;n.domain==="firebase.com"&&Bn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||GB();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Wd(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new le(n.pathString)}},XH=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=ZH(t.substring(l,d)));let h=JH(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var kA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kQ=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=kA.charAt(n%64),n=Math.floor(n/64);v(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=kA.charAt(e[i]);return v(o.length===20,"nextPushId: Length should be 20."),o}}();var tw=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return H(this._path)?null:tR(this._path)}get ref(){return new Gs(this._repo,this._path)}get _queryIdentifier(){let e=vA(this._queryParams),n=sw(e);return n==="{}"?"default":n}get _queryObject(){return vA(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=iR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+D$(this._path)}};var Gs=class t extends tw{constructor(e,n){super(e,n,new Ov,!1)}get parent(){let e=rR(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};_H(Gs);vH(Gs);var eq="FIREBASE_DATABASE_EMULATOR_HOST",nw={},tq=!1;function nq(t,e,n,r){t.repoInfo_=new Wd(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function rq(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=MA(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[eq]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=MA(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new dc(dc.OWNER):new vv(t.name,t.options,e);FH("Invalid Firebase Database URL",o),H(o.path)||Bn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=sq(a,t,l,new _v(t.name,n));return new rw(d,t)}function iq(t,e){let n=nw[e];(!n||n[t.key]!==t)&&Bn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),GH(t),delete n[t.key]}function sq(t,e,n,r){let i=nw[e.name];i||(i={},nw[e.name]=i);let s=i[t.toURLString()];return s&&Bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ew(t,tq,n,r),i[t.toURLString()]=s,s}var rw=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($H(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gs(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iq(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Bn("Cannot call "+e+" on a deleted database.")}};function $R(t=cr(),e){let n=Yr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=cl("database");r&&HR(n,...r)}return n}function HR(t,e,n,r={}){t=et(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Bn("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new dc(dc.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:ul(r.mockUserToken,t.app.options.projectId);s=new dc(o)}nq(i,e,n,s)}function oq(t){qB(pn),fn(new at("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return rq(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),fe(tA,nA,t),fe(tA,nA,"esm2017")}aw.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};aw.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oq();var Ec=class{constructor(e){return e}},qR="database",yw=class{constructor(){return Jr(qR)}};var _w=new F("angularfire2.database-instances");function aq(t,e){let n=ss(qR,t,e);return n&&new Ec(n)}function cq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ec(r)}}var uq={provide:yw,deps:[[new Ce,_w]]},lq={provide:Ec,useFactory:aq,deps:[[new Ce,_w],$t]},dq=(()=>{class t{constructor(){fe("angularfire",Nn.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ct({type:t});static \u0275inj=Tt({providers:[lq,uq]})}return t})();function zR(t,...e){return{ngModule:dq,providers:[{provide:_w,useFactory:cq(t),multi:!0,deps:[re,ot,lr,xn,[new Ce,ni],[new Ce,ur],...e]}]}}var WR=Bt($R,!0);var GR={production:!0,firebaseConfig:{apiKey:"AIzaSyDJB4DwPSvlUi-Y_qDMct-JwNwqZQO4XZY",authDomain:"dooter-chat.firebaseapp.com",projectId:"dooter-chat",storageBucket:"dooter-chat.appspot.com",messagingSenderId:"98283043880",appId:"1:98283043880:web:e0bc565f977414aea7c91d"}};var KR={providers:[VC(eA),zi(hD(()=>fD(GR.firebaseConfig))),zi(JD(()=>XD())),zi(K0(()=>Z0())),zi(zR(()=>WR()))]};var QR=(()=>{let e=class e{pressed(){console.log("Hello")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=sn({type:e,selectors:[["app-navbar"]],standalone:!0,features:[on],decls:7,vars:0,consts:[[1,"flex","bg-blue-800","text-white","justify-around","p-2","text-xl","border-b-4","border-stone-800","sm:text-base"],["routerLink","/"],["routerLink","/chatpage"]],template:function(i,s){i&1&&(we(0,"nav",0)(1,"a",1),ze(2,"Home"),De(),we(3,"a",2),ze(4,"Chat"),De(),we(5,"a"),ze(6,"Login"),De()())},dependencies:[LC]});let t=e;return t})();var YR=(()=>{let e=class e{constructor(){this.title="Dooter"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=sn({type:e,selectors:[["app-root"]],standalone:!0,features:[on],decls:3,vars:0,template:function(i,s){i&1&&(nr(0,"app-navbar"),we(1,"main"),nr(2,"router-outlet"),De())},dependencies:[fp,ng,QR]});let t=e;return t})();iC(YR,KR).catch(t=>console.error(t));
